{"version":3,"file":"chunks/29912.12a1390abf8f3f344169.min.js","mappings":"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,MACA,OAED,2BAA4B,CAC3B,MACA,OAED,4BAA6B,CAC5B,MACA,OAED,8BAA+B,CAC9B,MACA,OAED,+BAAgC,CAC/B,MACA,OAED,6BAA8B,CAC7B,KACA,MAED,8BAA+B,CAC9B,KACA,MAED,6BAA8B,CAC7B,MACA,OAED,8BAA+B,CAC9B,MACA,OAED,6BAA8B,CAC7B,KACA,MAED,8BAA+B,CAC9B,MACA,OAED,iCAAkC,CACjC,MACA,OAED,kCAAmC,CAClC,MACA,OAED,iCAAkC,CACjC,MACA,OAED,sBAAuB,CACtB,MACA,OAED,uBAAwB,CACvB,MACA,OAED,oBAAqB,CACpB,MACA,OAED,sBAAuB,CACtB,KACA,MAED,qBAAsB,CACrB,MACA,OAED,gBAAiB,CAChB,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,KACA,MAED,cAAe,CACd,MACA,OAED,gBAAiB,CAChB,MACA,OAED,YAAa,CACZ,MACA,OAED,mBAAoB,CACnB,MACA,OAED,oBAAqB,CACpB,KACA,MAED,eAAgB,CACf,MACA,OAED,YAAa,CACZ,MACA,OAED,mBAAoB,CACnB,MACA,OAED,sBAAuB,CACtB,MACA,OAED,uBAAwB,CACvB,MACA,OAED,kBAAmB,CAClB,MACA,OAED,qBAAsB,CACrB,MACA,OAED,sBAAuB,CACtB,MACA,OAED,kBAAmB,CAClB,MACA,OAED,eAAgB,CACf,MACA,OAED,aAAc,CACb,MACA,OAED,iBAAkB,CACjB,MACA,OAED,yBAA0B,CACzB,MACA,OAED,0BAA2B,CAC1B,MACA,OAED,oBAAqB,CACpB,MACA,OAED,qBAAsB,CACrB,MACA,OAED,kBAAmB,CAClB,MACA,OAED,eAAgB,CACf,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,wBAAyB,CACxB,MACA,OAED,gBAAiB,CAChB,MACA,OAED,kBAAmB,CAClB,MACA,OAED,kBAAmB,CAClB,MACA,OAED,aAAc,CACb,MACA,OAED,aAAc,CACb,MACA,OAED,iBAAkB,CACjB,MACA,OAED,cAAe,CACd,MACA,OAED,qBAAsB,CACrB,MACA,OAED,sBAAuB,CACtB,MACA,OAED,iBAAkB,CACjB,MACA,OAED,kBAAmB,CAClB,MACA,OAED,uBAAwB,CACvB,MACA,OAED,wBAAyB,CACxB,MACA,OAED,mBAAoB,CACnB,MACA,OAED,gBAAiB,CAChB,MACA,OAED,iBAAkB,CACjB,MACA,OAED,oBAAqB,CACpB,MACA,OAED,yBAA0B,CACzB,MACA,OAED,uBAAwB,CACvB,MACA,OAED,wBAAyB,CACxB,MACA,OAED,eAAgB,CACf,MACA,OAED,2BAA4B,CAC3B,MACA,OAED,4BAA6B,CAC5B,MACA,OAED,iBAAkB,CACjB,MACA,OAED,4BAA6B,CAC5B,MACA,OAED,8BAA+B,CAC9B,MACA,OAED,gCAAiC,CAChC,MACA,OAED,uBAAwB,CACvB,MACA,OAED,iBAAkB,CACjB,MACA,OAED,WAAY,CACX,MACA,OAED,eAAgB,CACf,MACA,OAED,cAAe,CACd,MACA,OAED,cAAe,CACd,MACA,OAED,gBAAiB,CAChB,MACA,QAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAO1O,QAAQC,UAAU4O,MAAK,WAC7B,IAAIjP,EAAI,IAAIa,MAAM,uBAAyBiO,EAAM,KAEjD,MADA9O,EAAEkP,KAAO,mBACHlP,CACP,IAGD,IAAImP,EAAMP,EAAIE,GAAMhR,EAAKqR,EAAI,GAC7B,OAAOJ,EAAoB/O,EAAEmP,EAAI,IAAIF,MAAK,WACzC,OAAOF,EAAoBjR,EAC5B,GACD,CACA+Q,EAAoB7Q,KAAO,WAAa,OAAOoR,OAAOpR,KAAK4Q,EAAM,EACjEC,EAAoB/Q,GAAK,MACzBuR,EAAOC,QAAUT,C,wBCtZjB,IAAID,EAAM,CACT,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,KACA,EACA,MAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,KACA,EACA,MAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,KACA,EACA,MAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,KAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,GACA,EACA,IAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,KACA,EACA,MAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,KACA,EACA,MAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,KACA,EACA,MAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,KACA,EACA,MAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,sBAAuB,CACtB,MACA,EACA,OAED,eAAgB,CACf,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA,EACA,OAED,UAAW,CACV,MACA,EACA,OAED,oBAAqB,CACpB,MACA,EACA,OAED,aAAc,CACb,MACA,EACA,OAED,iBAAkB,CACjB,KACA,EACA,MAED,UAAW,CACV,MACA,EACA,OAED,iBAAkB,CACjB,MACA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3F,IAAQJ,GACpCsD,OAAOgM,qCAGPC,EAASI,KAAKrH,SAASsH,KAAM,CAACxP,IAC9BmB,EAAIwE,MAAM,gDAAgD3F,QAEvD,CACX,GAGJ,K,wBCtQA,IAAIiO,EAAM,CACT,OAAQ,CACP,MACA,OAED,UAAW,CACV,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,cAAe,CACd,MACA,OAED,iBAAkB,CACjB,MACA,OAED,iBAAkB,CACjB,MACA,OAED,oBAAqB,CACpB,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,gBAAiB,CAChB,MACA,OAED,mBAAoB,CACnB,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,gBAAiB,CAChB,MACA,OAED,mBAAoB,CACnB,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,UAAW,CACV,KACA,MAED,aAAc,CACb,KACA,MAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,iBAAkB,CACjB,MACA,OAED,MAAO,CACN,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,SAAU,CACT,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,iBAAkB,CACjB,MACA,OAED,WAAY,CACX,KACA,MAED,cAAe,CACd,KACA,MAED,UAAW,CACV,IACA,OAED,aAAc,CACb,IACA,OAED,YAAa,CACZ,MACA,OAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,eAAgB,CACf,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,iBAAkB,CACjB,MACA,OAED,oBAAqB,CACpB,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,MAAO,CACN,MACA,OAED,SAAU,CACT,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,SAAU,CACT,KACA,MAED,YAAa,CACZ,KACA,MAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,WAAY,CACX,IACA,KAED,gBAAiB,CAChB,MACA,OAED,mBAAoB,CACnB,MACA,OAED,cAAe,CACd,IACA,KAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,QAAS,CACR,KACA,MAED,WAAY,CACX,KACA,MAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,QAAS,CACR,KACA,MAED,WAAY,CACX,KACA,MAED,OAAQ,CACP,MACA,OAED,UAAW,CACV,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,OAAQ,CACP,MACA,OAED,UAAW,CACV,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,SAAU,CACT,KACA,MAED,YAAa,CACZ,KACA,MAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,cAAe,CACd,MACA,OAED,iBAAkB,CACjB,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,UAAW,CACV,MACA,OAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,aAAc,CACb,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,UAAW,CACV,KACA,MAED,aAAc,CACb,KACA,MAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,mBAAoB,CACnB,MACA,OAED,sBAAuB,CACtB,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,QAAS,CACR,KACA,MAED,WAAY,CACX,KACA,MAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,gBAAiB,CAChB,MACA,OAED,mBAAoB,CACnB,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,mBAAoB,CACnB,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,UAAW,CACV,KACA,MAED,aAAc,CACb,KACA,MAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,iBAAkB,CACjB,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,OAAQ,CACP,KACA,MAED,UAAW,CACV,KACA,MAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,QAAS,CACR,MACA,OAED,iBAAkB,CACjB,MACA,OAED,oBAAqB,CACpB,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,WAAY,CACX,KACA,MAED,cAAe,CACd,KACA,MAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,cAAe,CACd,MACA,OAED,iBAAkB,CACjB,MACA,OAED,WAAY,CACX,MACA,OAED,gBAAiB,CAChB,MACA,OAED,mBAAoB,CACnB,MACA,OAED,cAAe,CACd,MACA,OAED,MAAO,CACN,MACA,OAED,SAAU,CACT,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,MAAO,CACN,MACA,OAED,SAAU,CACT,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,kBAAmB,CAClB,MACA,OAED,qBAAsB,CACrB,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,QAAS,CACR,KACA,MAED,WAAY,CACX,KACA,MAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,SAAU,CACT,KACA,MAED,YAAa,CACZ,KACA,MAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,cAAe,CACd,MACA,OAED,iBAAkB,CACjB,MACA,OAED,QAAS,CACR,KACA,MAED,WAAY,CACX,KACA,MAED,QAAS,CACR,KACA,MAED,WAAY,CACX,KACA,MAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,aAAc,CACb,MACA,OAED,gBAAiB,CAChB,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,iBAAkB,CACjB,MACA,OAED,oBAAqB,CACpB,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,OAAQ,CACP,MACA,OAED,UAAW,CACV,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,kBAAmB,CAClB,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,UAAW,CACV,MACA,OAED,aAAc,CACb,MACA,OAED,aAAc,CACb,KACA,MAED,kBAAmB,CAClB,MACA,OAED,qBAAsB,CACrB,MACA,OAED,gBAAiB,CAChB,KACA,MAED,YAAa,CACZ,MACA,OAED,eAAgB,CACf,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,QAAS,CACR,KACA,MAED,WAAY,CACX,KACA,MAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,OAAQ,CACP,MACA,OAED,UAAW,CACV,MACA,OAED,QAAS,CACR,MACA,OAED,WAAY,CACX,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,OAED,SAAU,CACT,MACA,OAED,YAAa,CACZ,MACA,OAED,WAAY,CACX,MACA,OAED,cAAe,CACd,MACA,QAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAO1O,QAAQC,UAAU4O,MAAK,WAC7B,IAAIjP,EAAI,IAAIa,MAAM,uBAAyBiO,EAAM,KAEjD,MADA9O,EAAEkP,KAAO,mBACHlP,CACP,IAGD,IAAImP,EAAMP,EAAIE,GAAMhR,EAAKqR,EAAI,GAC7B,OAAOJ,EAAoB/O,EAAEmP,EAAI,IAAIF,MAAK,WACzC,OAAOF,EAAoBQ,EAAEzR,EAAI,GAClC,GACD,CACA+Q,EAAoB7Q,KAAO,WAAa,OAAOoR,OAAOpR,KAAK4Q,EAAM,EACjEC,EAAoB/Q,GAAK,MACzBuR,EAAOC,QAAUT,C,mCCt/CjB,IAfoBzB,KAChB,IAAID,EACJ,GAAItJ,O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,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,KACA,MACA,MAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,KACA,MACA,MAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,KACA,MACA,MAED,UAAW,CACV,KACA,MACA,MAED,UAAW,CACV,IACA,MACA,KAED,UAAW,CACV,MACA,MACA,OAED,WAAY,CACX,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,gBAAiB,CAChB,MACA,MACA,OAED,gBAAiB,CAChB,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,cAAe,CACd,KACA,MACA,MAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,KACA,MACA,MAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,cAAe,CACd,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,KACA,MACA,MAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,KACA,MACA,MAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,eAAgB,CACf,KACA,MACA,MAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,KACA,MACA,MAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,WAAY,CACX,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,WAAY,CACX,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,WAAY,CACX,MACA,MACA,OAED,gBAAiB,CAChB,MACA,MACA,OAED,WAAY,CACX,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,eAAgB,CACf,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,gBAAiB,CAChB,MACA,MACA,OAED,UAAW,CACV,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,KACA,MACA,MAED,aAAc,CACb,MACA,MACA,OAED,aAAc,CACb,MACA,MACA,QAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAO1O,QAAQC,UAAU4O,MAAK,WAC7B,IAAIjP,EAAI,IAAIa,MAAM,uBAAyBiO,EAAM,KAEjD,MADA9O,EAAEkP,KAAO,mBACHlP,CACP,IAGD,IAAImP,EAAMP,EAAIE,GAAMhR,EAAKqR,EAAI,GAC7B,OAAO/O,QAAQqD,IAAI0L,EAAItM,MAAM,GAAG+L,IAAIG,EAAoB/O,IAAIiP,MAAK,WAChE,OAAOF,EAAoBQ,EAAEzR,EAAI,GAClC,GACD,CACA+Q,EAAoB7Q,KAAO,WAAa,OA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","sources":["webpack://@patternslib/patternslib/./src/core/events.js","webpack://@patternslib/patternslib/./src/core/store.js","webpack://@patternslib/patternslib/./src/core/logging.js","webpack://@patternslib/patternslib/./src/pat/date-picker/date-picker.js","webpack://@patternslib/patternslib/./src/core/basepattern.js","webpack://@patternslib/patternslib/./src/core/polyfills.js","webpack://@patternslib/patternslib/./node_modules/highlight.js/styles/ lazy ^\\.\\/.*\\.css$ namespace object","webpack://@patternslib/patternslib/./node_modules/@fullcalendar/core/locales/ lazy ^\\.\\/.*\\.js$ namespace object","webpack://@patternslib/patternslib/./src/core/registry.js","webpack://@patternslib/patternslib/./node_modules/highlight.js/lib/languages/ lazy ^\\.\\/.*$ namespace object","webpack://@patternslib/patternslib/./src/core/uuid.js","webpack://@patternslib/patternslib/./src/core/utils.js","webpack://@patternslib/patternslib/./src/pat/close-panel/close-panel.js","webpack://@patternslib/patternslib/./src/core/push_kit.js","webpack://@patternslib/patternslib/./src/pat/ajax/ajax.js","webpack://@patternslib/patternslib/./src/pat/auto-scale/auto-scale.js","webpack://@patternslib/patternslib/./src/core/jquery-ext.js","webpack://@patternslib/patternslib/./src/lib/input-change-events.js","webpack://@patternslib/patternslib/./src/pat/auto-submit/auto-submit.js","webpack://@patternslib/patternslib/./src/pat/auto-suggest/auto-suggest.js","webpack://@patternslib/patternslib/./src/pat/autofocus/autofocus.js","webpack://@patternslib/patternslib/./src/pat/breadcrumbs/breadcrumbs.js","webpack://@patternslib/patternslib/./src/pat/bumper/bumper.js","webpack://@patternslib/patternslib/./src/pat/inject/inject.js","webpack://@patternslib/patternslib/./src/pat/modal/modal.js","webpack://@patternslib/patternslib/./src/pat/calendar/calendar.js","webpack://@patternslib/patternslib/./src/pat/carousel/carousel.js","webpack://@patternslib/patternslib/./src/pat/checklist/checklist.js","webpack://@patternslib/patternslib/./src/pat/clone/clone.js","webpack://@patternslib/patternslib/./src/pat/clone-code/clone-code.js","webpack://@patternslib/patternslib/./src/pat/collapsible/collapsible.js","webpack://@patternslib/patternslib/./src/pat/colour-picker/colour-picker.js","webpack://@patternslib/patternslib/./src/pat/datetime-picker/datetime-picker.js","webpack://@patternslib/patternslib/./src/pat/depends/depends.js","webpack://@patternslib/patternslib/./src/pat/equaliser/equaliser.js","webpack://@patternslib/patternslib/./src/pat/expandable-tree/expandable-tree.js","webpack://@patternslib/patternslib/./src/pat/focus/focus.js","webpack://@patternslib/patternslib/./src/pat/form-state/form-state.js","webpack://@patternslib/patternslib/./src/pat/forward/forward.js","webpack://@patternslib/patternslib/./src/pat/fullscreen/fullscreen-close.js","webpack://@patternslib/patternslib/./src/pat/fullscreen/fullscreen.js","webpack://@patternslib/patternslib/./src/pat/gallery/gallery.js","webpack://@patternslib/patternslib/./src/pat/image-crop/image-crop.js","webpack://@patternslib/patternslib/./src/pat/legend/legend.js","webpack://@patternslib/patternslib/./src/pat/markdown/markdown.js","webpack://@patternslib/patternslib/./src/pat/masonry/masonry.js","webpack://@patternslib/patternslib/./src/pat/menu/menu.js","webpack://@patternslib/patternslib/./src/pat/scroll-marker/scroll-marker.js","webpack://@patternslib/patternslib/./src/pat/navigation/navigation.js","webpack://@patternslib/patternslib/./src/pat/notification/notification.js","webpack://@patternslib/patternslib/./src/pat/push/push.js","webpack://@patternslib/patternslib/./src/pat/scroll-box/scroll-box.js","webpack://@patternslib/patternslib/./src/pat/selectbox/selectbox.js","webpack://@patternslib/patternslib/./src/core/url.js","webpack://@patternslib/patternslib/./src/core/remove.js","webpack://@patternslib/patternslib/./src/pat/slides/slides.js","webpack://@patternslib/patternslib/./src/pat/sortable/sortable.js","webpack://@patternslib/patternslib/./src/pat/stacks/stacks.js","webpack://@patternslib/patternslib/./src/pat/subform/subform.js","webpack://@patternslib/patternslib/./src/pat/switch/switch.js","webpack://@patternslib/patternslib/./src/pat/syntax-highlight/syntax-highlight.js","webpack://@patternslib/patternslib/./src/pat/tabs/tabs.js","webpack://@patternslib/patternslib/./src/pat/toggle/toggle.js","webpack://@patternslib/patternslib/./src/pat/validation/validation.js","webpack://@patternslib/patternslib/./src/pat/zoom/zoom.js","webpack://@patternslib/patternslib/./src/patterns.js","webpack://@patternslib/patternslib/./src/pat/scroll/scroll.js","webpack://@patternslib/patternslib/./src/core/i18n.js","webpack://@patternslib/patternslib/./src/core/mockup-parser.js","webpack://@patternslib/patternslib/./src/core/base.js","webpack://@patternslib/patternslib/./src/core/parser.js","webpack://@patternslib/patternslib/./src/pat/display-time/display-time.js","webpack://@patternslib/patternslib/./src/core/dom.js","webpack://@patternslib/patternslib/./node_modules/moment/locale/ lazy ^\\.\\/.*\\.js$ namespace object","webpack://@patternslib/patternslib/./src/pat/tooltip/tooltip.js"],"sourcesContent":["import utils from \"./utils\";\n\n// Event related methods and event factories\n\n// Event listener registration for easy-to-remove event listeners.\n// once Safari supports the ``signal`` option for addEventListener we can abort\n// event handlers by calling AbortController.abort().\nexport const event_listener_map = new Map();\n\n/**\n * Add an event listener to a DOM element under a unique id.\n * If a event is registered under the same id for the same element, the old handler is removed first.\n *\n * @param {DOM Node} el - The element to register the event for.\n * @param {string} event_type - The event type to listen for.\n * @param {string} id - A unique id under which the event is registered.\n * @param {function} cb - The event handler / callback function.\n * @param {Object} opts - Options for the addEventListener API.\n *\n */\nconst add_event_listener = (el, event_type, id, cb, opts = {}) => {\n    if (!el?.addEventListener) {\n        return; // nothing to do.\n    }\n    remove_event_listener(el, id); // do not register one listener twice.\n\n    // Create event_listener_map entry if not existent.\n    if (!event_listener_map.has(el)) {\n        event_listener_map.set(el, new Map());\n    }\n    let _cb = cb;\n    if (opts?.once === true) {\n        // For `once` events, also remove the entry from the event_listener_map.\n        _cb = (e) => {\n            event_listener_map.get(el)?.delete(id);\n            cb(e);\n        };\n    }\n    // Only `capture` option is necessary for `removeEventListener`.\n    event_listener_map\n        .get(el)\n        .set(id, [event_type, _cb, opts.capture ? opts : undefined]);\n    el.addEventListener(event_type, _cb, opts);\n};\n\n/**\n * Remove an event listener from a DOM element under a unique id.\n *\n * If an element and id are given, the event listeners for the given element matching the id are removed.\n * If an element but no id is given, all event listeners for that element are removed.\n * If an id but no element is given, all event listeners for any element matching the id are removed.\n * If no element and no id are given, all event listeners are removed.\n *\n * The id can be a wildcard string, e.g. `test-*-event`, which would match any\n * event which starts with \"test-\" and ends with \"-event\". The wildcard \"*\" can\n * be anywhere in the string and also be used multiple times. If no wildcard is\n * present the search string is used for an exact match.\n *\n * @param {DOM Node} [el] - The element to register the event for.\n * @param {string} [id] - A unique id under which the event is registered.\n *                        Can be a wildcard string.\n *\n */\nconst remove_event_listener = (el, id) => {\n    const els = el ? [el] : event_listener_map.keys();\n    for (const el of els) {\n        if (!el?.removeEventListener) {\n            return; // nothing to do.\n        }\n        const el_events = event_listener_map.get(el);\n        if (!el_events) {\n            return;\n        }\n        let entries;\n        if (id) {\n            // remove event listener with matching id\n            entries = [...el_events.entries()].filter((entry) =>\n                utils.regexp_from_wildcard(id).test(entry[0])\n            );\n        } else {\n            // remove all event listeners of element\n            entries = el_events.entries();\n        }\n        for (const entry of entries || []) {\n            // Remove event listener\n            el.removeEventListener(entry[1][0], entry[1][1], entry[1][2]);\n            // Delete entry from event_listener_map\n            event_listener_map.get(el).delete(entry[0]);\n            // Delete element from event_listener_map if no more events are registered.\n            if (!event_listener_map.get(el).size) {\n                event_listener_map.delete(el);\n            }\n        }\n    }\n};\n\n/**\n * Await an event to be thrown.\n *\n * Usage:\n *     await events.await_event(button, \"click\");\n *\n * @param {DOM Node} el - The element to listen on.\n * @param {String} event_name - The event name to listen for.\n *\n * @returns {Promise} - Returns a Promise which can be used for ``await`` and which will be resolved when the event is throwm.\n *\n */\nconst await_event = (el, event_name) => {\n    // See: https://stackoverflow.com/a/44746691/1337474\n    return new Promise((resolve) =>\n        el.addEventListener(event_name, resolve, { once: true })\n    );\n};\n\n/**\n * Await pattern init.\n *\n * Usage:\n *     await events.await_pattern_init(PATTERN);\n *\n * @param {Pattern instance} pattern - The pattern instance.\n *\n * @returns {Promise} - Returns a Promise which can be used for ``await`` and which will be resolved when the event is throwm.\n *\n */\nconst await_pattern_init = (pattern) => {\n    // See: https://stackoverflow.com/a/44746691/1337474\n    return new Promise((resolve, reject) => {\n        // Case initialized\n        pattern.one(\"init\", (e) => {\n            if (e.target !== pattern.el) {\n                // Don't handle bubbling init events from child elements. We\n                // want to check on init events coming directly from this\n                // Pattern's element.\n                return;\n            }\n            // Resolve promise and unregister the not-init event handler.\n            remove_event_listener(\n                pattern.el,\n                `basepattern-one--not-init.${pattern.name}.patterns`\n            );\n            resolve();\n        });\n\n        // Case not initialized\n        pattern.one(\"not-init\", (e) => {\n            if (e.target !== pattern.el) {\n                // Don't handle bubbling not-init events from child elements.\n                // We want to check on not-init events coming directly from\n                // this Pattern's element.\n                return;\n            }\n            // Reject promise and unregister the init event handler.\n            remove_event_listener(\n                pattern.el,\n                `basepattern-one--init.${pattern.name}.patterns`\n            );\n            reject();\n        });\n    }).catch(() => {\n        throw new Error(`Pattern \"${pattern.name}\" not initialized.`);\n    });\n};\n\n/**\n * Event factories\n */\n\n/** Generic event factory.\n *\n * A event factory for a bubbling and cancelable generic event.\n *\n * @param {string} name - The event name.\n * @returns {Event} - Returns a blur event.\n */\nconst generic_event = (name) => {\n    return new Event(name, {\n        bubbles: true,\n        cancelable: true,\n    });\n};\n\n\n/** Patternslib specifc event factories\n */\n\nclass UpdateEvent extends CustomEvent {\n    constructor(options) {\n        super(\"pat-update\", {\n            bubbles: true,\n            cancelable: true,\n            detail: options\n        });\n    }\n}\n\nconst update_event = (options) => {\n    return new UpdateEvent(options);\n}\n\n\n/** Web API event factories\n */\n\nconst blur_event = () => {\n    return new Event(\"blur\", {\n        bubbles: false,\n        cancelable: false,\n    });\n};\n\nconst click_event = () => {\n    return new Event(\"click\", {\n        bubbles: true,\n        cancelable: true,\n    });\n};\n\nconst change_event = () => {\n    return new Event(\"change\", {\n        bubbles: true,\n        cancelable: false,\n    });\n};\n\nconst focus_event = () => {\n    return new Event(\"focus\", {\n        bubbles: false,\n        cancelable: false,\n    });\n};\n\nconst input_event = () => {\n    return new Event(\"input\", {\n        bubbles: true,\n        cancelable: false,\n    });\n};\n\nconst mousedown_event = () => {\n    return new Event(\"mousedown\", {\n        bubbles: true,\n        cancelable: true,\n    });\n};\n\nconst mouseup_event = () => {\n    return new Event(\"mouseup\", {\n        bubbles: true,\n        cancelable: true,\n    });\n};\n\nconst scroll_event = () => {\n    return new Event(\"scroll\", {\n        bubbles: true,\n        cancelable: false,\n    });\n};\n\nconst submit_event = ({ submitter } = { submitter: undefined }) => {\n    const event = new Event(\"submit\", {\n        bubbles: true,\n        cancelable: true,\n    });\n    event.submitter = submitter; // undefined or the submitting element\n    return event;\n};\n\nconst dragstart_event = () => {\n    return new Event(\"dragstart\", {\n        bubbles: true,\n        cancelable: true,\n    });\n};\n\nconst dragend_event = () => {\n    return new Event(\"dragend\", {\n        bubbles: true,\n        cancelable: true,\n    });\n};\n\nexport default {\n    add_event_listener: add_event_listener,\n    remove_event_listener: remove_event_listener,\n    await_event: await_event,\n    await_pattern_init: await_pattern_init,\n    generic_event: generic_event,\n    update_event: update_event,\n    blur_event: blur_event,\n    click_event: click_event,\n    change_event: change_event,\n    focus_event: focus_event,\n    input_event: input_event,\n    mousedown_event: mousedown_event,\n    mouseup_event: mouseup_event,\n    scroll_event: scroll_event,\n    submit_event: submit_event,\n    dragstart_event: dragstart_event,\n    dragend_event: dragend_event,\n};\n","/**\n * Patterns store - store pattern state locally in the browser\n *\n * Copyright 2008-2012 Simplon B.V.\n * Copyright 2011 Humberto Sermeño\n * Copyright 2011 Florian Friesdorf\n */\nimport logging from \"./logging\";\n\nconst log = logging.getLogger(\"Patternslib Store\");\n\nfunction Storage(backend, prefix) {\n    this.prefix = prefix;\n    this.backend = backend;\n}\n\nStorage.prototype._key = function Storage_key(name) {\n    return this.prefix + \":\" + name;\n};\n\nStorage.prototype._allKeys = function Storage_allKeys() {\n    var keys = [],\n        prefix = this.prefix + \":\",\n        prefix_length = prefix.length,\n        key,\n        i;\n\n    for (i = 0; i < this.backend.length; i++) {\n        key = this.backend.key(i);\n        if (key.slice(0, prefix_length) === prefix) keys.push(key);\n    }\n    return keys;\n};\n\nStorage.prototype.get = function Storage_get(name) {\n    var key = this._key(name),\n        value = this.backend.getItem(key);\n    if (value !== null) {\n        try {\n            value = JSON.parse(value);\n        } catch {\n            log.warn(`Cannot parse storage value for key ${key}`);\n            return;\n        }\n    }\n    return value;\n};\n\nStorage.prototype.set = function Storage_set(name, value) {\n    var key = this._key(name);\n    return this.backend.setItem(key, JSON.stringify(value));\n};\n\nStorage.prototype.remove = function Storage_remove(name) {\n    var key = this._key(name);\n    return this.backend.removeItem(key);\n};\n\nStorage.prototype.clear = function Storage_clear() {\n    var keys = this._allKeys();\n    for (var i = 0; i < keys.length; i++) this.backend.removeItem(keys[i]);\n};\n\nStorage.prototype.all = function Storage_all() {\n    var keys = this._allKeys(),\n        prefix_length = this.prefix.length + 1,\n        lk,\n        data = {};\n\n    for (var i = 0; i < keys.length; i++) {\n        lk = keys[i].slice(prefix_length);\n        data[lk] = JSON.parse(this.backend.getItem(keys[i]));\n    }\n    return data;\n};\n\nfunction ValueStorage(store, name) {\n    this.store = store;\n    this.name = name;\n}\n\nValueStorage.prototype.get = function ValueStorage_get() {\n    return this.store.get(this.name);\n};\n\nValueStorage.prototype.set = function ValueStorage_get(value) {\n    return this.store.set(this.name, value);\n};\n\nValueStorage.prototype.remove = function ValueStorage_remove() {\n    return this.store.remove(this.name);\n};\n\nvar store = {\n    supported: false,\n\n    local: function (name) {\n        return new Storage(window.localStorage, name);\n    },\n\n    session: function (name) {\n        return new Storage(window.sessionStorage, name);\n    },\n\n    ValueStorage: ValueStorage,\n\n    // Update storage options for a given element.\n    updateOptions: function store_updateOptions(trigger, options) {\n        if (options.store !== \"none\") {\n            if (!trigger.id) {\n                log.warn(\"state persistance requested, but element has no id\");\n                options.store = \"none\";\n            } else if (!store.supported) {\n                log.warn(\n                    \"state persistance requested, but browser does not support webstorage\"\n                );\n                options.store = \"none\";\n            }\n        }\n        return options;\n    },\n};\n\n// Perform the test separately since this may throw a SecurityError as\n// reported in #326\ntry {\n    store.supported = typeof window.sessionStorage !== \"undefined\";\n} catch {\n    // just ignore.\n}\n\nexport default store;\n","/**\n * Patterns logging - minimal logging framework\n *\n * Copyright 2012 Simplon B.V.\n */\n\n// source: https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n        if (typeof this !== \"function\") {\n            // closest thing possible to the ECMAScript 5 internal IsCallable function\n            throw new TypeError(\n                \"Function.prototype.bind - what is trying to be bound is not callable\"\n            );\n        }\n\n        var aArgs = Array.prototype.slice.call(arguments, 1),\n            fToBind = this,\n            fNOP = function () {},\n            fBound = function () {\n                return fToBind.apply(\n                    this instanceof fNOP && oThis ? this : oThis,\n                    aArgs.concat(Array.prototype.slice.call(arguments))\n                );\n            };\n        fNOP.prototype = this.prototype;\n        fBound.prototype = new fNOP();\n\n        return fBound;\n    };\n}\n\nvar root, // root logger instance\n    writer; // writer instance, used to output log entries\n\nvar Level = {\n    DEBUG: 10,\n    INFO: 20,\n    WARN: 30,\n    ERROR: 40,\n    FATAL: 50,\n};\n\nfunction ConsoleWriter() {}\n\nConsoleWriter.prototype = {\n    output: function (log_name, level, messages) {\n        if (log_name) messages.unshift(log_name + \":\");\n        if (level <= Level.DEBUG) console.debug.apply(console, messages);\n        else if (level <= Level.INFO) console.info.apply(console, messages);\n        else if (level <= Level.WARN) console.warn.apply(console, messages);\n        else console.error.apply(console, messages);\n    },\n};\n\nfunction Logger(name, parent) {\n    this._loggers = {};\n    this.name = name || \"\";\n    this._parent = parent || null;\n    if (!parent) {\n        this._enabled = true;\n        this._level = Level.WARN;\n    }\n}\n\nLogger.prototype = {\n    getLogger: function (name) {\n        var path = name.split(\".\"),\n            root = this,\n            route = this.name ? [this.name] : [];\n        while (path.length) {\n            var entry = path.shift();\n            route.push(entry);\n            if (!(entry in root._loggers))\n                root._loggers[entry] = new Logger(route.join(\".\"), root);\n            root = root._loggers[entry];\n        }\n        return root;\n    },\n\n    _getFlag: function (flag) {\n        var context = this;\n        flag = \"_\" + flag;\n        while (context !== null) {\n            if (context[flag] !== undefined) return context[flag];\n            context = context._parent;\n        }\n        return null;\n    },\n\n    setEnabled: function (state) {\n        this._enabled = !!state;\n    },\n\n    isEnabled: function () {\n        this._getFlag(\"enabled\");\n    },\n\n    setLevel: function (level) {\n        if (typeof level === \"number\") this._level = level;\n        else if (typeof level === \"string\") {\n            level = level.toUpperCase();\n            if (level in Level) this._level = Level[level];\n        }\n    },\n\n    getLevel: function () {\n        return this._getFlag(\"level\");\n    },\n\n    log: function (level, messages) {\n        if (\n            !messages.length ||\n            !this._getFlag(\"enabled\") ||\n            level < this._getFlag(\"level\")\n        )\n            return;\n        messages = Array.prototype.slice.call(messages);\n        writer.output(this.name, level, messages);\n    },\n\n    debug: function () {\n        this.log(Level.DEBUG, arguments);\n    },\n\n    info: function () {\n        this.log(Level.INFO, arguments);\n    },\n\n    warn: function () {\n        this.log(Level.WARN, arguments);\n    },\n\n    error: function () {\n        this.log(Level.ERROR, arguments);\n    },\n\n    fatal: function () {\n        this.log(Level.FATAL, arguments);\n    },\n};\n\nfunction getWriter() {\n    return writer;\n}\n\nfunction setWriter(w) {\n    writer = w;\n}\n\nsetWriter(new ConsoleWriter());\n\nroot = new Logger();\n\nvar logconfig = /loglevel(|-[^=]+)=([^&]+)/g,\n    match;\n\nwhile ((match = logconfig.exec(window.location.search)) !== null) {\n    var logger = match[1] === \"\" ? root : root.getLogger(match[1].slice(1));\n    logger.setLevel(match[2].toUpperCase());\n}\n\nvar api = {\n    Level: Level,\n    getLogger: root.getLogger.bind(root),\n    setEnabled: root.setEnabled.bind(root),\n    isEnabled: root.isEnabled.bind(root),\n    setLevel: root.setLevel.bind(root),\n    getLevel: root.getLevel.bind(root),\n    debug: root.debug.bind(root),\n    info: root.info.bind(root),\n    warn: root.warn.bind(root),\n    error: root.error.bind(root),\n    fatal: root.fatal.bind(root),\n    getWriter: getWriter,\n    setWriter: setWriter,\n};\n\nexport default api;\n","/* pat-date-picker  - Polyfill for input type=date */\nimport $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport store from \"../../core/store\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"date-picker\");\n\nexport const parser = new Parser(\"date-picker\");\nparser.addArgument(\"behavior\", \"styled\", [\"native\", \"styled\"]);\nparser.addArgument(\"week-numbers\", [], [\"show\", \"hide\"]);\nparser.addArgument(\"i18n\"); // URL pointing to JSON resource with i18n values\nparser.addArgument(\"first-day\", 0);\nparser.addArgument(\"after\");\nparser.addArgument(\"offset-days\", 0);\n\nparser.add_argument(\"output-format\", null);\nparser.add_argument(\"locale\", null);\n\nparser.addAlias(\"behaviour\", \"behavior\");\n\n/* JSON format for i18n\n * { \"previousMonth\": \"Previous Month\",\n *   \"nextMonth\"    : \"Next Month\",\n *   \"months\"       : [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\n *   \"weekdays\"     : [\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],\n *   \"weekdaysShort\": [\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"]\n * } */\n\nexport const storage = store.session(\"pat-date-picker\");\n\n\nexport default Base.extend({\n    name: \"date-picker\",\n    trigger: \".pat-date-picker\",\n    parser: parser,\n    format: \"YYYY-MM-DD\",\n\n    async init() {\n        const el = this.el;\n        const disabled = this.el.disabled;\n\n        //TODO: make parser with options extend missing options.\n        //this.options = parser.parse(el, opts);\n        this.options = $.extend(parser.parse(el), this.options);\n\n        if (!disabled && this.options.after) {\n            // Set the date depending on another date which must be ``offset-days``\n            // BEFORE this date. Only set it, if the other date is AFTER this\n            // date.\n            const befores = document.querySelectorAll(this.options.after);\n            for (const b_el of befores) {\n                b_el.addEventListener(\"change\", (e) => {\n                    let b_date = e.target.value; // the \"before-date\"\n                    b_date = b_date ? new Date(b_date) : null;\n                    if (!b_date) {\n                        return;\n                    }\n                    let a_date = this.el.value; // the \"after-date\"\n                    a_date = a_date ? new Date(a_date) : null;\n                    if (!a_date || a_date < b_date) {\n                        const offset = this.options.offsetDays || 0;\n                        b_date.setDate(b_date.getDate() + offset);\n                        this.el.value = b_date.toISOString().substring(0, 10);\n                        this.dispatch_change_event();\n                    }\n                });\n            }\n        }\n\n        let display_el;\n        if (this.options.behavior === \"styled\") {\n            dom.hide(el); // hide input, but keep active (e.g. for validation)\n\n            display_el = document.createElement(\"time\");\n            display_el.setAttribute(\"class\", \"output-field\");\n            display_el.setAttribute(\"datetime\", el.value);\n            if (disabled) {\n                display_el.classList.add(\"disabled\");\n            }\n            el.insertAdjacentElement(\"beforebegin\", display_el);\n\n            // Disable click on label, as this invokes a click on the invisible\n            // input field which opens the calendar in Firefox and masks a\n            // click on display_el on Chrome.\n            const label = display_el.closest(\"label\");\n            if (label) {\n                events.add_event_listener(\n                    label,\n                    \"click\",\n                    \"pat-date-picker--label\",\n                    (e) => {\n                        e.preventDefault();\n                    }\n                );\n            }\n\n            let pat_display_time;\n            if (this.options.outputFormat) {\n                const PatDisplayTime = (await import(\"../display-time/display-time\")).default; // prettier-ignore\n                const display_time_config = { format: this.format };\n                if (this.options.outputFormat) {\n                    display_time_config[\"output-format\"] = this.options.outputFormat;\n                }\n                if (this.options.locale) {\n                    display_time_config.locale = this.options.locale;\n                }\n                pat_display_time = new PatDisplayTime(display_el, display_time_config);\n            } else if (this.el.value) {\n                display_el.textContent = el.value;\n            }\n\n            // Add the additional elements \"clear button\" and placeholder to\n            // the `<time>` element.\n            const _add_additional = () => {\n                this.add_clear_button(display_el);\n                if (!this.el.value && this.el.placeholder) {\n                    display_el.innerHTML = `<span class=\"placeholder\">${this.el.placeholder}</span>`;\n                }\n            };\n            if (pat_display_time) {\n                // Add the additional elements after display time has\n                // eventually cleared the contents or done any other changes.\n                $(display_el).on(\"init.display-time.patterns\", () => {\n                    _add_additional();\n                });\n            } else {\n                // If no `pat-display-time` was used, add immediately.\n                _add_additional();\n            }\n\n            this.el.addEventListener(\"change\", () => {\n                display_el.setAttribute(\"datetime\", this.el.value);\n                if (pat_display_time && this.el.value) {\n                    pat_display_time.format();\n                } else {\n                    //} else if (this.el.value) {\n                    display_el.textContent = this.el.value;\n                }\n                _add_additional();\n            });\n\n            if (disabled) {\n                // nothing else to do here...\n                return;\n            }\n        } else if (disabled) {\n            return;\n        } else if (utils.checkInputSupport(\"date\", \"invalid date\")) {\n            // behavior native with native support.\n            return;\n        } else if (el.getAttribute(\"type\") === \"date\") {\n            // behavior native but no native support.\n            // Fallback JS date picker with a text input field.\n            el.setAttribute(\"type\", \"text\");\n        }\n\n        if (window.__patternslib_import_styles) {\n            import(\"./_date-picker.scss\");\n        }\n        const Pikaday = (await import(\"pikaday\")).default;\n\n        const config = {\n            field: el,\n            trigger: display_el || el,\n            format: this.format,\n            firstDay: this.options.firstDay,\n            showWeekNumber: this.options.weekNumbers === \"show\",\n            onSelect: () => this.dispatch_change_event(),\n            onClose: () => {\n                if (this.options.behavior === \"styled\" && !this.el.value) {\n                    // blur the input field so that pat-validate can kick in when\n                    // nothing was selected.\n                    el.dispatchEvent(events.blur_event());\n                }\n            },\n        };\n\n        if (el.getAttribute(\"min\")) {\n            config.minDate = new Date(el.getAttribute(\"min\"));\n        }\n        if (el.getAttribute(\"max\")) {\n            config.maxDate = new Date(el.getAttribute(\"max\"));\n        }\n\n        if (this.options.i18n) {\n            let i18n = storage.get(this.options.i18n);\n            if (!i18n) {\n                try {\n                    const response = await fetch(this.options.i18n);\n                    i18n = await response.json();\n                    storage.set(this.options.i18n, i18n);\n                } catch {\n                    log.error(`date-picker could not load i18n for ${this.options.i18n}`);\n                }\n            }\n            if (i18n) {\n                config.i18n = i18n;\n            }\n        }\n        this.pikaday = new Pikaday(config);\n    },\n\n    add_clear_button(el_append_to) {\n        if (!this.el.disabled && !this.el.required && this.el.value) {\n            // Add clear button\n            const clear_button = document.createElement(\"span\");\n            clear_button.setAttribute(\"class\", \"cancel-button\");\n            clear_button.addEventListener(\"click\", (e) => {\n                e.stopPropagation();\n                this.el.value = null;\n                this.dispatch_change_event();\n            });\n            el_append_to.appendChild(clear_button);\n        }\n    },\n\n    dispatch_change_event() {\n        const event = new Event(\"change\", {\n            bubbles: true,\n            cancelable: true,\n        });\n        // Set ``firedBy` to prevent pikaday to call it's own handler and land\n        // in an infinite loop.\n        event.firedBy = this.pikaday;\n        this.el.dispatchEvent(event);\n\n        // Also trigger input-change\n        $(this.el).trigger(\"input-change\");\n        $(this.el.form).trigger(\"input-change\");\n    },\n});\n","/**\n * A Base pattern for creating scoped patterns.\n *\n * Each instance of a pattern has its own local scope.\n * A new instance is created for each DOM element on which a pattern applies.\n *\n * For usage, see basepattern.md\n */\nimport events from \"./events\";\nimport logging from \"./logging\";\nimport create_uuid from \"./uuid\";\n\nconst log = logging.getLogger(\"basepattern\");\n\nclass BasePattern {\n    static name; // name of pattern used in Registry.\n    static trigger; // A CSS selector to match elements that should trigger the pattern instantiation.\n    static parser; // Options parser.\n\n    // Parser options\n    parser_group_options = true;\n    parser_multiple = undefined;\n    parser_inherit = true;\n\n    constructor(el, options = {}) {\n        // Make static variables available on instance.\n        this.name = this.constructor.name;\n        this.trigger = this.constructor.trigger;\n        this.parser = this.constructor.parser;\n\n        if (!el) {\n            log.warn(`No element given to pattern ${this.name}.`);\n            return;\n        }\n        if (el.jquery) {\n            el = el[0];\n        }\n        this.el = el;\n        this.uuid = create_uuid();\n\n        // Notify pre-init\n        this.el.dispatchEvent(\n            new Event(`pre-init.${this.name}.patterns`, {\n                bubbles: true,\n                cancelable: true,\n            })\n        );\n\n        // Initialize asynchronously.\n        //\n        // 1) We need to call the concrete implementation of ``init``, but the\n        //    inheritance chain is not yet set up and ``init`` not available.\n        //\n        // 2) We want to wait for the init() to successfuly finish and fire an\n        //    event then.\n        //    But the constructer cannot not return a Promise, thus not be\n        //    asynchronous but only return itself.\n        //\n        // Both limitations are gone in next tick.\n        //\n        window.setTimeout(async () => {\n            if (typeof this.el[`pattern-${this.name}`] !== \"undefined\") {\n                // Do not reinstantiate\n                log.debug(`Not reinstatiating the pattern ${this.name}.`, this.el);\n\n                // Notify that not instantiated\n                this.el.dispatchEvent(\n                    new Event(`not-init.${this.name}.patterns`, {\n                        bubbles: true,\n                        cancelable: false,\n                    })\n                );\n                return;\n            }\n\n            // Create the options object by parsing the element and using the\n            // optional options as default.\n            this.options =\n                this.parser?.parse(\n                    this.el,\n                    options,\n                    this.parser_multiple,\n                    this.parser_inherit,\n                    this.parser_group_options\n                ) ?? options;\n\n            // Store pattern instance on element\n            this.el[`pattern-${this.name}`] = this;\n\n            // Initialize the pattern\n            await this.init();\n\n            // Notify that now ready\n            this.el.dispatchEvent(\n                new Event(`init.${this.name}.patterns`, {\n                    bubbles: true,\n                    cancelable: true,\n                })\n            );\n        }, 0);\n    }\n\n    async init() {\n        // Extend this method in your pattern.\n    }\n\n    emit_update(action = undefined, options = {}) {\n        options = {\n            pattern: this.name,\n            dom: this.el,\n            action: action,\n            ...options,\n        }\n        this.el.dispatchEvent(events.update_event(options));\n    }\n\n    /**\n     * Listen to an event on the element only once.\n     *\n     * @param {string} event_name - Name of the event to listen to.\n     * @param {function} callback - Callback to call when the event is thrown.\n     */\n    one(event_name, event_callback) {\n        events.add_event_listener(\n            this.el,\n            `${event_name}.${this.name}.patterns`,\n            `basepattern-one--${event_name}.${this.name}.patterns`,\n            event_callback,\n            {\n                once: true,\n            }\n        );\n    }\n\n    /**\n     * Destroy/remove/unload the pattern from the element.\n     */\n    destroy() {\n        delete this.el[`pattern-${this.name}`];\n    }\n}\n\nexport default BasePattern;\nexport { BasePattern };\n","// Polyfills for modern browsers\n\n// SubmitEvent.submitter polyfill for Safari < 15.4 and jsDOM\n// Original code: https://stackoverflow.com/a/61110260/1337474\n// Also see: https://caniuse.com/?search=submitter\n// NOTE: the `submitter` property is now widely available except for ancient browsers and jsDOM.\n!(function () {\n    if (window.SubmitEvent && \"submitter\" in window.SubmitEvent.prototype) {\n        // `submitter` attribute is already supported.\n        return;\n    }\n\n    let last_btn = null;\n    const submitable_buttons = `button, input[type=\"button\"], input[type=\"submit\"], input[type=\"image\"]`;\n    document.addEventListener(\n        \"click\",\n        function (e) {\n            if (!e.target.closest) return;\n            last_btn = e.target.closest(submitable_buttons);\n        },\n        true\n    );\n    document.addEventListener(\n        \"submit\",\n        function (e) {\n            if (\"submitter\" in e) return;\n            const canditates = [document.activeElement, last_btn];\n            last_btn = null;\n            for (const candidate of canditates) {\n                if (!candidate) continue;\n                if (!candidate.form) continue;\n                if (!candidate.matches(submitable_buttons)) continue;\n                e.submitter = candidate;\n                return;\n            }\n            e.submitter = e.target.querySelector(submitable_buttons);\n        },\n        true\n    );\n})();\n\n// Navigation polyfill for Firefox and Safari, as of 2024-01-04\n// NOTE: this is a very basic polyfill, it only supports firing a `navigate`\n// event on location change and even that without interception support, etc.\n!(function () {\n    if (window.navigation == undefined) {\n\n        class NavigateEvent extends CustomEvent {\n            constructor() {\n                super(\"navigate\");\n                this.destination = { url: undefined };\n            }\n        }\n\n        // Create a navigation object on the window\n        // We create a DOM element for the navigation object so that we can\n        // attach events on it.\n        window.navigation = document.createElement(\"div\");\n\n        const create_event = (args) => {\n            const event = new NavigateEvent();\n            event.destination.url = args[2];\n            return event;\n        };\n\n        // Patch pushState to trigger an `navigate` event on the navigation\n        // object when the URL changes.\n        const pushState = window.history.pushState;\n        window.history.pushState = function () {\n            pushState.apply(window.history, arguments);\n            window.navigation.dispatchEvent(create_event(arguments));\n        };\n\n        // Same with replaceState\n        const replaceState = window.history.replaceState;\n        window.history.replaceState = function () {\n            replaceState.apply(window.history, arguments);\n            window.navigation.dispatchEvent(create_event(arguments));\n        };\n    }\n})();\n","var map = {\n\t\"./a11y-dark.css\": [\n\t\t67916,\n\t\t67916\n\t],\n\t\"./a11y-light.css\": [\n\t\t62746,\n\t\t62746\n\t],\n\t\"./agate.css\": [\n\t\t47529,\n\t\t47529\n\t],\n\t\"./an-old-hope.css\": [\n\t\t74849,\n\t\t74849\n\t],\n\t\"./androidstudio.css\": [\n\t\t55422,\n\t\t55422\n\t],\n\t\"./arduino-light.css\": [\n\t\t44566,\n\t\t44566\n\t],\n\t\"./arta.css\": [\n\t\t79677,\n\t\t79677\n\t],\n\t\"./ascetic.css\": [\n\t\t32285,\n\t\t32285\n\t],\n\t\"./atelier-cave-dark.css\": [\n\t\t7082,\n\t\t7082\n\t],\n\t\"./atelier-cave-light.css\": [\n\t\t84376,\n\t\t84376\n\t],\n\t\"./atelier-dune-dark.css\": [\n\t\t14325,\n\t\t14325\n\t],\n\t\"./atelier-dune-light.css\": [\n\t\t35869,\n\t\t35869\n\t],\n\t\"./atelier-estuary-dark.css\": [\n\t\t41230,\n\t\t41230\n\t],\n\t\"./atelier-estuary-light.css\": [\n\t\t48580,\n\t\t48580\n\t],\n\t\"./atelier-forest-dark.css\": [\n\t\t89650,\n\t\t89650\n\t],\n\t\"./atelier-forest-light.css\": [\n\t\t75792,\n\t\t75792\n\t],\n\t\"./atelier-heath-dark.css\": [\n\t\t75699,\n\t\t75699\n\t],\n\t\"./atelier-heath-light.css\": [\n\t\t51075,\n\t\t51075\n\t],\n\t\"./atelier-lakeside-dark.css\": [\n\t\t81943,\n\t\t81943\n\t],\n\t\"./atelier-lakeside-light.css\": [\n\t\t38271,\n\t\t38271\n\t],\n\t\"./atelier-plateau-dark.css\": [\n\t\t7739,\n\t\t7739\n\t],\n\t\"./atelier-plateau-light.css\": [\n\t\t7995,\n\t\t7995\n\t],\n\t\"./atelier-savanna-dark.css\": [\n\t\t93093,\n\t\t93093\n\t],\n\t\"./atelier-savanna-light.css\": [\n\t\t93773,\n\t\t93773\n\t],\n\t\"./atelier-seaside-dark.css\": [\n\t\t1697,\n\t\t1697\n\t],\n\t\"./atelier-seaside-light.css\": [\n\t\t60209,\n\t\t60209\n\t],\n\t\"./atelier-sulphurpool-dark.css\": [\n\t\t47016,\n\t\t47016\n\t],\n\t\"./atelier-sulphurpool-light.css\": [\n\t\t39998,\n\t\t39998\n\t],\n\t\"./atom-one-dark-reasonable.css\": [\n\t\t54095,\n\t\t54095\n\t],\n\t\"./atom-one-dark.css\": [\n\t\t48204,\n\t\t48204\n\t],\n\t\"./atom-one-light.css\": [\n\t\t68986,\n\t\t68986\n\t],\n\t\"./brown-paper.css\": [\n\t\t97352,\n\t\t97352\n\t],\n\t\"./codepen-embed.css\": [\n\t\t5945,\n\t\t5945\n\t],\n\t\"./color-brewer.css\": [\n\t\t56962,\n\t\t56962\n\t],\n\t\"./darcula.css\": [\n\t\t74229,\n\t\t74229\n\t],\n\t\"./dark.css\": [\n\t\t15889,\n\t\t15889\n\t],\n\t\"./default.css\": [\n\t\t6502,\n\t\t6502\n\t],\n\t\"./docco.css\": [\n\t\t73185,\n\t\t73185\n\t],\n\t\"./dracula.css\": [\n\t\t88831,\n\t\t88831\n\t],\n\t\"./far.css\": [\n\t\t48686,\n\t\t48686\n\t],\n\t\"./foundation.css\": [\n\t\t22846,\n\t\t22846\n\t],\n\t\"./github-gist.css\": [\n\t\t5622,\n\t\t5622\n\t],\n\t\"./github.css\": [\n\t\t57868,\n\t\t57868\n\t],\n\t\"./gml.css\": [\n\t\t29113,\n\t\t29113\n\t],\n\t\"./googlecode.css\": [\n\t\t80591,\n\t\t80591\n\t],\n\t\"./gradient-dark.css\": [\n\t\t88788,\n\t\t88788\n\t],\n\t\"./gradient-light.css\": [\n\t\t93970,\n\t\t93970\n\t],\n\t\"./grayscale.css\": [\n\t\t84096,\n\t\t84096\n\t],\n\t\"./gruvbox-dark.css\": [\n\t\t53479,\n\t\t53479\n\t],\n\t\"./gruvbox-light.css\": [\n\t\t64399,\n\t\t64399\n\t],\n\t\"./hopscotch.css\": [\n\t\t92246,\n\t\t92246\n\t],\n\t\"./hybrid.css\": [\n\t\t65023,\n\t\t65023\n\t],\n\t\"./idea.css\": [\n\t\t99928,\n\t\t99928\n\t],\n\t\"./ir-black.css\": [\n\t\t53854,\n\t\t53854\n\t],\n\t\"./isbl-editor-dark.css\": [\n\t\t83696,\n\t\t83696\n\t],\n\t\"./isbl-editor-light.css\": [\n\t\t64310,\n\t\t64310\n\t],\n\t\"./kimbie.dark.css\": [\n\t\t83770,\n\t\t83770\n\t],\n\t\"./kimbie.light.css\": [\n\t\t10088,\n\t\t10088\n\t],\n\t\"./lightfair.css\": [\n\t\t51907,\n\t\t51907\n\t],\n\t\"./lioshi.css\": [\n\t\t91807,\n\t\t91807\n\t],\n\t\"./magula.css\": [\n\t\t33162,\n\t\t33162\n\t],\n\t\"./mono-blue.css\": [\n\t\t79859,\n\t\t79859\n\t],\n\t\"./monokai-sublime.css\": [\n\t\t42333,\n\t\t42333\n\t],\n\t\"./monokai.css\": [\n\t\t78471,\n\t\t78471\n\t],\n\t\"./night-owl.css\": [\n\t\t23718,\n\t\t23718\n\t],\n\t\"./nnfx-dark.css\": [\n\t\t27198,\n\t\t27198\n\t],\n\t\"./nnfx.css\": [\n\t\t40735,\n\t\t40735\n\t],\n\t\"./nord.css\": [\n\t\t80110,\n\t\t80110\n\t],\n\t\"./obsidian.css\": [\n\t\t64590,\n\t\t64590\n\t],\n\t\"./ocean.css\": [\n\t\t58359,\n\t\t58359\n\t],\n\t\"./paraiso-dark.css\": [\n\t\t45015,\n\t\t45015\n\t],\n\t\"./paraiso-light.css\": [\n\t\t44543,\n\t\t44543\n\t],\n\t\"./pojoaque.css\": [\n\t\t18175,\n\t\t18175\n\t],\n\t\"./purebasic.css\": [\n\t\t58973,\n\t\t58973\n\t],\n\t\"./qtcreator_dark.css\": [\n\t\t15141,\n\t\t15141\n\t],\n\t\"./qtcreator_light.css\": [\n\t\t19213,\n\t\t19213\n\t],\n\t\"./railscasts.css\": [\n\t\t83444,\n\t\t83444\n\t],\n\t\"./rainbow.css\": [\n\t\t89067,\n\t\t89067\n\t],\n\t\"./routeros.css\": [\n\t\t31384,\n\t\t31384\n\t],\n\t\"./school-book.css\": [\n\t\t21651,\n\t\t21651\n\t],\n\t\"./shades-of-purple.css\": [\n\t\t15198,\n\t\t15198\n\t],\n\t\"./solarized-dark.css\": [\n\t\t11483,\n\t\t11483\n\t],\n\t\"./solarized-light.css\": [\n\t\t24923,\n\t\t24923\n\t],\n\t\"./srcery.css\": [\n\t\t49741,\n\t\t49741\n\t],\n\t\"./stackoverflow-dark.css\": [\n\t\t72822,\n\t\t72822\n\t],\n\t\"./stackoverflow-light.css\": [\n\t\t27196,\n\t\t27196\n\t],\n\t\"./sunburst.css\": [\n\t\t76493,\n\t\t76493\n\t],\n\t\"./tomorrow-night-blue.css\": [\n\t\t25176,\n\t\t25176\n\t],\n\t\"./tomorrow-night-bright.css\": [\n\t\t16552,\n\t\t16552\n\t],\n\t\"./tomorrow-night-eighties.css\": [\n\t\t30610,\n\t\t30610\n\t],\n\t\"./tomorrow-night.css\": [\n\t\t72205,\n\t\t72205\n\t],\n\t\"./tomorrow.css\": [\n\t\t34516,\n\t\t34516\n\t],\n\t\"./vs.css\": [\n\t\t95696,\n\t\t95696\n\t],\n\t\"./vs2015.css\": [\n\t\t71264,\n\t\t71264\n\t],\n\t\"./xcode.css\": [\n\t\t11074,\n\t\t11074\n\t],\n\t\"./xt256.css\": [\n\t\t65886,\n\t\t65886\n\t],\n\t\"./zenburn.css\": [\n\t\t78069,\n\t\t78069\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 21132;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./af.global.js\": [\n\t\t71590,\n\t\t7,\n\t\t71590\n\t],\n\t\"./af.js\": [\n\t\t22495,\n\t\t9,\n\t\t22495\n\t],\n\t\"./ar-dz.global.js\": [\n\t\t10997,\n\t\t7,\n\t\t10997\n\t],\n\t\"./ar-dz.js\": [\n\t\t2526,\n\t\t9,\n\t\t2526\n\t],\n\t\"./ar-kw.global.js\": [\n\t\t39749,\n\t\t7,\n\t\t39749\n\t],\n\t\"./ar-kw.js\": [\n\t\t66350,\n\t\t9,\n\t\t66350\n\t],\n\t\"./ar-ly.global.js\": [\n\t\t87594,\n\t\t7,\n\t\t87594\n\t],\n\t\"./ar-ly.js\": [\n\t\t45587,\n\t\t9,\n\t\t45587\n\t],\n\t\"./ar-ma.global.js\": [\n\t\t30817,\n\t\t7,\n\t\t30817\n\t],\n\t\"./ar-ma.js\": [\n\t\t83674,\n\t\t9,\n\t\t83674\n\t],\n\t\"./ar-sa.global.js\": [\n\t\t64427,\n\t\t7,\n\t\t64427\n\t],\n\t\"./ar-sa.js\": [\n\t\t56784,\n\t\t9,\n\t\t56784\n\t],\n\t\"./ar-tn.global.js\": [\n\t\t80297,\n\t\t7,\n\t\t80297\n\t],\n\t\"./ar-tn.js\": [\n\t\t22194,\n\t\t9,\n\t\t22194\n\t],\n\t\"./ar.global.js\": [\n\t\t1234,\n\t\t7,\n\t\t1234\n\t],\n\t\"./ar.js\": [\n\t\t55179,\n\t\t9,\n\t\t55179\n\t],\n\t\"./az.global.js\": [\n\t\t19802,\n\t\t7,\n\t\t19802\n\t],\n\t\"./az.js\": [\n\t\t78627,\n\t\t9,\n\t\t78627\n\t],\n\t\"./bg.global.js\": [\n\t\t66602,\n\t\t7,\n\t\t66602\n\t],\n\t\"./bg.js\": [\n\t\t21427,\n\t\t9,\n\t\t21427\n\t],\n\t\"./bn.global.js\": [\n\t\t80143,\n\t\t7,\n\t\t80143\n\t],\n\t\"./bn.js\": [\n\t\t16532,\n\t\t9,\n\t\t16532\n\t],\n\t\"./bs.global.js\": [\n\t\t89918,\n\t\t7,\n\t\t89918\n\t],\n\t\"./bs.js\": [\n\t\t33575,\n\t\t9,\n\t\t33575\n\t],\n\t\"./ca.global.js\": [\n\t\t12555,\n\t\t7,\n\t\t12555\n\t],\n\t\"./ca.js\": [\n\t\t39088,\n\t\t9,\n\t\t39088\n\t],\n\t\"./cs.global.js\": [\n\t\t32689,\n\t\t7,\n\t\t32689\n\t],\n\t\"./cs.js\": [\n\t\t73578,\n\t\t9,\n\t\t73578\n\t],\n\t\"./cy.global.js\": [\n\t\t77363,\n\t\t7,\n\t\t77363\n\t],\n\t\"./cy.js\": [\n\t\t72456,\n\t\t9,\n\t\t72456\n\t],\n\t\"./da.global.js\": [\n\t\t95018,\n\t\t7,\n\t\t95018\n\t],\n\t\"./da.js\": [\n\t\t24019,\n\t\t9,\n\t\t24019\n\t],\n\t\"./de-at.global.js\": [\n\t\t51520,\n\t\t7,\n\t\t51520\n\t],\n\t\"./de-at.js\": [\n\t\t36629,\n\t\t9,\n\t\t36629\n\t],\n\t\"./de.global.js\": [\n\t\t11790,\n\t\t7,\n\t\t11790\n\t],\n\t\"./de.js\": [\n\t\t5431,\n\t\t9,\n\t\t5431\n\t],\n\t\"./el.global.js\": [\n\t\t94160,\n\t\t7,\n\t\t94160\n\t],\n\t\"./el.js\": [\n\t\t27781,\n\t\t9,\n\t\t27781\n\t],\n\t\"./en-au.global.js\": [\n\t\t57649,\n\t\t7,\n\t\t57649\n\t],\n\t\"./en-au.js\": [\n\t\t8874,\n\t\t9,\n\t\t8874\n\t],\n\t\"./en-gb.global.js\": [\n\t\t32288,\n\t\t7,\n\t\t32288\n\t],\n\t\"./en-gb.js\": [\n\t\t44853,\n\t\t9,\n\t\t44853\n\t],\n\t\"./en-nz.global.js\": [\n\t\t57575,\n\t\t7,\n\t\t57575\n\t],\n\t\"./en-nz.js\": [\n\t\t30140,\n\t\t9,\n\t\t30140\n\t],\n\t\"./eo.global.js\": [\n\t\t47975,\n\t\t7,\n\t\t47975\n\t],\n\t\"./eo.js\": [\n\t\t63356,\n\t\t9,\n\t\t63356\n\t],\n\t\"./es-us.global.js\": [\n\t\t16640,\n\t\t7,\n\t\t16640\n\t],\n\t\"./es-us.js\": [\n\t\t39637,\n\t\t9,\n\t\t39637\n\t],\n\t\"./es.global.js\": [\n\t\t27251,\n\t\t7,\n\t\t27251\n\t],\n\t\"./es.js\": [\n\t\t51368,\n\t\t9,\n\t\t51368\n\t],\n\t\"./et.global.js\": [\n\t\t64312,\n\t\t7,\n\t\t64312\n\t],\n\t\"./et.js\": [\n\t\t31581,\n\t\t9,\n\t\t31581\n\t],\n\t\"./eu.global.js\": [\n\t\t78517,\n\t\t7,\n\t\t78517\n\t],\n\t\"./eu.js\": [\n\t\t98366,\n\t\t9,\n\t\t98366\n\t],\n\t\"./fa.global.js\": [\n\t\t3800,\n\t\t7,\n\t\t3800\n\t],\n\t\"./fa.js\": [\n\t\t78333,\n\t\t9,\n\t\t714\n\t],\n\t\"./fi.global.js\": [\n\t\t8096,\n\t\t7,\n\t\t8096\n\t],\n\t\"./fi.js\": [\n\t\t44053,\n\t\t9,\n\t\t44053\n\t],\n\t\"./fr-ca.global.js\": [\n\t\t25536,\n\t\t7,\n\t\t25536\n\t],\n\t\"./fr-ca.js\": [\n\t\t21,\n\t\t9,\n\t\t21\n\t],\n\t\"./fr-ch.global.js\": [\n\t\t35445,\n\t\t7,\n\t\t35445\n\t],\n\t\"./fr-ch.js\": [\n\t\t1086,\n\t\t9,\n\t\t1086\n\t],\n\t\"./fr.global.js\": [\n\t\t15007,\n\t\t7,\n\t\t15007\n\t],\n\t\"./fr.js\": [\n\t\t26500,\n\t\t9,\n\t\t26500\n\t],\n\t\"./gl.global.js\": [\n\t\t46558,\n\t\t7,\n\t\t46558\n\t],\n\t\"./gl.js\": [\n\t\t87271,\n\t\t9,\n\t\t87271\n\t],\n\t\"./he.global.js\": [\n\t\t22890,\n\t\t7,\n\t\t22890\n\t],\n\t\"./he.js\": [\n\t\t19795,\n\t\t9,\n\t\t19795\n\t],\n\t\"./hi.global.js\": [\n\t\t3110,\n\t\t7,\n\t\t3110\n\t],\n\t\"./hi.js\": [\n\t\t90719,\n\t\t9,\n\t\t90719\n\t],\n\t\"./hr.global.js\": [\n\t\t94273,\n\t\t7,\n\t\t94273\n\t],\n\t\"./hr.js\": [\n\t\t85690,\n\t\t9,\n\t\t85690\n\t],\n\t\"./hu.global.js\": [\n\t\t57050,\n\t\t7,\n\t\t57050\n\t],\n\t\"./hu.js\": [\n\t\t89379,\n\t\t9,\n\t\t89379\n\t],\n\t\"./hy-am.global.js\": [\n\t\t50845,\n\t\t7,\n\t\t50845\n\t],\n\t\"./hy-am.js\": [\n\t\t27030,\n\t\t9,\n\t\t27030\n\t],\n\t\"./id.global.js\": [\n\t\t87060,\n\t\t7,\n\t\t87060\n\t],\n\t\"./id.js\": [\n\t\t70409,\n\t\t9,\n\t\t70409\n\t],\n\t\"./is.global.js\": [\n\t\t97335,\n\t\t7,\n\t\t97335\n\t],\n\t\"./is.js\": [\n\t\t49196,\n\t\t9,\n\t\t49196\n\t],\n\t\"./it.global.js\": [\n\t\t58340,\n\t\t7,\n\t\t58340\n\t],\n\t\"./it.js\": [\n\t\t84729,\n\t\t9,\n\t\t84729\n\t],\n\t\"./ja.global.js\": [\n\t\t6972,\n\t\t7,\n\t\t6972\n\t],\n\t\"./ja.js\": [\n\t\t93793,\n\t\t9,\n\t\t93793\n\t],\n\t\"./ka.global.js\": [\n\t\t58787,\n\t\t7,\n\t\t58787\n\t],\n\t\"./ka.js\": [\n\t\t98488,\n\t\t9,\n\t\t98488\n\t],\n\t\"./kk.global.js\": [\n\t\t96577,\n\t\t7,\n\t\t96577\n\t],\n\t\"./kk.js\": [\n\t\t93722,\n\t\t9,\n\t\t93722\n\t],\n\t\"./km.global.js\": [\n\t\t93255,\n\t\t7,\n\t\t93255\n\t],\n\t\"./km.js\": [\n\t\t73244,\n\t\t9,\n\t\t73244\n\t],\n\t\"./ko.global.js\": [\n\t\t42477,\n\t\t7,\n\t\t42477\n\t],\n\t\"./ko.js\": [\n\t\t49478,\n\t\t9,\n\t\t49478\n\t],\n\t\"./ku.global.js\": [\n\t\t85135,\n\t\t7,\n\t\t85135\n\t],\n\t\"./ku.js\": [\n\t\t3700,\n\t\t9,\n\t\t3700\n\t],\n\t\"./lb.global.js\": [\n\t\t18485,\n\t\t7,\n\t\t18485\n\t],\n\t\"./lb.js\": [\n\t\t38654,\n\t\t9,\n\t\t38654\n\t],\n\t\"./lt.global.js\": [\n\t\t98275,\n\t\t7,\n\t\t98275\n\t],\n\t\"./lt.js\": [\n\t\t28888,\n\t\t9,\n\t\t28888\n\t],\n\t\"./lv.global.js\": [\n\t\t82361,\n\t\t7,\n\t\t82361\n\t],\n\t\"./lv.js\": [\n\t\t75330,\n\t\t9,\n\t\t75330\n\t],\n\t\"./mk.global.js\": [\n\t\t38195,\n\t\t7,\n\t\t38195\n\t],\n\t\"./mk.js\": [\n\t\t6376,\n\t\t9,\n\t\t6376\n\t],\n\t\"./ms.global.js\": [\n\t\t73387,\n\t\t7,\n\t\t73387\n\t],\n\t\"./ms.js\": [\n\t\t56656,\n\t\t9,\n\t\t56656\n\t],\n\t\"./nb.global.js\": [\n\t\t52967,\n\t\t7,\n\t\t52967\n\t],\n\t\"./nb.js\": [\n\t\t50524,\n\t\t9,\n\t\t50524\n\t],\n\t\"./ne.global.js\": [\n\t\t34644,\n\t\t7,\n\t\t34644\n\t],\n\t\"./ne.js\": [\n\t\t98985,\n\t\t9,\n\t\t98985\n\t],\n\t\"./nl.global.js\": [\n\t\t30457,\n\t\t7,\n\t\t30457\n\t],\n\t\"./nl.js\": [\n\t\t45506,\n\t\t9,\n\t\t45506\n\t],\n\t\"./nn.global.js\": [\n\t\t11971,\n\t\t7,\n\t\t11971\n\t],\n\t\"./nn.js\": [\n\t\t56536,\n\t\t9,\n\t\t56536\n\t],\n\t\"./pl.global.js\": [\n\t\t5463,\n\t\t7,\n\t\t5463\n\t],\n\t\"./pl.js\": [\n\t\t41868,\n\t\t9,\n\t\t41868\n\t],\n\t\"./pt-br.global.js\": [\n\t\t51552,\n\t\t7,\n\t\t51552\n\t],\n\t\"./pt-br.js\": [\n\t\t98357,\n\t\t9,\n\t\t98357\n\t],\n\t\"./pt.global.js\": [\n\t\t90111,\n\t\t7,\n\t\t90111\n\t],\n\t\"./pt.js\": [\n\t\t4836,\n\t\t9,\n\t\t4836\n\t],\n\t\"./ro.global.js\": [\n\t\t47474,\n\t\t7,\n\t\t47474\n\t],\n\t\"./ro.js\": [\n\t\t80683,\n\t\t9,\n\t\t80683\n\t],\n\t\"./ru.global.js\": [\n\t\t2784,\n\t\t7,\n\t\t2784\n\t],\n\t\"./ru.js\": [\n\t\t92565,\n\t\t9,\n\t\t92565\n\t],\n\t\"./si-lk.global.js\": [\n\t\t23475,\n\t\t7,\n\t\t23475\n\t],\n\t\"./si-lk.js\": [\n\t\t60936,\n\t\t9,\n\t\t60936\n\t],\n\t\"./sk.global.js\": [\n\t\t5865,\n\t\t7,\n\t\t5865\n\t],\n\t\"./sk.js\": [\n\t\t36914,\n\t\t9,\n\t\t36914\n\t],\n\t\"./sl.global.js\": [\n\t\t2594,\n\t\t7,\n\t\t2594\n\t],\n\t\"./sl.js\": [\n\t\t92827,\n\t\t9,\n\t\t92827\n\t],\n\t\"./sm.global.js\": [\n\t\t53487,\n\t\t7,\n\t\t53487\n\t],\n\t\"./sm.js\": [\n\t\t35828,\n\t\t9,\n\t\t35828\n\t],\n\t\"./sq.global.js\": [\n\t\t19115,\n\t\t7,\n\t\t19115\n\t],\n\t\"./sq.js\": [\n\t\t52944,\n\t\t9,\n\t\t52944\n\t],\n\t\"./sr-cyrl.global.js\": [\n\t\t60211,\n\t\t7,\n\t\t60211\n\t],\n\t\"./sr-cyrl.js\": [\n\t\t24072,\n\t\t9,\n\t\t24072\n\t],\n\t\"./sr.global.js\": [\n\t\t86964,\n\t\t7,\n\t\t86964\n\t],\n\t\"./sr.js\": [\n\t\t37481,\n\t\t9,\n\t\t37481\n\t],\n\t\"./sv.global.js\": [\n\t\t51472,\n\t\t7,\n\t\t51472\n\t],\n\t\"./sv.js\": [\n\t\t53445,\n\t\t9,\n\t\t53445\n\t],\n\t\"./ta-in.global.js\": [\n\t\t33774,\n\t\t7,\n\t\t33774\n\t],\n\t\"./ta-in.js\": [\n\t\t83415,\n\t\t9,\n\t\t83415\n\t],\n\t\"./th.global.js\": [\n\t\t1279,\n\t\t7,\n\t\t1279\n\t],\n\t\"./th.js\": [\n\t\t51428,\n\t\t9,\n\t\t51428\n\t],\n\t\"./tr.global.js\": [\n\t\t79421,\n\t\t7,\n\t\t79421\n\t],\n\t\"./tr.js\": [\n\t\t214,\n\t\t9,\n\t\t214\n\t],\n\t\"./ug.global.js\": [\n\t\t15119,\n\t\t7,\n\t\t15119\n\t],\n\t\"./ug.js\": [\n\t\t70772,\n\t\t9,\n\t\t70772\n\t],\n\t\"./uk.global.js\": [\n\t\t71803,\n\t\t7,\n\t\t71803\n\t],\n\t\"./uk.js\": [\n\t\t15776,\n\t\t9,\n\t\t15776\n\t],\n\t\"./uz.global.js\": [\n\t\t20222,\n\t\t7,\n\t\t20222\n\t],\n\t\"./uz.js\": [\n\t\t12935,\n\t\t9,\n\t\t12935\n\t],\n\t\"./vi.global.js\": [\n\t\t23056,\n\t\t7,\n\t\t23056\n\t],\n\t\"./vi.js\": [\n\t\t84773,\n\t\t9,\n\t\t84773\n\t],\n\t\"./zh-cn.global.js\": [\n\t\t43673,\n\t\t7,\n\t\t43673\n\t],\n\t\"./zh-cn.js\": [\n\t\t1730,\n\t\t9,\n\t\t1730\n\t],\n\t\"./zh-tw.global.js\": [\n\t\t69725,\n\t\t7,\n\t\t69725\n\t],\n\t\"./zh-tw.js\": [\n\t\t37686,\n\t\t9,\n\t\t37686\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[2]).then(function() {\n\t\treturn __webpack_require__.t(id, ids[1] | 16)\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 27561;\nmodule.exports = webpackAsyncContext;","/**\n * Patterns registry - Central registry and scan logic for patterns\n *\n * Copyright 2012-2013 Simplon B.V.\n * Copyright 2012-2013 Florian Friesdorf\n * Copyright 2013 Marko Durkovic\n * Copyright 2013 Rok Garbas\n * Copyright 2014-2015 Syslab.com GmBH, JC Brand\n */\n\n/*\n * changes to previous patterns.register/scan mechanism\n * - if you want initialised class, do it in init\n * - init returns set of elements actually initialised\n * - handle once within init\n * - no turnstile anymore\n * - set pattern.jquery_plugin if you want it\n */\nimport $ from \"jquery\";\nimport dom from \"./dom\";\nimport logging from \"./logging\";\nimport utils from \"./utils\";\n\nconst log = logging.getLogger(\"registry\");\nconst disable_re = /patterns-disable=([^&]+)/g;\nconst dont_catch_re = /patterns-dont-catch/g;\nconst disabled = {};\nlet dont_catch = false;\nlet match;\n\nwhile ((match = disable_re.exec(window.location.search)) !== null) {\n    disabled[match[1]] = true;\n    log.info(\"Pattern disabled via url config:\", match[1]);\n}\n\nwhile ((match = dont_catch_re.exec(window.location.search)) !== null) {\n    dont_catch = true;\n    log.info(\"I will not catch init exceptions\");\n}\n\n/**\n * Global pattern registry.\n *\n * This is a singleton and shared among any instance of the Patternslib\n * registry since Patternslib version 8.\n *\n * You normally don't need this as the registry handles it for you.\n */\nif (typeof window.__patternslib_registry === \"undefined\") {\n    window.__patternslib_registry = {};\n}\nexport const PATTERN_REGISTRY = window.__patternslib_registry;\nif (typeof window.__patternslib_registry_initialized === \"undefined\") {\n    window.__patternslib_registry_initialized = false;\n}\n\nconst registry = {\n    patterns: PATTERN_REGISTRY, // reference to global patterns registry\n    // as long as the registry is not initialized, pattern\n    // registration just registers a pattern. Once init is called,\n    // the DOM is scanned. After that registering a new pattern\n    // results in rescanning the DOM only for this pattern.\n    init() {\n        dom.document_ready(() => {\n            if (window.__patternslib_registry_initialized) {\n                // Do not reinitialize a already initialized registry.\n                return;\n            }\n            window.__patternslib_registry_initialized = true;\n            log.debug(\"Loaded: \" + Object.keys(registry.patterns).sort().join(\", \"));\n            registry.scan(document.body);\n            log.debug(\"Finished initial scan.\");\n        });\n    },\n\n    clear() {\n        // Removes all patterns from the registry. Currently only being\n        // used in tests.\n        for (const name in registry.patterns) {\n            delete registry.patterns[name];\n        }\n    },\n\n    transformPattern(name, content) {\n        /* Call the transform method on the pattern with the given name, if\n         * it exists.\n         */\n        if (disabled[name]) {\n            log.debug(`Skipping disabled pattern: ${name}.`);\n            return;\n        }\n\n        const pattern = registry.patterns[name];\n        const transform = pattern.transform || pattern.prototype?.transform;\n        if (transform) {\n            try {\n                transform($(content));\n            } catch (e) {\n                if (dont_catch) {\n                    throw e;\n                }\n                log.error(`Transform error for pattern ${name}.`, e);\n            }\n        }\n    },\n\n    initPattern(name, el, trigger) {\n        /* Initialize the pattern with the provided name and in the context\n         * of the passed in DOM element.\n         */\n        const $el = $(el);\n        const pattern = registry.patterns[name];\n        const plog = logging.getLogger(`pat.${name}`);\n        if (el.matches(pattern.trigger)) {\n            plog.debug(\"Initialising.\", el);\n            try {\n                if (pattern.init) {\n                    // old style initialisation\n                    pattern.init($el, null, trigger);\n                } else {\n                    // class based pattern initialisation\n                    new pattern($el, null, trigger);\n                }\n\n                plog.debug(\"done.\");\n            } catch (e) {\n                if (dont_catch) {\n                    throw e;\n                }\n                plog.error(\"Caught error:\", e);\n            }\n        }\n    },\n\n    orderPatterns(patterns) {\n        // Always add pat-validation as first pattern, so that it can prevent\n        // other patterns from reacting to submit events if form validation\n        // fails.\n        if (patterns.includes(\"validation\")) {\n            patterns.splice(patterns.indexOf(\"validation\"), 1);\n            patterns.unshift(\"validation\");\n        }\n        // Add clone-code to the very beginning - we want to copy the markup\n        // before any other patterns changed the markup.\n        if (patterns.includes(\"clone-code\")) {\n            patterns.splice(patterns.indexOf(\"clone-code\"), 1);\n            patterns.unshift(\"clone-code\");\n        }\n\n        return patterns;\n    },\n\n    scan(content, patterns, trigger) {\n        if (!content) {\n            return;\n        }\n\n        if (typeof content === \"string\") {\n            content = document.querySelector(content);\n        } else if (content instanceof Text) {\n            // No need to scan a TextNode.\n            return;\n        } else if (content.jquery) {\n            content = content[0];\n        }\n\n        const selectors = [];\n        patterns = this.orderPatterns(patterns || Object.keys(registry.patterns));\n        for (const name of patterns) {\n            this.transformPattern(name, content);\n            const pattern = registry.patterns[name];\n            if (pattern.trigger) {\n                selectors.unshift(pattern.trigger);\n            }\n        }\n\n        // Clean up selectors:\n        // - Remove whitespace,\n        // - Remove trailing commas,\n        // - Join to selecto string.\n        const selector_string = selectors.map(\n            (selector) => selector.trim().replace(/,$/, \"\")\n        ).join(\",\");\n\n        // Exit, if no selector.\n        if (!selector_string) {\n            return;\n        }\n\n        let matches = dom.querySelectorAllAndMe(\n            content,\n            selector_string\n        );\n        matches = matches.filter((el) => {\n            // Filter out patterns:\n            // - with class ``.disable-patterns`` or wrapped within.\n            // - wrapped in ``<pre>`` elements\n            // - wrapped in ``<template>`` elements (not reachable anyways)\n            return (\n                !el?.closest?.(\".disable-patterns\") &&\n                !el?.parentNode?.closest?.(\"pre\") &&\n                // BBB. TODO: Remove with next major version.\n                !el?.closest?.(\".cant-touch-this\")\n            );\n        });\n\n        // walk list backwards and initialize patterns inside-out.\n        for (const el of matches.reverse()) {\n            for (const name of patterns) {\n                this.initPattern(name, el, trigger);\n            }\n        }\n        document.body.classList.add(\"patterns-loaded\");\n    },\n\n    register(pattern, name) {\n        name = name || pattern.name;\n        if (!name) {\n            log.error(\"Pattern lacks a name.\", pattern);\n            return false;\n        }\n\n        // Do not register blacklisted patterns.\n        let BLACKLIST = window.__patternslib_patterns_blacklist;\n        if (!Array.isArray(BLACKLIST)) {\n            BLACKLIST = [];\n        }\n        if (BLACKLIST.includes(name)) {\n            log.warn(`Pattern name ${name} is blacklisted.`);\n            return false;\n        }\n\n        if (registry.patterns[name]) {\n            log.debug(`Already have a pattern called ${name}.`);\n            return false;\n        }\n        // register pattern to be used for scanning new content\n        registry.patterns[name] = pattern;\n\n        // register pattern as jquery plugin\n        if (pattern.jquery_plugin) {\n            const plugin_name = (\"pat-\" + name).replace(\n                /-([a-zA-Z])/g,\n                function (match, p1) {\n                    return p1.toUpperCase();\n                }\n            );\n            $.fn[plugin_name] = utils.jqueryPlugin(pattern);\n            // BBB 2012-12-10 and also for Mockup patterns.\n            $.fn[plugin_name.replace(/^pat/, \"pattern\")] = $.fn[plugin_name];\n        }\n        log.debug(`Registered pattern ${name}`, pattern);\n        if (window.__patternslib_registry_initialized) {\n            // Once the first initialization has been done, do only scan for\n            // newly registered patterns.\n            registry.scan(document.body, [name]);\n            log.debug(`Re-scanned dom with newly registered pattern ${name}.`);\n        }\n        return true;\n    },\n};\n\nexport default registry;\n","var map = {\n\t\"./1c\": [\n\t\t32402,\n\t\t32402\n\t],\n\t\"./1c.js\": [\n\t\t32402,\n\t\t32402\n\t],\n\t\"./abnf\": [\n\t\t52701,\n\t\t52701\n\t],\n\t\"./abnf.js\": [\n\t\t52701,\n\t\t52701\n\t],\n\t\"./accesslog\": [\n\t\t35076,\n\t\t35076\n\t],\n\t\"./accesslog.js\": [\n\t\t35076,\n\t\t35076\n\t],\n\t\"./actionscript\": [\n\t\t49115,\n\t\t49115\n\t],\n\t\"./actionscript.js\": [\n\t\t49115,\n\t\t49115\n\t],\n\t\"./ada\": [\n\t\t99428,\n\t\t99428\n\t],\n\t\"./ada.js\": [\n\t\t99428,\n\t\t99428\n\t],\n\t\"./angelscript\": [\n\t\t57246,\n\t\t57246\n\t],\n\t\"./angelscript.js\": [\n\t\t57246,\n\t\t57246\n\t],\n\t\"./apache\": [\n\t\t29980,\n\t\t29980\n\t],\n\t\"./apache.js\": [\n\t\t29980,\n\t\t29980\n\t],\n\t\"./applescript\": [\n\t\t42731,\n\t\t42731\n\t],\n\t\"./applescript.js\": [\n\t\t42731,\n\t\t42731\n\t],\n\t\"./arcade\": [\n\t\t18206,\n\t\t18206\n\t],\n\t\"./arcade.js\": [\n\t\t18206,\n\t\t18206\n\t],\n\t\"./arduino\": [\n\t\t27220,\n\t\t27220\n\t],\n\t\"./arduino.js\": [\n\t\t27220,\n\t\t27220\n\t],\n\t\"./armasm\": [\n\t\t79139,\n\t\t79139\n\t],\n\t\"./armasm.js\": [\n\t\t79139,\n\t\t79139\n\t],\n\t\"./asciidoc\": [\n\t\t49405,\n\t\t49405\n\t],\n\t\"./asciidoc.js\": [\n\t\t49405,\n\t\t49405\n\t],\n\t\"./aspectj\": [\n\t\t36478,\n\t\t36478\n\t],\n\t\"./aspectj.js\": [\n\t\t36478,\n\t\t36478\n\t],\n\t\"./autohotkey\": [\n\t\t62923,\n\t\t62923\n\t],\n\t\"./autohotkey.js\": [\n\t\t62923,\n\t\t62923\n\t],\n\t\"./autoit\": [\n\t\t77556,\n\t\t77556\n\t],\n\t\"./autoit.js\": [\n\t\t77556,\n\t\t77556\n\t],\n\t\"./avrasm\": [\n\t\t13732,\n\t\t13732\n\t],\n\t\"./avrasm.js\": [\n\t\t13732,\n\t\t13732\n\t],\n\t\"./awk\": [\n\t\t19277,\n\t\t19277\n\t],\n\t\"./awk.js\": [\n\t\t19277,\n\t\t19277\n\t],\n\t\"./axapta\": [\n\t\t77909,\n\t\t77909\n\t],\n\t\"./axapta.js\": [\n\t\t77909,\n\t\t77909\n\t],\n\t\"./bash\": [\n\t\t35344,\n\t\t35344\n\t],\n\t\"./bash.js\": [\n\t\t35344,\n\t\t35344\n\t],\n\t\"./basic\": [\n\t\t6722,\n\t\t6722\n\t],\n\t\"./basic.js\": [\n\t\t6722,\n\t\t6722\n\t],\n\t\"./bnf\": [\n\t\t75610,\n\t\t75610\n\t],\n\t\"./bnf.js\": [\n\t\t75610,\n\t\t75610\n\t],\n\t\"./brainfuck\": [\n\t\t25439,\n\t\t25439\n\t],\n\t\"./brainfuck.js\": [\n\t\t25439,\n\t\t25439\n\t],\n\t\"./c\": [\n\t\t39497,\n\t\t39497\n\t],\n\t\"./c-like\": [\n\t\t97053,\n\t\t97053\n\t],\n\t\"./c-like.js\": [\n\t\t97053,\n\t\t97053\n\t],\n\t\"./c.js\": [\n\t\t39497,\n\t\t39497\n\t],\n\t\"./cal\": [\n\t\t67040,\n\t\t67040\n\t],\n\t\"./cal.js\": [\n\t\t67040,\n\t\t67040\n\t],\n\t\"./capnproto\": [\n\t\t60436,\n\t\t60436\n\t],\n\t\"./capnproto.js\": [\n\t\t60436,\n\t\t60436\n\t],\n\t\"./ceylon\": [\n\t\t3838,\n\t\t3838\n\t],\n\t\"./ceylon.js\": [\n\t\t3838,\n\t\t3838\n\t],\n\t\"./clean\": [\n\t\t714,\n\t\t78333\n\t],\n\t\"./clean.js\": [\n\t\t714,\n\t\t78333\n\t],\n\t\"./clojure\": [\n\t\t80364,\n\t\t80364\n\t],\n\t\"./clojure-repl\": [\n\t\t5892,\n\t\t5892\n\t],\n\t\"./clojure-repl.js\": [\n\t\t5892,\n\t\t5892\n\t],\n\t\"./clojure.js\": [\n\t\t80364,\n\t\t80364\n\t],\n\t\"./cmake\": [\n\t\t56427,\n\t\t56427\n\t],\n\t\"./cmake.js\": [\n\t\t56427,\n\t\t56427\n\t],\n\t\"./coffeescript\": [\n\t\t64125,\n\t\t64125\n\t],\n\t\"./coffeescript.js\": [\n\t\t64125,\n\t\t64125\n\t],\n\t\"./coq\": [\n\t\t39081,\n\t\t39081\n\t],\n\t\"./coq.js\": [\n\t\t39081,\n\t\t39081\n\t],\n\t\"./cos\": [\n\t\t30279,\n\t\t30279\n\t],\n\t\"./cos.js\": [\n\t\t30279,\n\t\t30279\n\t],\n\t\"./cpp\": [\n\t\t29721,\n\t\t29721\n\t],\n\t\"./cpp.js\": [\n\t\t29721,\n\t\t29721\n\t],\n\t\"./crmsh\": [\n\t\t67015,\n\t\t67015\n\t],\n\t\"./crmsh.js\": [\n\t\t67015,\n\t\t67015\n\t],\n\t\"./crystal\": [\n\t\t33270,\n\t\t33270\n\t],\n\t\"./crystal.js\": [\n\t\t33270,\n\t\t33270\n\t],\n\t\"./csharp\": [\n\t\t88425,\n\t\t88425\n\t],\n\t\"./csharp.js\": [\n\t\t88425,\n\t\t88425\n\t],\n\t\"./csp\": [\n\t\t82086,\n\t\t82086\n\t],\n\t\"./csp.js\": [\n\t\t82086,\n\t\t82086\n\t],\n\t\"./css\": [\n\t\t53315,\n\t\t53315\n\t],\n\t\"./css.js\": [\n\t\t53315,\n\t\t53315\n\t],\n\t\"./d\": [\n\t\t91036,\n\t\t91036\n\t],\n\t\"./d.js\": [\n\t\t91036,\n\t\t91036\n\t],\n\t\"./dart\": [\n\t\t58811,\n\t\t58811\n\t],\n\t\"./dart.js\": [\n\t\t58811,\n\t\t58811\n\t],\n\t\"./delphi\": [\n\t\t61870,\n\t\t61870\n\t],\n\t\"./delphi.js\": [\n\t\t61870,\n\t\t61870\n\t],\n\t\"./diff\": [\n\t\t6033,\n\t\t6033\n\t],\n\t\"./diff.js\": [\n\t\t6033,\n\t\t6033\n\t],\n\t\"./django\": [\n\t\t35133,\n\t\t35133\n\t],\n\t\"./django.js\": [\n\t\t35133,\n\t\t35133\n\t],\n\t\"./dns\": [\n\t\t49927,\n\t\t49927\n\t],\n\t\"./dns.js\": [\n\t\t49927,\n\t\t49927\n\t],\n\t\"./dockerfile\": [\n\t\t26756,\n\t\t26756\n\t],\n\t\"./dockerfile.js\": [\n\t\t26756,\n\t\t26756\n\t],\n\t\"./dos\": [\n\t\t55754,\n\t\t55754\n\t],\n\t\"./dos.js\": [\n\t\t55754,\n\t\t55754\n\t],\n\t\"./dsconfig\": [\n\t\t91533,\n\t\t91533\n\t],\n\t\"./dsconfig.js\": [\n\t\t91533,\n\t\t91533\n\t],\n\t\"./dts\": [\n\t\t39129,\n\t\t39129\n\t],\n\t\"./dts.js\": [\n\t\t39129,\n\t\t39129\n\t],\n\t\"./dust\": [\n\t\t14058,\n\t\t14058\n\t],\n\t\"./dust.js\": [\n\t\t14058,\n\t\t14058\n\t],\n\t\"./ebnf\": [\n\t\t44177,\n\t\t44177\n\t],\n\t\"./ebnf.js\": [\n\t\t44177,\n\t\t44177\n\t],\n\t\"./elixir\": [\n\t\t81297,\n\t\t81297\n\t],\n\t\"./elixir.js\": [\n\t\t81297,\n\t\t81297\n\t],\n\t\"./elm\": [\n\t\t42292,\n\t\t42292\n\t],\n\t\"./elm.js\": [\n\t\t42292,\n\t\t42292\n\t],\n\t\"./erb\": [\n\t\t84663,\n\t\t84663\n\t],\n\t\"./erb.js\": [\n\t\t84663,\n\t\t84663\n\t],\n\t\"./erlang\": [\n\t\t945,\n\t\t945\n\t],\n\t\"./erlang-repl\": [\n\t\t81983,\n\t\t81983\n\t],\n\t\"./erlang-repl.js\": [\n\t\t81983,\n\t\t81983\n\t],\n\t\"./erlang.js\": [\n\t\t945,\n\t\t945\n\t],\n\t\"./excel\": [\n\t\t58451,\n\t\t58451\n\t],\n\t\"./excel.js\": [\n\t\t58451,\n\t\t58451\n\t],\n\t\"./fix\": [\n\t\t7003,\n\t\t7003\n\t],\n\t\"./fix.js\": [\n\t\t7003,\n\t\t7003\n\t],\n\t\"./flix\": [\n\t\t24701,\n\t\t24701\n\t],\n\t\"./flix.js\": [\n\t\t24701,\n\t\t24701\n\t],\n\t\"./fortran\": [\n\t\t30258,\n\t\t30258\n\t],\n\t\"./fortran.js\": [\n\t\t30258,\n\t\t30258\n\t],\n\t\"./fsharp\": [\n\t\t94108,\n\t\t94108\n\t],\n\t\"./fsharp.js\": [\n\t\t94108,\n\t\t94108\n\t],\n\t\"./gams\": [\n\t\t48126,\n\t\t48126\n\t],\n\t\"./gams.js\": [\n\t\t48126,\n\t\t48126\n\t],\n\t\"./gauss\": [\n\t\t25117,\n\t\t25117\n\t],\n\t\"./gauss.js\": [\n\t\t25117,\n\t\t25117\n\t],\n\t\"./gcode\": [\n\t\t19156,\n\t\t19156\n\t],\n\t\"./gcode.js\": [\n\t\t19156,\n\t\t19156\n\t],\n\t\"./gherkin\": [\n\t\t13666,\n\t\t13666\n\t],\n\t\"./gherkin.js\": [\n\t\t13666,\n\t\t13666\n\t],\n\t\"./glsl\": [\n\t\t19614,\n\t\t19614\n\t],\n\t\"./glsl.js\": [\n\t\t19614,\n\t\t19614\n\t],\n\t\"./gml\": [\n\t\t2904,\n\t\t2904\n\t],\n\t\"./gml.js\": [\n\t\t2904,\n\t\t2904\n\t],\n\t\"./go\": [\n\t\t44564,\n\t\t44564\n\t],\n\t\"./go.js\": [\n\t\t44564,\n\t\t44564\n\t],\n\t\"./golo\": [\n\t\t14205,\n\t\t14205\n\t],\n\t\"./golo.js\": [\n\t\t14205,\n\t\t14205\n\t],\n\t\"./gradle\": [\n\t\t29789,\n\t\t29789\n\t],\n\t\"./gradle.js\": [\n\t\t29789,\n\t\t29789\n\t],\n\t\"./groovy\": [\n\t\t72896,\n\t\t72896\n\t],\n\t\"./groovy.js\": [\n\t\t72896,\n\t\t72896\n\t],\n\t\"./haml\": [\n\t\t57292,\n\t\t57292\n\t],\n\t\"./haml.js\": [\n\t\t57292,\n\t\t57292\n\t],\n\t\"./handlebars\": [\n\t\t18514,\n\t\t18514\n\t],\n\t\"./handlebars.js\": [\n\t\t18514,\n\t\t18514\n\t],\n\t\"./haskell\": [\n\t\t34904,\n\t\t34904\n\t],\n\t\"./haskell.js\": [\n\t\t34904,\n\t\t34904\n\t],\n\t\"./haxe\": [\n\t\t58670,\n\t\t58670\n\t],\n\t\"./haxe.js\": [\n\t\t58670,\n\t\t58670\n\t],\n\t\"./hsp\": [\n\t\t51679,\n\t\t51679\n\t],\n\t\"./hsp.js\": [\n\t\t51679,\n\t\t51679\n\t],\n\t\"./htmlbars\": [\n\t\t22329,\n\t\t22329\n\t],\n\t\"./htmlbars.js\": [\n\t\t22329,\n\t\t22329\n\t],\n\t\"./http\": [\n\t\t73402,\n\t\t73402\n\t],\n\t\"./http.js\": [\n\t\t73402,\n\t\t73402\n\t],\n\t\"./hy\": [\n\t\t45617,\n\t\t45617\n\t],\n\t\"./hy.js\": [\n\t\t45617,\n\t\t45617\n\t],\n\t\"./inform7\": [\n\t\t12962,\n\t\t12962\n\t],\n\t\"./inform7.js\": [\n\t\t12962,\n\t\t12962\n\t],\n\t\"./ini\": [\n\t\t40634,\n\t\t40634\n\t],\n\t\"./ini.js\": [\n\t\t40634,\n\t\t40634\n\t],\n\t\"./irpf90\": [\n\t\t76414,\n\t\t76414\n\t],\n\t\"./irpf90.js\": [\n\t\t76414,\n\t\t76414\n\t],\n\t\"./isbl\": [\n\t\t1012,\n\t\t1012\n\t],\n\t\"./isbl.js\": [\n\t\t1012,\n\t\t1012\n\t],\n\t\"./java\": [\n\t\t81786,\n\t\t81786\n\t],\n\t\"./java.js\": [\n\t\t81786,\n\t\t81786\n\t],\n\t\"./javascript\": [\n\t\t95089,\n\t\t95089\n\t],\n\t\"./javascript.js\": [\n\t\t95089,\n\t\t95089\n\t],\n\t\"./jboss-cli\": [\n\t\t39040,\n\t\t39040\n\t],\n\t\"./jboss-cli.js\": [\n\t\t39040,\n\t\t39040\n\t],\n\t\"./json\": [\n\t\t65772,\n\t\t65772\n\t],\n\t\"./json.js\": [\n\t\t65772,\n\t\t65772\n\t],\n\t\"./julia\": [\n\t\t27601,\n\t\t27601\n\t],\n\t\"./julia-repl\": [\n\t\t3231,\n\t\t3231\n\t],\n\t\"./julia-repl.js\": [\n\t\t3231,\n\t\t3231\n\t],\n\t\"./julia.js\": [\n\t\t27601,\n\t\t27601\n\t],\n\t\"./kotlin\": [\n\t\t99559,\n\t\t99559\n\t],\n\t\"./kotlin.js\": [\n\t\t99559,\n\t\t99559\n\t],\n\t\"./lasso\": [\n\t\t31942,\n\t\t31942\n\t],\n\t\"./lasso.js\": [\n\t\t31942,\n\t\t31942\n\t],\n\t\"./latex\": [\n\t\t8100,\n\t\t8100\n\t],\n\t\"./latex.js\": [\n\t\t8100,\n\t\t8100\n\t],\n\t\"./ldif\": [\n\t\t86685,\n\t\t86685\n\t],\n\t\"./ldif.js\": [\n\t\t86685,\n\t\t86685\n\t],\n\t\"./leaf\": [\n\t\t98186,\n\t\t98186\n\t],\n\t\"./leaf.js\": [\n\t\t98186,\n\t\t98186\n\t],\n\t\"./less\": [\n\t\t52539,\n\t\t52539\n\t],\n\t\"./less.js\": [\n\t\t52539,\n\t\t52539\n\t],\n\t\"./lisp\": [\n\t\t73458,\n\t\t73458\n\t],\n\t\"./lisp.js\": [\n\t\t73458,\n\t\t73458\n\t],\n\t\"./livecodeserver\": [\n\t\t75814,\n\t\t75814\n\t],\n\t\"./livecodeserver.js\": [\n\t\t75814,\n\t\t75814\n\t],\n\t\"./livescript\": [\n\t\t25416,\n\t\t25416\n\t],\n\t\"./livescript.js\": [\n\t\t25416,\n\t\t25416\n\t],\n\t\"./llvm\": [\n\t\t33543,\n\t\t33543\n\t],\n\t\"./llvm.js\": [\n\t\t33543,\n\t\t33543\n\t],\n\t\"./lsl\": [\n\t\t3399,\n\t\t3399\n\t],\n\t\"./lsl.js\": [\n\t\t3399,\n\t\t3399\n\t],\n\t\"./lua\": [\n\t\t32670,\n\t\t32670\n\t],\n\t\"./lua.js\": [\n\t\t32670,\n\t\t32670\n\t],\n\t\"./makefile\": [\n\t\t59934,\n\t\t59934\n\t],\n\t\"./makefile.js\": [\n\t\t59934,\n\t\t59934\n\t],\n\t\"./markdown\": [\n\t\t96503,\n\t\t96503\n\t],\n\t\"./markdown.js\": [\n\t\t96503,\n\t\t96503\n\t],\n\t\"./mathematica\": [\n\t\t55672,\n\t\t55672\n\t],\n\t\"./mathematica.js\": [\n\t\t55672,\n\t\t55672\n\t],\n\t\"./matlab\": [\n\t\t56023,\n\t\t56023\n\t],\n\t\"./matlab.js\": [\n\t\t56023,\n\t\t56023\n\t],\n\t\"./maxima\": [\n\t\t29433,\n\t\t29433\n\t],\n\t\"./maxima.js\": [\n\t\t29433,\n\t\t29433\n\t],\n\t\"./mel\": [\n\t\t68254,\n\t\t68254\n\t],\n\t\"./mel.js\": [\n\t\t68254,\n\t\t68254\n\t],\n\t\"./mercury\": [\n\t\t48557,\n\t\t48557\n\t],\n\t\"./mercury.js\": [\n\t\t48557,\n\t\t48557\n\t],\n\t\"./mipsasm\": [\n\t\t24714,\n\t\t24714\n\t],\n\t\"./mipsasm.js\": [\n\t\t24714,\n\t\t24714\n\t],\n\t\"./mizar\": [\n\t\t69407,\n\t\t69407\n\t],\n\t\"./mizar.js\": [\n\t\t69407,\n\t\t69407\n\t],\n\t\"./mojolicious\": [\n\t\t90593,\n\t\t90593\n\t],\n\t\"./mojolicious.js\": [\n\t\t90593,\n\t\t90593\n\t],\n\t\"./monkey\": [\n\t\t29387,\n\t\t29387\n\t],\n\t\"./monkey.js\": [\n\t\t29387,\n\t\t29387\n\t],\n\t\"./moonscript\": [\n\t\t75468,\n\t\t75468\n\t],\n\t\"./moonscript.js\": [\n\t\t75468,\n\t\t75468\n\t],\n\t\"./n1ql\": [\n\t\t52962,\n\t\t52962\n\t],\n\t\"./n1ql.js\": [\n\t\t52962,\n\t\t52962\n\t],\n\t\"./nginx\": [\n\t\t4896,\n\t\t4896\n\t],\n\t\"./nginx.js\": [\n\t\t4896,\n\t\t4896\n\t],\n\t\"./nim\": [\n\t\t63712,\n\t\t63712\n\t],\n\t\"./nim.js\": [\n\t\t63712,\n\t\t63712\n\t],\n\t\"./nix\": [\n\t\t34659,\n\t\t34659\n\t],\n\t\"./nix.js\": [\n\t\t34659,\n\t\t34659\n\t],\n\t\"./node-repl\": [\n\t\t26122,\n\t\t26122\n\t],\n\t\"./node-repl.js\": [\n\t\t26122,\n\t\t26122\n\t],\n\t\"./nsis\": [\n\t\t64561,\n\t\t64561\n\t],\n\t\"./nsis.js\": [\n\t\t64561,\n\t\t64561\n\t],\n\t\"./objectivec\": [\n\t\t96494,\n\t\t96494\n\t],\n\t\"./objectivec.js\": [\n\t\t96494,\n\t\t96494\n\t],\n\t\"./ocaml\": [\n\t\t60108,\n\t\t60108\n\t],\n\t\"./ocaml.js\": [\n\t\t60108,\n\t\t60108\n\t],\n\t\"./openscad\": [\n\t\t89689,\n\t\t89689\n\t],\n\t\"./openscad.js\": [\n\t\t89689,\n\t\t89689\n\t],\n\t\"./oxygene\": [\n\t\t78327,\n\t\t78327\n\t],\n\t\"./oxygene.js\": [\n\t\t78327,\n\t\t78327\n\t],\n\t\"./parser3\": [\n\t\t52052,\n\t\t52052\n\t],\n\t\"./parser3.js\": [\n\t\t52052,\n\t\t52052\n\t],\n\t\"./perl\": [\n\t\t36891,\n\t\t36891\n\t],\n\t\"./perl.js\": [\n\t\t36891,\n\t\t36891\n\t],\n\t\"./pf\": [\n\t\t9412,\n\t\t9412\n\t],\n\t\"./pf.js\": [\n\t\t9412,\n\t\t9412\n\t],\n\t\"./pgsql\": [\n\t\t80431,\n\t\t80431\n\t],\n\t\"./pgsql.js\": [\n\t\t80431,\n\t\t80431\n\t],\n\t\"./php\": [\n\t\t34608,\n\t\t34608\n\t],\n\t\"./php-template\": [\n\t\t85579,\n\t\t85579\n\t],\n\t\"./php-template.js\": [\n\t\t85579,\n\t\t85579\n\t],\n\t\"./php.js\": [\n\t\t34608,\n\t\t34608\n\t],\n\t\"./plaintext\": [\n\t\t7939,\n\t\t7939\n\t],\n\t\"./plaintext.js\": [\n\t\t7939,\n\t\t7939\n\t],\n\t\"./pony\": [\n\t\t39350,\n\t\t39350\n\t],\n\t\"./pony.js\": [\n\t\t39350,\n\t\t39350\n\t],\n\t\"./powershell\": [\n\t\t26571,\n\t\t26571\n\t],\n\t\"./powershell.js\": [\n\t\t26571,\n\t\t26571\n\t],\n\t\"./processing\": [\n\t\t50181,\n\t\t50181\n\t],\n\t\"./processing.js\": [\n\t\t50181,\n\t\t50181\n\t],\n\t\"./profile\": [\n\t\t46269,\n\t\t46269\n\t],\n\t\"./profile.js\": [\n\t\t46269,\n\t\t46269\n\t],\n\t\"./prolog\": [\n\t\t3105,\n\t\t3105\n\t],\n\t\"./prolog.js\": [\n\t\t3105,\n\t\t3105\n\t],\n\t\"./properties\": [\n\t\t79975,\n\t\t79975\n\t],\n\t\"./properties.js\": [\n\t\t79975,\n\t\t79975\n\t],\n\t\"./protobuf\": [\n\t\t25093,\n\t\t25093\n\t],\n\t\"./protobuf.js\": [\n\t\t25093,\n\t\t25093\n\t],\n\t\"./puppet\": [\n\t\t69104,\n\t\t69104\n\t],\n\t\"./puppet.js\": [\n\t\t69104,\n\t\t69104\n\t],\n\t\"./purebasic\": [\n\t\t94412,\n\t\t94412\n\t],\n\t\"./purebasic.js\": [\n\t\t94412,\n\t\t94412\n\t],\n\t\"./python\": [\n\t\t87192,\n\t\t87192\n\t],\n\t\"./python-repl\": [\n\t\t90736,\n\t\t90736\n\t],\n\t\"./python-repl.js\": [\n\t\t90736,\n\t\t90736\n\t],\n\t\"./python.js\": [\n\t\t87192,\n\t\t87192\n\t],\n\t\"./q\": [\n\t\t23255,\n\t\t23255\n\t],\n\t\"./q.js\": [\n\t\t23255,\n\t\t23255\n\t],\n\t\"./qml\": [\n\t\t55506,\n\t\t55506\n\t],\n\t\"./qml.js\": [\n\t\t55506,\n\t\t55506\n\t],\n\t\"./r\": [\n\t\t22698,\n\t\t22698\n\t],\n\t\"./r.js\": [\n\t\t22698,\n\t\t22698\n\t],\n\t\"./reasonml\": [\n\t\t15331,\n\t\t15331\n\t],\n\t\"./reasonml.js\": [\n\t\t15331,\n\t\t15331\n\t],\n\t\"./rib\": [\n\t\t24745,\n\t\t24745\n\t],\n\t\"./rib.js\": [\n\t\t24745,\n\t\t24745\n\t],\n\t\"./roboconf\": [\n\t\t75812,\n\t\t75812\n\t],\n\t\"./roboconf.js\": [\n\t\t75812,\n\t\t75812\n\t],\n\t\"./routeros\": [\n\t\t53557,\n\t\t53557\n\t],\n\t\"./routeros.js\": [\n\t\t53557,\n\t\t53557\n\t],\n\t\"./rsl\": [\n\t\t53409,\n\t\t53409\n\t],\n\t\"./rsl.js\": [\n\t\t53409,\n\t\t53409\n\t],\n\t\"./ruby\": [\n\t\t82978,\n\t\t82978\n\t],\n\t\"./ruby.js\": [\n\t\t82978,\n\t\t82978\n\t],\n\t\"./ruleslanguage\": [\n\t\t78385,\n\t\t78385\n\t],\n\t\"./ruleslanguage.js\": [\n\t\t78385,\n\t\t78385\n\t],\n\t\"./rust\": [\n\t\t39688,\n\t\t39688\n\t],\n\t\"./rust.js\": [\n\t\t39688,\n\t\t39688\n\t],\n\t\"./sas\": [\n\t\t7005,\n\t\t7005\n\t],\n\t\"./sas.js\": [\n\t\t7005,\n\t\t7005\n\t],\n\t\"./scala\": [\n\t\t43618,\n\t\t43618\n\t],\n\t\"./scala.js\": [\n\t\t43618,\n\t\t43618\n\t],\n\t\"./scheme\": [\n\t\t36617,\n\t\t36617\n\t],\n\t\"./scheme.js\": [\n\t\t36617,\n\t\t36617\n\t],\n\t\"./scilab\": [\n\t\t92970,\n\t\t92970\n\t],\n\t\"./scilab.js\": [\n\t\t92970,\n\t\t92970\n\t],\n\t\"./scss\": [\n\t\t3206,\n\t\t3206\n\t],\n\t\"./scss.js\": [\n\t\t3206,\n\t\t3206\n\t],\n\t\"./shell\": [\n\t\t77918,\n\t\t77918\n\t],\n\t\"./shell.js\": [\n\t\t77918,\n\t\t77918\n\t],\n\t\"./smali\": [\n\t\t91180,\n\t\t91180\n\t],\n\t\"./smali.js\": [\n\t\t91180,\n\t\t91180\n\t],\n\t\"./smalltalk\": [\n\t\t72241,\n\t\t72241\n\t],\n\t\"./smalltalk.js\": [\n\t\t72241,\n\t\t72241\n\t],\n\t\"./sml\": [\n\t\t4460,\n\t\t4460\n\t],\n\t\"./sml.js\": [\n\t\t4460,\n\t\t4460\n\t],\n\t\"./sqf\": [\n\t\t7186,\n\t\t7186\n\t],\n\t\"./sqf.js\": [\n\t\t7186,\n\t\t7186\n\t],\n\t\"./sql\": [\n\t\t76384,\n\t\t76384\n\t],\n\t\"./sql.js\": [\n\t\t76384,\n\t\t76384\n\t],\n\t\"./sql_more\": [\n\t\t30414,\n\t\t30414\n\t],\n\t\"./sql_more.js\": [\n\t\t30414,\n\t\t30414\n\t],\n\t\"./stan\": [\n\t\t24490,\n\t\t24490\n\t],\n\t\"./stan.js\": [\n\t\t24490,\n\t\t24490\n\t],\n\t\"./stata\": [\n\t\t81497,\n\t\t81497\n\t],\n\t\"./stata.js\": [\n\t\t81497,\n\t\t81497\n\t],\n\t\"./step21\": [\n\t\t36809,\n\t\t36809\n\t],\n\t\"./step21.js\": [\n\t\t36809,\n\t\t36809\n\t],\n\t\"./stylus\": [\n\t\t62224,\n\t\t62224\n\t],\n\t\"./stylus.js\": [\n\t\t62224,\n\t\t62224\n\t],\n\t\"./subunit\": [\n\t\t95976,\n\t\t95976\n\t],\n\t\"./subunit.js\": [\n\t\t95976,\n\t\t95976\n\t],\n\t\"./swift\": [\n\t\t94635,\n\t\t94635\n\t],\n\t\"./swift.js\": [\n\t\t94635,\n\t\t94635\n\t],\n\t\"./taggerscript\": [\n\t\t98199,\n\t\t98199\n\t],\n\t\"./taggerscript.js\": [\n\t\t98199,\n\t\t98199\n\t],\n\t\"./tap\": [\n\t\t58713,\n\t\t58713\n\t],\n\t\"./tap.js\": [\n\t\t58713,\n\t\t58713\n\t],\n\t\"./tcl\": [\n\t\t41519,\n\t\t41519\n\t],\n\t\"./tcl.js\": [\n\t\t41519,\n\t\t41519\n\t],\n\t\"./thrift\": [\n\t\t45449,\n\t\t45449\n\t],\n\t\"./thrift.js\": [\n\t\t45449,\n\t\t45449\n\t],\n\t\"./tp\": [\n\t\t88454,\n\t\t88454\n\t],\n\t\"./tp.js\": [\n\t\t88454,\n\t\t88454\n\t],\n\t\"./twig\": [\n\t\t23195,\n\t\t23195\n\t],\n\t\"./twig.js\": [\n\t\t23195,\n\t\t23195\n\t],\n\t\"./typescript\": [\n\t\t62825,\n\t\t62825\n\t],\n\t\"./typescript.js\": [\n\t\t62825,\n\t\t62825\n\t],\n\t\"./vala\": [\n\t\t55320,\n\t\t55320\n\t],\n\t\"./vala.js\": [\n\t\t55320,\n\t\t55320\n\t],\n\t\"./vbnet\": [\n\t\t50959,\n\t\t50959\n\t],\n\t\"./vbnet.js\": [\n\t\t50959,\n\t\t50959\n\t],\n\t\"./vbscript\": [\n\t\t4893,\n\t\t4893\n\t],\n\t\"./vbscript-html\": [\n\t\t88103,\n\t\t88103\n\t],\n\t\"./vbscript-html.js\": [\n\t\t88103,\n\t\t88103\n\t],\n\t\"./vbscript.js\": [\n\t\t4893,\n\t\t4893\n\t],\n\t\"./verilog\": [\n\t\t57522,\n\t\t57522\n\t],\n\t\"./verilog.js\": [\n\t\t57522,\n\t\t57522\n\t],\n\t\"./vhdl\": [\n\t\t37492,\n\t\t37492\n\t],\n\t\"./vhdl.js\": [\n\t\t37492,\n\t\t37492\n\t],\n\t\"./vim\": [\n\t\t1192,\n\t\t1192\n\t],\n\t\"./vim.js\": [\n\t\t1192,\n\t\t1192\n\t],\n\t\"./x86asm\": [\n\t\t53447,\n\t\t53447\n\t],\n\t\"./x86asm.js\": [\n\t\t53447,\n\t\t53447\n\t],\n\t\"./xl\": [\n\t\t15790,\n\t\t15790\n\t],\n\t\"./xl.js\": [\n\t\t15790,\n\t\t15790\n\t],\n\t\"./xml\": [\n\t\t17285,\n\t\t17285\n\t],\n\t\"./xml.js\": [\n\t\t17285,\n\t\t17285\n\t],\n\t\"./xquery\": [\n\t\t78130,\n\t\t78130\n\t],\n\t\"./xquery.js\": [\n\t\t78130,\n\t\t78130\n\t],\n\t\"./yaml\": [\n\t\t17533,\n\t\t17533\n\t],\n\t\"./yaml.js\": [\n\t\t17533,\n\t\t17533\n\t],\n\t\"./zephir\": [\n\t\t57204,\n\t\t57204\n\t],\n\t\"./zephir.js\": [\n\t\t57204,\n\t\t57204\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 32908;\nmodule.exports = webpackAsyncContext;","/**\n * Get a universally unique id (uuid).\n *\n * @returns {String} - The uuid.\n */\nconst create_uuid = () => {\n    let uuid;\n    if (window.crypto.randomUUID) {\n        // Create a real UUID\n        // window.crypto.randomUUID does only exist in browsers with secure\n        // context.\n        // See: https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID\n        uuid = window.crypto.randomUUID();\n    } else {\n        // Create a sufficiently unique ID\n        const array = new Uint32Array(4);\n        uuid = window.crypto.getRandomValues(array).join(\"\");\n    }\n    return uuid;\n};\nexport default create_uuid;\n","import $ from \"jquery\";\nimport dom from \"./dom\";\n\nconst _MS_PER_DAY = 1000 * 60 * 60 * 24; // Milliseconds per day.\n\n$.fn.safeClone = function () {\n    var $clone = this.clone();\n    return $clone;\n};\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.18\n// Reference: http://es5.github.io/#x15.4.4.18\nif (!Array.prototype.forEach) {\n    Array.prototype.forEach = function (callback, thisArg) {\n        var T, k;\n        if (this === null) {\n            throw new TypeError(\" this is null or not defined\");\n        }\n        // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n        var O = Object(this);\n        // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\n        // 3. Let len be ToUint32(lenValue).\n        var len = O.length >>> 0;\n        // 4. If IsCallable(callback) is false, throw a TypeError exception.\n        // See: http://es5.github.com/#x9.11\n        if (typeof callback !== \"function\") {\n            throw new TypeError(callback + \" is not a function\");\n        }\n        // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\n        if (arguments.length > 1) {\n            T = thisArg;\n        }\n        // 6. Let k be 0\n        k = 0;\n        // 7. Repeat, while k < len\n        while (k < len) {\n            var kValue;\n            // a. Let Pk be ToString(k).\n            //   This is implicit for LHS operands of the in operator\n            // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\n            //   This step can be combined with c\n            // c. If kPresent is true, then\n            if (k in O) {\n                // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\n                kValue = O[k];\n                // ii. Call the Call internal method of callback with T as the this value and\n                // argument list containing kValue, k, and O.\n                callback.call(T, kValue, k, O);\n            }\n            // d. Increase k by 1.\n            k++;\n        }\n        // 8. return undefined\n    };\n}\n\nvar singleBoundJQueryPlugin = function (pattern, method, options) {\n    /* This is a jQuery plugin for patterns which are invoked ONCE FOR EACH\n     * matched element in the DOM.\n     *\n     * This is how the Mockup-type patterns behave. They are constructor\n     * functions which need to be invoked once per jQuery-wrapped DOM node\n     * for all DOM nodes on which the pattern applies.\n     */\n    var $this = this;\n    $this.each(function () {\n        var pat,\n            $el = $(this);\n        pat = pattern.init($el, options);\n        if (method) {\n            if (pat[method] === undefined) {\n                $.error(\n                    \"Method \" + method + \" does not exist on jQuery.\" + pattern.name\n                );\n                return false;\n            }\n            if (method.charAt(0) === \"_\") {\n                $.error(\"Method \" + method + \" is private on jQuery.\" + pattern.name);\n                return false;\n            }\n            pat[method].apply(pat, [options]);\n        }\n    });\n    return $this;\n};\n\nvar pluralBoundJQueryPlugin = function (pattern, method, options) {\n    /* This is a jQuery plugin for patterns which are invoked ONCE FOR ALL\n     * matched elements in the DOM.\n     *\n     * This is how the vanilla Patternslib-type patterns behave. They are\n     * simple objects with an init method and this method gets called once\n     * with a list of jQuery-wrapped DOM nodes on which the pattern\n     * applies.\n     */\n    var $this = this;\n    if (method) {\n        if (pattern[method]) {\n            return pattern[method].apply($this, [$this].concat([options]));\n        } else {\n            $.error(\"Method \" + method + \" does not exist on jQuery.\" + pattern.name);\n        }\n    } else {\n        pattern.init.apply($this, [$this].concat([options]));\n    }\n    return $this;\n};\n\nvar jqueryPlugin = function (pattern) {\n    return function (method, options) {\n        var $this = this;\n        if ($this.length === 0) {\n            return $this;\n        }\n        if (typeof method === \"object\") {\n            options = method;\n            method = undefined;\n        }\n        if (typeof pattern === \"function\") {\n            return singleBoundJQueryPlugin.call(this, pattern, method, options);\n        } else {\n            return pluralBoundJQueryPlugin.call(this, pattern, method, options);\n        }\n    };\n};\n\n// Is a given variable an object?\nfunction isObject(obj) {\n    var type = typeof obj;\n    return type === \"function\" || (type === \"object\" && !!obj);\n}\n\n// Extend a given object with all the properties in passed-in object(s).\nfunction extend(obj) {\n    if (!isObject(obj)) return obj;\n    var source, prop;\n    for (var i = 1, length = arguments.length; i < length; i++) {\n        source = arguments[i];\n        for (prop in source) {\n            if (hasOwnProperty.call(source, prop)) {\n                obj[prop] = source[prop];\n            }\n        }\n    }\n    return obj;\n}\n// END: Taken from Underscore.js until here.\n\nfunction findLabel(input) {\n    var $label;\n    for (\n        var label = input.parentNode;\n        label && label.nodeType !== 11;\n        label = label.parentNode\n    ) {\n        if (label.tagName === \"LABEL\") {\n            return label;\n        }\n    }\n    if (input.id) {\n        $label = $('label[for=\"' + input.id + '\"]');\n    }\n    if ($label && $label.length === 0 && input.form) {\n        $label = $('label[for=\"' + input.name + '\"]', input.form);\n    }\n    if ($label && $label.length) {\n        return $label[0];\n    } else {\n        return null;\n    }\n}\n\n// Taken from http://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\nfunction escapeRegExp(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n}\n\n/**\n * Create a RegExp object of a wildcard search string.\n *\n * @param {string} wildcard: A search string which can contain wildcards \"*\".\n *                           The wildcard \"*\" can be anywhere in the string and\n *                           can also be used multiple times. If no wildcard is\n *                           present the search string is used for an exact match.\n\n * @returns {RegExp}: A RegExp object which can be used to match strings.\n */\nfunction regexp_from_wildcard(wildcard) {\n    let regexp = wildcard.replace(/[\\-\\[\\]{}()+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\n    regexp = regexp.replace(/[*]/g, \".*\");\n    regexp = new RegExp(`^${regexp}$`);\n    return regexp;\n}\n\n/**\n * Remove classes from a list of targets if they match a specific pattern.\n *\n * @param {Node, NodeList} targets: Dom Node or NodeList where the classes should be removed.\n * @param {string} classes: String matching classes to be removed.\n *                          You can add a \"*\" as wildcard to search for classes to be removed.\n *                          E.g. \"icon-*-alert\" to remove any of \"icon-1-alert icon-2-alert\".\n *\n * @returns {undefined}: This method directly operates on the targets.\n */\nfunction removeWildcardClass(targets, classes) {\n    targets = utils.ensureArray(targets);\n\n    if (classes.indexOf(\"*\") === -1) {\n        for (const target of targets) {\n            target.classList.remove(classes);\n        }\n    } else {\n        const matcher = regexp_from_wildcard(classes);\n        for (const target of targets) {\n            const class_list = (target.getAttribute(\"class\") || \"\").split(/\\s+/);\n            if (!class_list.length) {\n                continue;\n            }\n            const ok = class_list.filter((it) => !matcher.test(it));\n            if (ok.length) {\n                target.setAttribute(\"class\", ok.join(\" \"));\n            } else {\n                target.removeAttribute(\"class\");\n            }\n        }\n    }\n}\n\nfunction hasValue(el) {\n    if (el.tagName === \"INPUT\") {\n        if (el.type === \"checkbox\" || el.type === \"radio\") {\n            return el.checked;\n        }\n        return el.value !== \"\";\n    }\n    if (el.tagName === \"SELECT\") {\n        return el.selectedIndex !== -1;\n    }\n    if (el.tagName === \"TEXTAREA\") {\n        return el.value !== \"\";\n    }\n    return false;\n}\n\nconst hideOrShow = (nodes, visible, options, pattern_name) => {\n    nodes = dom.toNodeArray(nodes);\n\n    const transitions = {\n        none: { hide: \"hide\", show: \"show\" },\n        fade: { hide: \"fadeOut\", show: \"fadeIn\" },\n        slide: { hide: \"slideUp\", show: \"slideDown\" },\n    };\n\n    const duration =\n        options.transition === \"css\" || options.transition === \"none\"\n            ? null\n            : options.effect.duration;\n\n    const on_complete = (el) => {\n        el.classList.remove(\"in-progress\");\n        el.classList.add(visible ? \"visible\" : \"hidden\");\n        $(el).trigger(\"pat-update\", {\n            pattern: pattern_name,\n            action: \"attribute-changed\",\n            dom: el,\n            transition: \"complete\",\n        });\n    };\n\n    for (const el of nodes) {\n        el.classList.remove(\"visible\");\n        el.classList.remove(\"hidden\");\n        el.classList.remove(\"in-progress\");\n\n        if (duration) {\n            const t = transitions[options.transition];\n            el.classList.add(\"in-progress\");\n            $(el).trigger(\"pat-update\", {\n                pattern: pattern_name,\n                action: \"attribute-changed\",\n                dom: el,\n                transition: \"start\",\n            });\n            $(el)[visible ? t.show : t.hide]({\n                duration: duration,\n                easing: options.effect.easing,\n                complete: () => on_complete(el),\n            });\n        } else {\n            if (options.transition !== \"css\") {\n                dom[visible ? \"show\" : \"hide\"](el);\n            }\n            on_complete(el);\n        }\n    }\n};\n\nfunction addURLQueryParameter(fullURL, param, value) {\n    /* Using a positive lookahead (?=\\=) to find the given parameter,\n     * preceded by a ? or &, and followed by a = with a value after\n     * than (using a non-greedy selector) and then followed by\n     * a & or the end of the string.\n     *\n     * Taken from http://stackoverflow.com/questions/7640270/adding-modify-query-string-get-variables-in-a-url-with-javascript\n     */\n    var val = new RegExp(\"(\\\\?|\\\\&)\" + param + \"=.*?(?=(&|$))\"),\n        parts = fullURL.toString().split(\"#\"),\n        url = parts[0],\n        hash = parts[1],\n        qstring = /\\?.+$/,\n        newURL = url;\n    // Check if the parameter exists\n    if (val.test(url)) {\n        // if it does, replace it, using the captured group\n        // to determine & or ? at the beginning\n        newURL = url.replace(val, \"$1\" + param + \"=\" + value);\n    } else if (qstring.test(url)) {\n        // otherwise, if there is a query string at all\n        // add the param to the end of it\n        newURL = url + \"&\" + param + \"=\" + value;\n    } else {\n        // if there's no query string, add one\n        newURL = url + \"?\" + param + \"=\" + value;\n    }\n    if (hash) {\n        newURL += \"#\" + hash;\n    }\n    return newURL;\n}\n\nfunction removeDuplicateObjects(objs) {\n    /* Given an array of objects, remove any duplicate objects which might\n     * be present.\n     */\n    const comparator = function (k, v) {\n        return this[k] === v;\n    };\n\n    return objs.reduce(function (list, next_obj) {\n        let is_duplicate = false;\n        for (const obj of list) {\n            is_duplicate =\n                Object.keys(obj).length === Object.keys(next_obj).length &&\n                Object.entries(obj).filter(\n                    (it) => !comparator.bind(next_obj)(it[0], it[1])\n                ).length === 0;\n        }\n        if (!is_duplicate) {\n            list.push(next_obj);\n        }\n        return list;\n    }, []);\n}\n\nfunction mergeStack(stack, length) {\n    /* Given a list of lists of objects (which for brevity we call a stack),\n     * return a list of objects where each object is the merge of all the\n     * corresponding original objects at that particular index.\n     *\n     * If a certain sub-list doesn't have an object at that particular\n     * index, the last object in that list is merged.\n     */\n    const results = [];\n    for (let i = 0; i < length; i++) {\n        results.push({});\n    }\n    for (const frame of stack) {\n        const frame_length = frame.length - 1;\n        for (let x = 0; x < length; x++) {\n            results[x] = $.extend(\n                results[x] || {},\n                frame[x > frame_length ? frame_length : x]\n            );\n        }\n    }\n    return results;\n}\n\nfunction isElementInViewport(el, partial = false, offset = 0) {\n    /* returns true if element is visible to the user ie. is in the viewport.\n     * Setting partial parameter to true, will only check if a part of the element is visible\n     * in the viewport, specifically that some part of that element is touching the top part\n     * of the viewport. This only applies to the vertical direction, ie. doesnt check partial\n     * visibility for horizontal scrolling\n     * some code taken from:\n     * http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport/7557433#7557433\n     */\n    if (el instanceof $) {\n        el = el[0];\n    }\n\n    const rec = el.getBoundingClientRect();\n    const rec_values = [rec.top, rec.bottom, rec.left, rec.right];\n\n    if (rec_values.every((val) => val === 0)) {\n        // if every property of rec is 0, the element is invisible;\n        return false;\n    } else if (partial) {\n        // when using getBoundingClientRect() (in the vertical case)\n        // negative means above top of viewport, positive means below top of viewport\n        // therefore for part of the element to be touching or crossing the top of the viewport\n        // rec.top must <= 0 and rec.bottom must >= 0\n        // an optional tolerance offset can be added for when the desired element is not exactly\n        // toucing the top of the viewport but needs to be considered as touching.\n        return (\n            rec.top <= 0 + offset && rec.bottom >= 0 + offset\n            //(rec.top >= 0+offset && rec.top <= window.innerHeight) // this checks if the element\n            // touches bottom part of viewport\n            // XXX do we want to include a check for the padding of an element?\n            // using window.getComputedStyle(target).paddingTop\n        );\n    } else {\n        // this will return true if the entire element is completely in the viewport\n        return (\n            rec.top >= 0 &&\n            rec.left >= 0 &&\n            rec.bottom <=\n                (window.innerHeight || document.documentElement.clientHeight) &&\n            rec.right <= (window.innerWidth || document.documentElement.clientWidth)\n        );\n    }\n}\n\n/* parseTime - Parse a duration from a string and return the parsed time in milliseconds.\n *\n * @param {String} time - A duration/time string like ``1ms``, ``1s`` or ``1m``.\n *\n * @returns {Number} - A integer which represents the parsed time in milliseconds.\n */\nfunction parseTime(time) {\n    var m = /^(\\d+(?:\\.\\d+)?)\\s*(\\w*)/.exec(time);\n    if (!m) {\n        throw new Error(\"Invalid time\");\n    }\n    var amount = parseFloat(m[1]);\n    switch (m[2]) {\n        case \"s\":\n            return Math.round(amount * 1000);\n        case \"m\":\n            return Math.round(amount * 1000 * 60);\n        case \"ms\":\n        default:\n            return Math.round(amount);\n    }\n}\n\n/*\n\n * parseLength - Parse a length from a string and return the parsed length in\n * pixels.\n\n * @param {String} length - A length string like `1px` or `25%`. Lengths without a unit are treated as pixels.\n * @param {Number} reference_length - The reference length to use for percentage lengths.\n *\n * @returns {Number} - A integer which represents the parsed length in pixels.\n *\n * @throws {Error} - If the length string is invalid.\n *\n * @example\n * parseLength(\"1px\"); // 1\n * parseLength(\"10%\", 100); // 10\n *\n */\nfunction parseLength(length, reference_length = null) {\n    const m = /^(\\d+(?:\\.\\d+)?)\\s*(\\%?\\w*)/.exec(length);\n    if (!m) {\n        throw new Error(\"Invalid length\");\n    }\n    const amount = parseFloat(m[1]);\n    switch (m[2]) {\n        case \"px\":\n            return Math.round(amount);\n        case \"%\":\n            if (!reference_length) {\n                return 0;\n            }\n            return (reference_length / 100) * Math.round(amount);\n        case \"vw\":\n            return Math.round((amount * window.innerWidth) / 100);\n        case \"vh\":\n            return Math.round((amount * window.innerHeight) / 100);\n        case \"vmin\":\n            return Math.round(\n                (amount * Math.min(window.innerWidth, window.innerHeight)) / 100\n            );\n        case \"vmax\":\n            return Math.round(\n                (amount * Math.max(window.innerWidth, window.innerHeight)) / 100\n            );\n        default:\n            return Math.round(amount);\n    }\n}\n\n// Return a jQuery object with elements related to an input element.\nfunction findRelatives(el) {\n    var $el = $(el),\n        $relatives = $(el),\n        $label = $();\n\n    $relatives = $relatives.add($el.closest(\"label\"));\n    $relatives = $relatives.add($el.closest(\"fieldset\"));\n\n    if (el.id) $label = $(\"label[for='\" + el.id + \"']\");\n    if (!$label.length) {\n        var $form = $el.closest(\"form\");\n        if (!$form.length) $form = $(document.body);\n        $label = $form.find(\"label[for='\" + el.name + \"']\");\n    }\n    $relatives = $relatives.add($label);\n    return $relatives;\n}\n\nfunction get_bounds(el) {\n    // Return bounds of an element with it's values rounded and converted to ints.\n    const bounds = el.getBoundingClientRect();\n    return {\n        x: parseInt(Math.round(bounds.x), 10) || 0,\n        y: parseInt(Math.round(bounds.y), 10) || 0,\n        top: parseInt(Math.round(bounds.top), 10) || 0,\n        bottom: parseInt(Math.round(bounds.bottom), 10) || 0,\n        left: parseInt(Math.round(bounds.left), 10) || 0,\n        right: parseInt(Math.round(bounds.right), 10) || 0,\n        width: parseInt(Math.round(bounds.width), 10) || 0,\n        height: parseInt(Math.round(bounds.height), 10) || 0,\n    };\n}\n\nfunction checkInputSupport(type, invalid_value) {\n    /* Check input type support.\n     *  See: https://stackoverflow.com/a/10199306/1337474\n     */\n    let support = false;\n    const input = document.createElement(\"input\");\n    input.setAttribute(\"type\", type);\n    support = input.type == type;\n\n    if (invalid_value !== undefined) {\n        // Check for input type UI support\n        input.setAttribute(\"value\", invalid_value);\n        support = input.value !== invalid_value;\n    }\n    return support;\n}\n\nconst checkCSSFeature = (attribute, value, tag = \"div\") => {\n    /* Check for browser support of specific CSS feature.\n     */\n    tag = document.createElement(tag);\n    let supported = tag.style[attribute] !== undefined;\n    if (supported && value !== undefined) {\n        tag.style[attribute] = value;\n        supported = tag.style[attribute] === value;\n    }\n    return supported;\n};\n\nconst animation_frame = () => {\n    // Return promise to await next repaint cycle\n    // Use it in your async function like so: ``await utils.animation_frame()``\n    // From: http://www.albertlobo.com/fractals/async-await-requestanimationframe-buddhabrot\n    return new Promise(window.requestAnimationFrame);\n};\n\nconst timeout = (ms) => {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n};\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds.\n * From: https://underscorejs.org/#debounce\n *\n * @param {Function} func - The function to debounce.\n * @param {Number} ms - The time in milliseconds to debounce.\n * @param {Object} timer - A module-global timer as an object.\n * @param {Boolean} [postpone=true] - If true, the function will only be called\n * at the end, after it stops being called for N milliseconds. If false, the\n * function will be called no more than each [ms] milliseconds, ensuring that\n * the function isn't postponed for for too long.\n *\n * @returns {Function} - The debounced function.\n */\nconst debounce = (func, ms, timer = { timer: null }, postpone = true) => {\n    // Returns a function, that, as long as it continues to be invoked, will not\n    // be triggered. The function will be called after it stops being called for\n    // N milliseconds.\n    // From: https://underscorejs.org/#debounce\n    //\n    // Make sure to initialize ``debounce`` only once per to-be-debounced\n    // function to not reinitialize the timer each time and debounce not being\n    // able to cancel previouse runs.\n    //\n    // Pass a module-global timer as an object ``{ timer: null }`` if you want\n    // to also cancel debounced functions from other pattern-invocations.\n    timer.last_run = 0;\n    return function () {\n        const args = arguments;\n        if (!postpone && timer.timer && Date.now() - timer.last_run <= ms) {\n            return;\n        }\n        clearTimeout(timer.timer);\n        timer.last_run = Date.now();\n        timer.timer = setTimeout(() => {\n            func.apply(this, args);\n        }, ms);\n    };\n};\n\n// TODO: Remove in next major release.\nconst isIE = () => {\n    // See: https://stackoverflow.com/a/9851769/1337474\n    // Internet Explorer 6-11\n    // eslint-disable-next-line no-constant-binary-expression\n    return /*@cc_on!@*/false || !!document.documentMode;\n};\n\nconst jqToNode = (el) => {\n    // Return a DOM node if a jQuery node was passed.\n    if (el.jquery) {\n        el = el[0];\n    }\n    return el;\n};\n\n/**\n * Always return an iterable object.\n *\n * @param {any} it: The object which needs to be wrapped in an array or returned as is if it is iterable.\n * @param {boolean} force_array: If the object is iterable but not an Array, convert it to an array (e.g. For jQuery items or NodeList objects).\n *\n * @returns {Array}: Returns the object wrapped in an Array, expanded to an Array or as-is if it is already iterable.\n */\nconst ensureArray = (it, force_array) => {\n    // Ensure to return always an array\n    const array_like = !!(\n        NodeList.prototype.isPrototypeOf(it) || // eslint-disable-line no-prototype-builtins\n        Array.isArray(it) ||\n        it.jquery\n    );\n    return array_like ? (force_array ? [...it] : it) : [it];\n};\n\nconst localized_isodate = (date) => {\n    // Return a iso date (date only) in the current timezone instead of a\n    // UTC ISO 8601 date+time component which toISOString returns.\n\n    const day = date.getDate().toString().padStart(2, \"0\");\n    const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n    const year = date.getFullYear().toString();\n\n    return `${year}-${month}-${day}`;\n};\n\n/**\n * Replace HTML reserved characters with html entities to add HTML for user\n * editing to e.g. a textarea or a contenteditable.\n *\n * See:\n *  https://stackoverflow.com/a/22706073/1337474\n *  https://developer.mozilla.org/en-US/docs/Glossary/Entity#reserved_characters\n *\n * @param {string} html - The HTML string to encode.\n *\n * @returns {string} - Returns the escaped html string:\n *                     ``&`` will be replaced with ``&amp;``.\n *                     ``<`` will be repalced with ``&lt;``,\n *                     ``>`` will be replaced with ``&gt;``,\n *                     ``\"`` will be replaced with ``&quot;``.\n */\nconst escape_html = (html) => {\n    if (!html) {\n        return \"\";\n    }\n    const el = document.createElement(\"div\");\n    el.appendChild(document.createTextNode(html));\n    // Return escaped html and also replace quotes.\n    return el.innerHTML.replace(/\"/g, \"&quot;\");\n};\n\n/**\n * Return unescaped, raw HTML from an escaped HTML  string.\n *\n * See:\n *  https://stackoverflow.com/a/34064434/1337474\n *  https://developer.mozilla.org/en-US/docs/Glossary/Entity#reserved_characters\n *\n * @param {string} escaped_html - The HTML string to decode.\n *\n * @returns {string} - Returns the escaped html string:\n *                     ``&amp;`` will be replaced with ``&``,\n *                     ``&lt;`` will be repalced with ``<``,\n *                     ``&gt;`` will be replaced with ``>``,\n *                     ``&quot;`` will be replaced with ``\"``.\n */\nconst unescape_html = (escaped_html) => {\n    if (!escaped_html) {\n        return \"\";\n    }\n    const doc = new DOMParser().parseFromString(escaped_html, \"text/html\");\n    // Return unescaped html and also unescape quote named entities.\n    return doc.documentElement.textContent.replace(/&quot;/g, '\"');\n};\n\n/**\n * Return true, if the given value is a valid ISO 8601 date/time string with or without an optional time component.\n *\n * @param {String} value - The date/time value to be checked.\n * @param {Boolean} [optional_time=false] - True, if time component is optional.\n * @return {Boolean} - True, if the given value is a valid Date string. False if not.\n */\nconst is_iso_date_time = (value, optional_time = false) => {\n    const re_date_time = optional_time\n        ? /^\\d{4}-[01]\\d-[0-3]\\d(T[0-2]\\d:[0-5]\\d)?$/\n        : /^\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d$/;\n    return re_date_time.test(value);\n};\n\n/**\n * Return true, if the given value is a valid ISO 8601 date string and without a time component.\n *\n * @param {String} value - The date value to be checked.\n * @return {Boolean} - True, if the given value is a valid ISO 8601 date string without a time component. False if not.\n */\nconst is_iso_date = (value) => {\n    const re_date_time = /^\\d{4}-[01]\\d-[0-3]\\d$/;\n    return re_date_time.test(value);\n};\n\n/**\n * Return the number of days between two dates.\n * Based on: https://stackoverflow.com/a/15289883/1337474\n *\n * @param {Date} date_1 - First date to compare. We will substract date_2 from date_1.\n * @param {Date} date_2 - Second date to compare.\n * @return {Number} - The number of days between the two dates.\n */\nconst date_diff = (date_1, date_2) => {\n    // Discard the time and time-zone information.\n    const utc_1 = Date.UTC(date_1.getFullYear(), date_1.getMonth(), date_1.getDate());\n    const utc_2 = Date.UTC(date_2.getFullYear(), date_2.getMonth(), date_2.getDate());\n\n    return Math.floor((utc_1 - utc_2) / _MS_PER_DAY);\n};\n\n/**\n * Build intersection observer threshold list.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#building_the_array_of_threshold_ratios\n *\n * @param {Number} num_steps - The number of steps to use.\n *\n * @returns {Array} - Returns the threshold list.\n */\nconst threshold_list = (num_steps = 0) => {\n    let thresholds = [];\n\n    for (let i = 1.0; i <= num_steps; i++) {\n        thresholds.push(i / num_steps);\n    }\n    thresholds.push(0);\n    return thresholds.sort();\n};\n\n/**\n * is_option_truthy - Check if an Pattern option is set.\n *\n * An option is set if it is not one of:\n * - undefined\n * - null\n * - \"none\"\n * - \"\"\n *\n * @param {String} option - The option to check.\n *\n * @returns {Boolean} - Returns true if the option is set, false otherwise.\n *\n * @example\n *\n * is_option_truthy() // false\n * is_option_truthy(undefined) // false\n * is_option_truthy(null) // false\n * is_option_truthy(\"\") // false\n * is_option_truthy(\"none\") // false\n * is_option_truthy(\"false\") // false\n * is_option_truthy(\"foo\") // true\n * is_option_truthy(true) // true\n * is_option_truthy(0) // true\n *\n */\nconst is_option_truthy = (option) => {\n    return ![undefined, null, \"none\", false, \"false\", \"\"].includes(option);\n};\n\nvar utils = {\n    jqueryPlugin: jqueryPlugin,\n    escapeRegExp: escapeRegExp,\n    isObject: isObject,\n    extend: extend,\n    findLabel: findLabel,\n    regexp_from_wildcard: regexp_from_wildcard,\n    removeWildcardClass: removeWildcardClass,\n    hideOrShow: hideOrShow,\n    addURLQueryParameter: addURLQueryParameter,\n    removeDuplicateObjects: removeDuplicateObjects,\n    mergeStack: mergeStack,\n    isElementInViewport: isElementInViewport,\n    hasValue: hasValue,\n    parseTime: parseTime,\n    parseLength: parseLength,\n    findRelatives: findRelatives,\n    get_bounds: get_bounds,\n    checkInputSupport: checkInputSupport,\n    checkCSSFeature: checkCSSFeature,\n    animation_frame: animation_frame,\n    timeout: timeout,\n    debounce: debounce,\n    isIE: isIE,\n    jqToNode: jqToNode,\n    ensureArray: ensureArray,\n    localized_isodate: localized_isodate,\n    escape_html: escape_html,\n    unescape_html: unescape_html,\n    is_iso_date_time: is_iso_date_time,\n    is_iso_date: is_iso_date,\n    date_diff: date_diff,\n    threshold_list: threshold_list,\n    is_option_truthy: is_option_truthy,\n    //getCSSValue: dom.get_css_value, // BBB: moved to dom. TODO: Remove in upcoming version.\n    elementInViewport: (el) => {\n        // BBB: Remove with next major version.\n        console.warn(\"Deprecated. Use utils.isElementInViewport\");\n        return isElementInViewport(el);\n    },\n};\n\nexport default utils;\n","import Base from \"../../core/base\";\nimport events from \"../../core/events\";\nimport utils from \"../../core/utils\";\n\nexport default Base.extend({\n    name: \"close-panel\",\n    trigger: \".close-panel\",\n\n    init() {\n        // Close panel support for dialog panels\n        // Other modals are handled in pat-modal.\n        const dialog_panel = this.el.closest(\"dialog\");\n        if (dialog_panel) {\n            events.add_event_listener(\n                dialog_panel,\n                \"close-panel\",\n                \"close-panel--dialog\",\n                () => {\n                    dialog_panel.close();\n                }\n            );\n        }\n\n        this.el.addEventListener(\"click\", async (e) => {\n            await utils.timeout(0); // Wait for other patterns, like pat-validation.\n\n            if (\n                e.target.matches(\":not([formnovalidate])\") &&\n                e.target.matches(\"[type=submit], button:not([type=button])\") &&\n                this.el.closest(\"form\")?.checkValidity() === false\n            ) {\n                // Prevent closing an invalid form when submitting.\n                return;\n            }\n\n            this.el.dispatchEvent(\n                new Event(\"close-panel\", { bubbles: true, cancelable: true })\n            );\n        });\n    },\n});\n","/**\n * Patterns Push Kit - client to support websocket connection push\n *\n * Copyright 2018-2020 Johannes Raggam, Alexander Pilz, Syslab.com GmbH\n *\n * Basic push support connects to a push server and an exchange prefix.\n * it reads the name of the server and the exchange prefix from entries\n * in the meta header of the page\n * Then it sets up two bindings to two different exchanges, one to receive\n * push markers and one to receive desktop notifications.\n * It assumes that the exchanges are named [prefix]_event and [prefix]_notification\n *\n * If a message comes in on the [prefix]_event exchange, a javascript push event is triggered\n * which is listened to by all dom elements with class .pat-push on them.\n * pat-push will then compare the sent message with its own push_marker value and execute on match.\n *\n * If a message comes in on the [prefix]_notification exchange, a desktop notification is triggered\n * which will show a desktop marker.\n *\n * User filtering\n * all subscriptions are topic subscriptions and will only bind to topics that start with the userid\n * that way, users will only receive updates explicitly directed to them.\n *\n * This pattern expects the following meta tags to be available in the page to get the necessary configuration\n * - patterns-push-url containing a url pointing to a message queue server. Eg. ws://127.0.0.1:15674/ws\n * - patterns-push-exchange containing the exchange nanem to subscribe to.\n * - patterns-push-filter containing a topic filter including dot-seperated namespaces and wildcards. A commonly used filter value would be the currently logged in user. This will subscribe only to updates for this specific user.\n * - patterns-push-login containing the name of a read only user on the message queue server used to connect.\n * - patterns-push-password containing the password of a read only user on the message queue server used to connect.\n */\nimport logging from \"./logging\";\n\nconst logger = logging.getLogger(\"core push kit\");\n\nconst push_kit = {\n    async init() {\n        const url = document.querySelector(\"meta[name=patterns-push-url]\")?.content;\n        const exchange = document.querySelector(\"meta[name=patterns-push-exchange]\")?.content; // prettier-ignore\n\n        if (!url || !exchange) {\n            return;\n        }\n\n        const topicfilter = document.querySelector(\"meta[name=patterns-push-filter]\")?.content; // prettier-ignore\n        const user_login = document.querySelector(\"meta[name=patterns-push-login]\")?.content; // prettier-ignore\n        const user_pass = document.querySelector(\"meta[name=patterns-push-password]\")?.content; // prettier-ignore\n\n        const StompJS = await import(\"@stomp/stompjs\");\n        const client = new StompJS.Client({\n            brokerURL: url,\n            connectHeaders: {\n                login: user_login,\n                passcode: user_pass,\n            },\n            debug: function (str) {\n                logger.debug(str);\n            },\n            reconnectDelay: 5000,\n            heartbeatIncoming: 0,\n            heartbeatOutgoing: 20000,\n        });\n\n        client.onConnect = () => {\n            if (exchange) {\n                client.subscribe(\n                    `/exchange/${exchange}/${topicfilter}.#`,\n                    this.on_push_marker.bind(this)\n                );\n            }\n        };\n\n        client.onStompError = (frame) => {\n            logger.error(\"Broker reported error: \" + frame.headers[\"message\"]);\n            logger.debug(\"Additional details: \" + frame.body);\n        };\n\n        client.activate();\n        logger.debug(\"StompJS push support initialised on \" + url);\n    },\n\n    on_push_marker(message) {\n        logger.debug(\"Received push marker: \", message);\n        if (!message || !message.body) {\n            return;\n        }\n        document.body.dispatchEvent(\n            new CustomEvent(\"push\", { detail: { body: message.body } })\n        );\n    },\n};\n\npush_kit.init();\n\nexport default push_kit;\n","/**\n * Patterns ajax - AJAX injection for forms and anchors\n *\n * Copyright 2012-2013 Florian Friesdorf\n * Copyright 2012-2013 Marko Durkovic\n */\nimport \"../../core/polyfills\"; // SubmitEvent.submitter for Safari < 15.4 and jsDOM\nimport $ from \"jquery\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\n\nconst log = logging.getLogger(\"pat.ajax\");\n\nexport const parser = new Parser(\"ajax\");\nparser.addArgument(\"accept\", \"text/html\");\nparser.addArgument(\"url\", function ($el) {\n    const el = $el[0];\n    const value =\n        el.tagName === \"A\"\n            ? el.getAttribute(\"href\")\n            : el.tagName === \"FORM\"\n            ? el.getAttribute(\"action\")\n            : \"\";\n    return (value || \"\").split(\"#\")[0];\n});\nparser.addArgument(\"browser-cache\", \"no-cache\", [\"cache\", \"no-cache\"]); // Cache ajax requests\n\nconst xhrCount = {};\nxhrCount.get = function (a) {\n    return this[a] !== undefined ? this[a] : 0;\n};\nxhrCount.inc = function (a) {\n    this[a] = this.get(a) + 1;\n    return this.get(a);\n};\n\nconst _ = {\n    name: \"ajax\",\n    trigger: \".pat-ajax\",\n    parser: parser,\n\n    init($el) {\n        $el.off(\".pat-ajax\");\n        $el.filter(\"a\").on(\"click.pat-ajax\", _.onTriggerEvents);\n        $el.filter(\"form\")\n            .on(\"submit.pat-ajax\", _.onTriggerEvents)\n            .on(\"click.pat-ajax\", \"[type=submit]\", _.onClickSubmit);\n        $el.filter(\":not(form,a)\").each(function () {\n            log.warn(\"Unsupported element:\", this);\n        });\n        return $el;\n    },\n\n    destroy($el) {\n        $el.off(\".pat-ajax\");\n    },\n\n    onClickSubmit(event) {\n        const el = event.submitter || event.target;\n        const form = el.form;\n        const data = {};\n        if (el.name) {\n            data[el.name] = el.value;\n        }\n        $(form).data(\"pat-ajax.clicked-data\", data);\n    },\n\n    onTriggerEvents(event) {\n        if (event) {\n            event.preventDefault();\n        }\n        _.request($(this));\n    },\n\n    request($el, opts) {\n        return $el.each(function () {\n            _._request($(this), opts);\n        });\n    },\n\n    _request($el, opts) {\n        const cfg = _.parser.parse($el, opts);\n        const onError = function (jqxhr, status, error) {\n            // error can also stem from a javascript\n            // exception, not only errors described in the\n            // jqxhr.\n            log.error(\"load error for \" + cfg.url + \":\", error, jqxhr);\n            $el.trigger({\n                type: \"pat-ajax-error\",\n                jqxhr: jqxhr,\n            });\n        };\n        const seqNumber = xhrCount.inc(cfg.url);\n        const onSuccess = function (data, status, jqxhr) {\n            log.debug(\"success: jqxhr:\", jqxhr);\n            if (seqNumber === xhrCount.get(cfg.url)) {\n                // if this url is requested multiple time, only return the last result\n                $el.trigger({\n                    type: \"pat-ajax-success\",\n                    jqxhr: {\"url\": cfg.url, ...jqxhr},\n                });\n            } else {\n                // ignore\n            }\n        };\n        const temp = $el.data(\"pat-ajax.clicked-data\");\n        const clickedData = temp ? $.param(temp) : \"\";\n        const args = {\n            context: $el,\n            data: [$el.serialize(), clickedData].filter(Boolean).join(\"&\"),\n            headers: {},\n            url: cfg.url,\n            method: $el.attr(\"method\") ? $el.attr(\"method\") : \"GET\",\n            cache: cfg.browserCache === \"cache\" ? true : false,\n        };\n\n        if (cfg.accept) {\n            args.headers.Accept = cfg.accept;\n        }\n\n        if (\n            $el.is(\"form\") &&\n            $el.attr(\"method\") &&\n            $el.attr(\"method\").toUpperCase() == \"POST\"\n        ) {\n            const formdata = new FormData($el[0]);\n            for (const key in temp) {\n                formdata.append(key, temp[key]);\n            }\n            args[\"method\"] = \"POST\";\n            args[\"data\"] = formdata;\n            args[\"cache\"] = false;\n            args[\"contentType\"] = false;\n            args[\"processData\"] = false;\n            args[\"type\"] = \"POST\";\n        }\n\n        $el.removeData(\"pat-ajax.clicked-data\");\n        log.debug(\"request:\", args, $el[0]);\n\n        // Make it happen\n        const ajax_deferred = $.ajax(args);\n\n        if (ajax_deferred) ajax_deferred.done(onSuccess).fail(onError);\n    },\n};\n\nregistry.register(_);\n\nexport default _;\n","/**\n * Patterns autoscale - scale elements to fit available space\n *\n * Copyright 2012 Humberto Sermeno\n * Copyright 2013 Simplon B.V. - Wichert Akkerman\n */\n\nimport $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport utils from \"../../core/utils\";\n\nexport const parser = new Parser(\"auto-scale\");\nparser.addArgument(\"method\", \"scale\", [\"scale\", \"zoom\"]);\nparser.addArgument(\"size\", \"width\", [\"width\", \"height\", \"contain\", \"cover\"]);\nparser.addArgument(\"min-width\", 0);\nparser.addArgument(\"max-width\", 1000000);\nparser.addArgument(\"min-height\", 0);\nparser.addArgument(\"max-height\", 1000000);\n\nexport default Base.extend({\n    name: \"autoscale\",\n    trigger: \".pat-auto-scale\",\n    force_method: null,\n\n    init: function ($el, opts) {\n        this.options = parser.parse(this.$el, opts);\n        if (this.force_method !== null) {\n            this.options.method = this.force_method;\n        }\n        this._setup().scale();\n        return this.$el;\n    },\n\n    _setup: function () {\n        if (!utils.checkCSSFeature(\"zoom\")) {\n            // See https://bugzilla.mozilla.org/show_bug.cgi?id=390936\n            this.force_method = \"scale\";\n        }\n        var scaler = utils.debounce(this.scale.bind(this), 250);\n        $(window).on(\"resize.autoscale\", scaler);\n        $(document).on(\"pat-update.autoscale\", scaler);\n        return this;\n    },\n\n    scale: function () {\n        var available_space, scale, scaled_height, scaled_width, container;\n\n        if (this.$el[0].tagName === \"BODY\") {\n            container = this.$el[0];\n        } else {\n            if (this.$el.closest(\".auto-scale-wrapper\").length != 0) {\n                container = this.$el.closest(\".auto-scale-wrapper\").parent()[0];\n            } else {\n                container = this.$el.parent()[0];\n            }\n        }\n        if (!container) {\n            // Element has not been added to the DOM yet.\n            return;\n        }\n\n        var style = window.getComputedStyle(container);\n        available_space = {\n            width: parseInt(style.width, 10),\n            height: parseInt(style.height, 10),\n        };\n\n        available_space.width = Math.min(available_space.width, this.options.max.width);\n        available_space.width = Math.max(available_space.width, this.options.min.width);\n        available_space.height = Math.min(\n            available_space.height,\n            this.options.max.height\n        );\n        available_space.height = Math.max(\n            available_space.height,\n            this.options.min.height\n        );\n        switch (this.options.size) {\n            case \"width\":\n                scale = available_space.width / this.$el.outerWidth();\n                break;\n            case \"height\":\n                scale = available_space.height / this.$el.outerHeight();\n                break;\n            case \"contain\":\n                // Fit entire content on area, allowing for extra space\n                scale = Math.min(\n                    available_space.width / this.$el.outerWidth(),\n                    available_space.height / this.$el.outerHeight()\n                );\n                break;\n            case \"cover\":\n                // Covert entire area, possible clipping\n                scale = Math.max(\n                    available_space.width / this.$el.outerWidth(),\n                    available_space.height / this.$el.outerHeight()\n                );\n                break;\n            default:\n                return;\n        }\n\n        scaled_height = this.$el.outerHeight() * scale;\n        scaled_width = this.$el.outerWidth() * scale;\n\n        switch (this.options.method) {\n            case \"scale\":\n                this.$el.css(\"transform\", \"scale(\" + scale + \")\");\n                if (\n                    this.$el.parent().attr(\"class\") === undefined ||\n                    (this.$el.parent().attr(\"class\") != undefined &&\n                        $.inArray(\n                            \"auto-scale-wrapper\",\n                            this.$el.parent().attr(\"class\").split(/\\s+/)\n                        ) === -1)\n                ) {\n                    this.$el.wrap(\"<div class='auto-scale-wrapper'></div>\");\n                }\n                this.$el.parent().height(scaled_height).width(scaled_width);\n                break;\n            case \"zoom\":\n                this.$el.css(\"zoom\", scale);\n                break;\n        }\n        this.$el.addClass(\"scaled\");\n        return this;\n    },\n});\n","/**\n * @license\n * Patterns @VERSION@ jquery-ext - various jQuery extensions\n *\n * Copyright 2011 Humberto Sermeño\n */\n\nimport $ from \"jquery\";\n\nvar methods = {\n    init: function (options) {\n        var settings = {\n            time: 3 /* time it will wait before moving to \"timeout\" after a move event */,\n            initialTime: 8 /* time it will wait before first adding the \"timeout\" class */,\n            exceptionAreas: [] /* IDs of elements that, if the mouse is over them, will reset the timer */,\n        };\n        return this.each(function () {\n            var $this = $(this),\n                data = $this.data(\"timeout\");\n\n            if (!data) {\n                if (options) {\n                    $.extend(settings, options);\n                }\n                $this.data(\"timeout\", {\n                    lastEvent: new Date(),\n                    trueTime: settings.time,\n                    time: settings.initialTime,\n                    untouched: true,\n                    inExceptionArea: false,\n                });\n\n                $this.on(\"mouseover.timeout\", methods.mouseMoved);\n                $this.on(\"mouseenter.timeout\", methods.mouseMoved);\n\n                $(settings.exceptionAreas).each(function () {\n                    $this\n                        .find(this)\n                        .live(\n                            \"mouseover.timeout\",\n                            { parent: $this },\n                            methods.enteredException\n                        )\n                        .live(\n                            \"mouseleave.timeout\",\n                            { parent: $this },\n                            methods.leftException\n                        );\n                });\n\n                if (settings.initialTime > 0) $this.timeout(\"startTimer\");\n                else $this.addClass(\"timeout\");\n            }\n        });\n    },\n\n    enteredException: function (event) {\n        var data = event.data.parent.data(\"timeout\");\n        data.inExceptionArea = true;\n        event.data.parent.data(\"timeout\", data);\n        event.data.parent.trigger(\"mouseover\");\n    },\n\n    leftException: function (event) {\n        var data = event.data.parent.data(\"timeout\");\n        data.inExceptionArea = false;\n        event.data.parent.data(\"timeout\", data);\n    },\n\n    destroy: function () {\n        return this.each(function () {\n            var $this = $(this),\n                data = $this.data(\"timeout\");\n\n            $(window).off(\".timeout\");\n            data.timeout.remove();\n            $this.removeData(\"timeout\");\n        });\n    },\n\n    mouseMoved: function () {\n        var $this = $(this),\n            data = $this.data(\"timeout\");\n\n        if ($this.hasClass(\"timeout\")) {\n            $this.removeClass(\"timeout\");\n            $this.timeout(\"startTimer\");\n        } else if (data.untouched) {\n            data.untouched = false;\n            data.time = data.trueTime;\n        }\n\n        data.lastEvent = new Date();\n        $this.data(\"timeout\", data);\n    },\n\n    startTimer: function () {\n        var $this = $(this),\n            data = $this.data(\"timeout\");\n        var fn = function () {\n            var data = $this.data(\"timeout\");\n            if (data && data.lastEvent) {\n                if (data.inExceptionArea) {\n                    setTimeout(fn, Math.floor(data.time * 1000));\n                } else {\n                    var now = new Date();\n                    var diff = Math.floor(data.time * 1000) - (now - data.lastEvent);\n                    if (diff > 0) {\n                        // the timeout has not ocurred, so set the timeout again\n                        setTimeout(fn, diff + 100);\n                    } else {\n                        // timeout ocurred, so set the class\n                        $this.addClass(\"timeout\");\n                    }\n                }\n            }\n        };\n\n        setTimeout(fn, Math.floor(data.time * 1000));\n    },\n};\n\n$.fn.timeout = function (method) {\n    if (methods[method]) {\n        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n    } else if (typeof method === \"object\" || !method) {\n        return methods.init.apply(this, arguments);\n    } else {\n        $.error(\"Method \" + method + \" does not exist on jQuery.timeout\");\n    }\n};\n\n// Custom jQuery selector to find elements with scrollbars\n$.extend($.expr[\":\"], {\n    scrollable: function (element) {\n        var vertically_scrollable, horizontally_scrollable;\n        if (\n            $(element).css(\"overflow\") === \"scroll\" ||\n            $(element).css(\"overflowX\") === \"scroll\" ||\n            $(element).css(\"overflowY\") === \"scroll\"\n        )\n            return true;\n\n        vertically_scrollable =\n            element.clientHeight < element.scrollHeight &&\n            ($.inArray($(element).css(\"overflowY\"), [\"scroll\", \"auto\"]) !== -1 ||\n                $.inArray($(element).css(\"overflow\"), [\"scroll\", \"auto\"]) !== -1);\n\n        if (vertically_scrollable) return true;\n\n        horizontally_scrollable =\n            element.clientWidth < element.scrollWidth &&\n            ($.inArray($(element).css(\"overflowX\"), [\"scroll\", \"auto\"]) !== -1 ||\n                $.inArray($(element).css(\"overflow\"), [\"scroll\", \"auto\"]) !== -1);\n        return horizontally_scrollable;\n    },\n});\n\n// Make Visible in scroll\n$.fn.makeVisibleInScroll = function (parent_id) {\n    var absoluteParent = null;\n    if (typeof parent_id === \"string\") {\n        absoluteParent = $(\"#\" + parent_id);\n    } else if (parent_id) {\n        absoluteParent = $(parent_id);\n    }\n\n    return this.each(function () {\n        var $this = $(this),\n            parent;\n        if (!absoluteParent) {\n            parent = $this.parents(\":scrollable\");\n            if (parent.length > 0) {\n                parent = $(parent[0]);\n            } else {\n                parent = $(window);\n            }\n        } else {\n            parent = absoluteParent;\n        }\n\n        var elemTop = $this.position().top;\n        var elemBottom = $this.height() + elemTop;\n\n        var viewTop = parent.scrollTop();\n        var viewBottom = parent.height() + viewTop;\n\n        if (elemTop < viewTop) {\n            parent.scrollTop(elemTop);\n        } else if (elemBottom > viewBottom - parent.height() / 2) {\n            parent.scrollTop(elemTop - (parent.height() - $this.height()) / 2);\n        }\n    });\n};\n\n//Work around warning for jQuery 3.x:\n//JQMIGRATE: jQuery.fn.offset() requires an element connected to a document\n$.fn.safeOffset = function () {\n    var docElem,\n        elem = this[0],\n        origin = { top: 0, left: 0 };\n\n    if (!elem || !elem.nodeType) {\n        return origin;\n    }\n\n    docElem = (elem.ownerDocument || document).documentElement;\n    if (!$.contains(docElem, elem)) {\n        return origin;\n    }\n\n    return $.fn.offset.apply(this, arguments);\n};\n\n//Make absolute location\n$.fn.setPositionAbsolute = function (element, offsettop, offsetleft) {\n    return this.each(function () {\n        // set absolute location for based on the element passed\n        // dynamically since every browser has different settings\n        var $this = $(this);\n        var thiswidth = $(this).width();\n        var pos = element.safeOffset();\n        var width = element.width();\n        var height = element.height();\n        var setleft = pos.left + width - thiswidth + offsetleft;\n        var settop = pos.top + height + offsettop;\n        $this.css({\n            \"z-index\": 1,\n            \"position\": \"absolute\",\n            \"marginLeft\": 0,\n            \"marginTop\": 0,\n            \"left\": setleft + \"px\",\n            \"top\": settop + \"px\",\n            \"width\": thiswidth,\n        });\n        $this.remove().appendTo(\"body\").show();\n    });\n};\n\n$.fn.positionAncestor = function (selector) {\n    var left = 0;\n    var top = 0;\n    this.each(function () {\n        // check if current element has an ancestor matching a selector\n        // and that ancestor is positioned\n        var $ancestor = $(this).closest(selector);\n        if ($ancestor.length && $ancestor.css(\"position\") !== \"static\") {\n            var $child = $(this);\n            var childMarginEdgeLeft =\n                $child.safeOffset().left - parseInt($child.css(\"marginLeft\"), 10);\n            var childMarginEdgeTop =\n                $child.safeOffset().top - parseInt($child.css(\"marginTop\"), 10);\n            var ancestorPaddingEdgeLeft =\n                $ancestor.safeOffset().left +\n                parseInt($ancestor.css(\"borderLeftWidth\"), 10);\n            var ancestorPaddingEdgeTop =\n                $ancestor.safeOffset().top +\n                parseInt($ancestor.css(\"borderTopWidth\"), 10);\n            left = childMarginEdgeLeft - ancestorPaddingEdgeLeft;\n            top = childMarginEdgeTop - ancestorPaddingEdgeTop;\n            // we have found the ancestor and computed the position\n            // stop iterating\n            return false;\n        }\n    });\n    return {\n        left: left,\n        top: top,\n    };\n};\n\n$.fn.findInclusive = function (selector) {\n    return this.find(\"*\").addBack().filter(selector);\n};\n\n$.fn.slideIn = function (speed, easing, callback) {\n    return this.animate({ width: \"show\" }, speed, easing, callback);\n};\n\n$.fn.slideOut = function (speed, easing, callback) {\n    return this.animate({ width: \"hide\" }, speed, easing, callback);\n};\n\n// case-insensitive :contains\n$.expr[\":\"].Contains = function (a, i, m) {\n    return $(a).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0;\n};\n\n$.fn.scopedFind = function (selector) {\n    /*  If the selector starts with an object id do a global search,\n     *  otherwise do a local search.\n     */\n    if (selector.indexOf(\"#\") === 0) {\n        return $(selector);\n    } else {\n        return this.find(selector);\n    }\n};\n\nexport default undefined;\n","// helper functions to make all input elements\nimport $ from \"jquery\";\nimport logging from \"../core/logging\";\nconst namespace = \"input-change-events\";\nconst log = logging.getLogger(namespace);\n\nconst _ = {\n    setup: function ($el, pat) {\n        if (!pat) {\n            log.error(\"The name of the calling pattern has to be set.\");\n            return;\n        }\n        // list of patterns that installed input-change-event handlers\n        const patterns = $el.data(namespace) || [];\n        log.debug(\"setup handlers for \" + pat);\n\n        if (!patterns.length) {\n            log.debug(\"installing handlers\");\n            _.setupInputHandlers($el);\n\n            $el.on(\"patterns-injected.\" + namespace, function (event) {\n                _.setupInputHandlers($(event.target));\n            });\n        }\n        if (patterns.indexOf(pat) === -1) {\n            patterns.push(pat);\n            $el.data(namespace, patterns);\n        }\n    },\n\n    setupInputHandlers: function ($el) {\n        if (!$el.is(\":input\")) {\n            // We've been given an element that is not a form input. We\n            // therefore assume that it's a container of form inputs and\n            // register handlers for its children.\n            $el.findInclusive(\":input\").each(_.registerHandlersForElement);\n        } else {\n            // The element itself is an input, se we simply register a\n            // handler fot it.\n            _.registerHandlersForElement.bind($el)();\n        }\n    },\n\n    registerHandlersForElement: function () {\n        const $el = $(this);\n        const isNumber = $el.is(\"input[type=number]\");\n        const isText = $el.is(\"input:text, input[type=search], textarea\");\n\n        if (isNumber) {\n            // for <input type=\"number\" /> we want to trigger the change\n            // on keyup\n            if (\"onkeyup\" in window) {\n                $el.on(\"keyup.\" + namespace, function () {\n                    log.debug(\"translating keyup\");\n                    $el.trigger(\"input-change\");\n                });\n            }\n        }\n        if (isText || isNumber) {\n            $el.on(\"input.\" + namespace, function () {\n                log.debug(\"translating input\");\n                $el.trigger(\"input-change\");\n            });\n        } else {\n            $el.on(\"change.\" + namespace, function () {\n                log.debug(\"translating change\");\n                $el.trigger(\"input-change\");\n            });\n        }\n\n        $el.on(\"blur\", function () {\n            $el.trigger(\"input-defocus\");\n        });\n    },\n\n    remove: function ($el, pat) {\n        let patterns = $el.data(namespace) || [];\n        if (patterns.indexOf(pat) === -1) {\n            log.warn(\"input-change-events were never installed for \" + pat);\n        } else {\n            patterns = patterns.filter(function (e) {\n                return e !== pat;\n            });\n            if (patterns.length) {\n                $el.data(namespace, patterns);\n            } else {\n                log.debug(\"remove handlers\");\n                $el.removeData(namespace);\n                $el.find(\":input\").off(\".\" + namespace);\n                $el.off(\".\" + namespace);\n            }\n        }\n    },\n};\n\nexport default _;\n","import \"../../core/jquery-ext\";\nimport $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport input_change_events from \"../../lib/input-change-events\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"autosubmit\");\n\nexport const parser = new Parser(\"autosubmit\");\n// - 400ms -> 400\n// - 400 -> 400\n// - defocus\nparser.addArgument(\"delay\", \"400ms\");\n\nexport default Base.extend({\n    name: \"autosubmit\",\n    trigger: \".pat-autosubmit, .pat-auto-submit\",\n\n    init() {\n        this.options = parser.parse(this.el, this.options);\n        if (this.options.delay !== \"defocus\") {\n            this.options.delay = parseInt(this.options.delay.replace(/[^\\d]*/g, \"\"), 10);\n        }\n\n        input_change_events.setup(this.$el, \"autosubmit\");\n        this.registerListeners();\n        this.registerTriggers();\n    },\n\n    registerListeners() {\n        events.add_event_listener(\n            this.el,\n            \"input-change-delayed\",\n            \"pat-autosubmit--input-change-delayed\",\n            this.onInputChange.bind(this)\n        );\n        this.registerSubformListeners();\n        this.$el.on(\"patterns-injected\", this.refreshListeners.bind(this));\n        this.$el.on(\"pat-update\", (e, data) => {\n            // Refresh on some pat-update events.\n            if (\n                (data?.pattern === \"clone\" && data?.action === \"removed\") ||\n                data?.pattern === \"sortable\"\n            ) {\n                // Directly submit when removing a clone or changing the sorting.\n                dom.find_form(this.el).dispatchEvent(events.submit_event());\n                log.debug(\n                    `triggered by pat-update, pattern: ${data.pattern}, action: ${data.action}`\n                );\n            } else if (data?.pattern === \"clone\") {\n                // Refresh listeners on cloning.\n                this.refreshListeners(e, null, null, data.dom);\n            }\n        });\n    },\n\n    registerSubformListeners(ev) {\n        /* If there are subforms, we need to listen on them as well, so\n         * that only the subform gets submitted if an element inside it\n         * changes.\n         */\n        const el = typeof ev !== \"undefined\" ? ev.target : this.el;\n\n        // get all subforms whice are not yet auto submit forms.\n        const subforms = el.querySelectorAll(\n            \".pat-subform:not(.pat-autosubmit):not(.pat-auto-submit)\"\n        );\n        for (const subform of subforms) {\n            // register autosubmit on subform\n            events.add_event_listener(\n                subform,\n                \"input-change-delayed\",\n                \"pat-autosubmit--input-change-delayed\",\n                this.onInputChange.bind(this)\n            );\n        }\n    },\n\n    refreshListeners(ev, cfg, el, injected) {\n        this.registerSubformListeners();\n        // Register change event handlers for new inputs injected into this form\n        input_change_events.setup($(injected), \"autosubmit\");\n    },\n\n    registerTriggers() {\n        const isText = this.$el.is(\"input:text, input[type=search], textarea\");\n        if (this.options.delay === \"defocus\" && !isText) {\n            log.error(\n                \"The defocus delay value makes only sense on text input elements.\"\n            );\n            return this.$el;\n        }\n\n        function trigger_event(ev) {\n            if (ev.target.closest(\".pat-autosubmit\") !== this) {\n                return;\n            }\n            ev.target.dispatchEvent(events.generic_event(\"input-change-delayed\"));\n        }\n        if (this.options.delay === \"defocus\") {\n            this.$el.on(\"input-defocus.pat-autosubmit\", trigger_event);\n        } else if (this.options.delay > 0) {\n            this.$el.on(\n                \"input-change.pat-autosubmit\",\n                utils.debounce(trigger_event, this.options.delay)\n            );\n        } else {\n            this.$el.on(\"input-change.pat-autosubmit\", trigger_event);\n        }\n    },\n\n    destroy($el) {\n        input_change_events.remove($el, \"autosubmit\");\n        if (this.$el.is(\"form\")) {\n            this.$el\n                .find(\".pat-subform\")\n                .addBack(this.$el)\n                .each((idx, el) => {\n                    $(el).off(\".pat-autosubmit\");\n                });\n        } else {\n            $el.off(\".pat-autosubmit\");\n        }\n    },\n\n    onInputChange(e) {\n        e.stopPropagation();\n        dom.find_form(e.target).dispatchEvent(\n            events.submit_event({ submitter: e.target })\n        );\n        log.debug(\n            `submit event triggered by event ${e.type} by submitter (1) on (2)`,\n            e.target,\n            this.el\n        );\n    },\n});\n","import \"../../core/jquery-ext\";\nimport $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\n\nconst log = logging.getLogger(\"autosuggest\");\n\nexport const parser = new Parser(\"autosuggest\");\nparser.addArgument(\"ajax-data-type\", \"JSON\");\nparser.addArgument(\"ajax-search-index\", \"\");\nparser.addArgument(\"ajax-timeout\", 400);\nparser.addArgument(\"ajax-url\", \"\");\nparser.addArgument(\"max-initial-size\", 10); // AJAX search results limit for the first page.\nparser.addArgument(\"ajax-batch-size\", 0); // AJAX search results limit for subsequent pages.\nparser.addArgument(\"allow-new-words\", true); // Should custom tags be allowed?\nparser.addArgument(\"max-selection-size\", 0);\nparser.addArgument(\"minimum-input-length\"); // Don't restrict by default so that all results show\nparser.addArgument(\"placeholder\", function ($el) {\n    return $el.attr(\"placeholder\") || undefined;\n});\nparser.addArgument(\"prefill\", function ($el) {\n    return $el.val();\n});\nparser.addArgument(\"prefill-json\", \"\"); // JSON format for pre-filling\nparser.addArgument(\"words\", \"\");\nparser.addArgument(\"words-json\");\nparser.addArgument(\"value-separator\", \",\"); // Separator for multiple values\n\n// \"selection-classes\" allows you to add custom CSS classes to currently\n// selected elements.\n// The value passed in must be an object with each id being the text inside\n// a selection and value being a list of classes to be added to the\n// selection.\n// e.g. {'BMW': ['selected', 'car'], 'BMX': ['selected', 'bicycle']}\nparser.addArgument(\"selection-classes\", \"\");\n\nparser.addAlias(\"maximum-selection-size\", \"max-selection-size\");\nparser.addAlias(\"data\", \"prefill-json\");\nparser.addAlias(\"pre-fill\", \"prefill\");\n\nexport default Base.extend({\n    name: \"autosuggest\",\n    trigger: \".pat-autosuggest,.pat-auto-suggest\",\n\n    async init() {\n        if (window.__patternslib_import_styles) {\n            import(\"select2/select2.css\");\n        }\n        await import(\"select2\");\n\n        this.options = parser.parse(this.el, this.options);\n\n        let config = {\n            separator: this.options.valueSeparator,\n            tokenSeparators: [\",\"],\n            openOnEnter: false,\n            maximumSelectionSize: this.options.max[\"selection-size\"],\n            minimumInputLength: this.options.minimumInputLength,\n            allowClear:\n                this.options.max[\"selection-size\"] === 1 &&\n                !this.el.hasAttribute(\"required\"),\n        };\n        if (this.el.hasAttribute(\"readonly\")) {\n            config.placeholder = \"\";\n        } else if (this.options.placeholder) {\n            config.placeholder = this.options.placeholder;\n        }\n\n        if (this.options.selectionClasses) {\n            // We need to customize the formatting/markup of the selection\n            config.formatSelection = (obj, container) => {\n                let selectionClasses = null;\n                try {\n                    selectionClasses = JSON.parse(this.options.selectionClasses)[\n                        obj.text\n                    ];\n                } catch (e) {\n                    if (e instanceof SyntaxError) {\n                        log.error(\n                            \"SyntaxError: non-JSON data given to pat-autosuggest (selection-classes)\"\n                        );\n                    } else {\n                        throw e;\n                    }\n                }\n                if (selectionClasses) {\n                    // According to Cornelis the classes need to be applied on\n                    // the <li>, which is the container's parent\n                    container.parent().addClass(selectionClasses.join(\" \"));\n                }\n                return obj.text;\n            };\n        }\n\n        if (this.el.tagName === \"INPUT\") {\n            config = this.create_input_config(config);\n        }\n        const $sel2 = this.$el.select2(config);\n\n        dom.hide(this.el); // hide input, but keep active (e.g. for validation)\n\n        // Handle case of pat-depends, where select2 might not be visible initially\n        const pat_depends = this.el.closest(\".pat-depends\");\n        if (pat_depends) {\n            $(pat_depends).on(\"pat-update\", (e, data) => {\n                if (data?.pattern === \"depends\") {\n                    if (data?.enabled === true) {\n                        this.$el.select2(\"enable\", true);\n                    } else if (data?.enabled === false) {\n                        this.$el.select2(\"disable\", true);\n                    }\n                }\n            });\n        }\n\n        // Allow pat-validate to check for validity when select2 was interacted\n        // with but no value selected.\n        const initiate_empty_check = () => {\n            const val = $sel2.select2(\"val\");\n            if (val?.length === 0) {\n                // catches \"\" and []\n                // blur the input field so that pat-validate can kick in when\n                // nothing was selected.\n                this.el.dispatchEvent(events.blur_event());\n            }\n        };\n        this.$el.on(\"select2-close\", initiate_empty_check.bind(this));\n        this.$el.on(\"select2-blur\", initiate_empty_check.bind(this));\n\n        this.$el.on(\"change\", () => {\n            // The jQuery \"change\" event isn't caught by normal JavaScript\n            // event listeners, e.g. in pat-validation.\n            // Let's re-trigger as input-event, so that pat-validation but also\n            // ``input-change-events`` can pick it up.\n            this.el.dispatchEvent(events.input_event());\n        });\n\n        // Clear values on reset.\n        events.add_event_listener(\n            this.el.closest(\"form\"),\n            \"reset\",\n            \"pat-auto-suggest--reset\",\n            () => this.$el.select2(\"val\", \"\")\n        );\n    },\n\n    create_input_config(config) {\n        let words = [];\n\n        config.createSearchChoice = (term, data) => {\n            if (this.options.allowNewWords) {\n                if (\n                    data.filter((el) => el.text.localeCompare(term) === 0).length === 0\n                ) {\n                    return { id: term, text: term };\n                }\n            } else {\n                return null;\n            }\n        };\n\n        if (this.options.wordsJson?.length) {\n            try {\n                words = JSON.parse(this.options.wordsJson);\n            } catch (e) {\n                if (e instanceof SyntaxError) {\n                    words = [];\n                    log.error(\"SyntaxError: non-JSON data given to pat-autosuggest\");\n                } else {\n                    throw e;\n                }\n            }\n            if (!Array.isArray(words)) {\n                words = words.map((v, k) => {\n                    return { id: k, text: v };\n                });\n            }\n        }\n        if (this.options.words) {\n            words = this.options.words.split(/\\s*,\\s*/);\n            words = words.map((v) => {\n                return { id: v, text: v };\n            });\n        }\n\n        // Per Cornelis, if our max lenght is 1, we want select style. If it is larger, we want tag style\n        // Now this is somewhat fishy because so far, we always configured tag style by setting config.tags = words.\n        // Even if words was [], we would get a tag stylee select\n        // That was then properly working with ajax if configured.\n\n        if (this.options.max[\"selection-size\"] === 1) {\n            config.data = words;\n            // We allow exactly one value, use dropdown styles. How do we feed in words?\n        } else {\n            // We allow multiple values, use the pill style - called tags in select 2 speech\n            config.tags = words;\n        }\n\n        if (this.options.prefill?.length) {\n            this.el.value = this.options.prefill\n                .split(\",\")\n                .map((it) => it.trim())\n                .join(this.options.valueSeparator);\n            config.initSelection = (element, callback) => {\n                let data = [];\n                const values = element[0].value.split(this.options.valueSeparator);\n                for (const value of values) {\n                    data.push({ id: value, text: value });\n                }\n                if (this.options.max[\"selection-size\"] === 1) {\n                    data = data[0];\n                }\n                callback(data);\n            };\n        }\n\n        if (this.options.prefillJson.length) {\n            /* We support two types of JSON data for prefill data:\n             *   {\"john-snow\": \"John Snow\", \"tywin-lannister\": \"Tywin Lannister\"}\n             * or\n             *   [\n             *    {\"id\": \"john-snow\", \"text\": \"John Snow\"},\n             *    {\"id\": \"tywin-lannister\", \"text\":\"Tywin Lannister\"}\n             *   ]\n             */\n            try {\n                const data = JSON.parse(this.options.prefillJson);\n                let ids = [];\n                for (const d in data) {\n                    if (typeof d === \"object\") {\n                        ids.push(d.id);\n                    } else {\n                        ids.push(d);\n                    }\n                }\n                this.el.value = ids.join(this.options.valueSeparator);\n                config.initSelection = (element, callback) => {\n                    let _data = [];\n                    for (const d in data) {\n                        if (typeof d === \"object\") {\n                            _data.push({ id: d.id, text: d.text });\n                        } else {\n                            _data.push({ id: d, text: data[d] });\n                        }\n                    }\n                    if (this.options.max[\"selection-size\"] === 1) {\n                        _data = _data[0];\n                    }\n                    callback(_data);\n                };\n            } catch (e) {\n                if (e instanceof SyntaxError) {\n                    log.error(\"SyntaxError: non-JSON data given to pat-autosuggest\");\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        if (this.options.ajax?.url) {\n            config = $.extend(\n                true,\n                {\n                    minimumInputLength: this.options.minimumInputLength,\n                    ajax: {\n                        url: this.options.ajax.url,\n                        dataType: this.options.ajax[\"data-type\"],\n                        type: \"GET\",\n                        quietMillis: this.options.ajax.timeout,\n                        cache: true,\n                        data: (term, page) => {\n                            const request_data = {\n                                q: term, // search term\n                                page: page,\n                            };\n\n                            const index = this.options.ajax[\"search-index\"];\n                            if (index) {\n                                request_data.index = index;\n                            }\n\n                            const page_limit = this.page_limit(page);\n                            if (page_limit > 0) {\n                                request_data.page_limit = page_limit;\n                            }\n\n                            return request_data;\n                        },\n                        results: (data, page) => {\n                            // Parse the results into the format expected by Select2.\n                            // data must be a list of objects with keys \"id\" and \"text\"\n\n                            // Check whether there are more results to come.\n                            // There are maybe more results if the number of\n                            // items is the same as the batch-size.\n                            // We expect the backend to return an empty list if\n                            // a batch page is requested where there are no\n                            // more results.\n                            const page_limit = this.page_limit(page);\n                            const load_more = page_limit > 0 &&\n                                data &&\n                                Object.keys(data).length >= page_limit;\n                            return { results: data, page: page, more: load_more };\n                        },\n                    },\n                },\n                config\n            );\n        }\n        return config;\n    },\n\n    page_limit(page) {\n        /* Return the page limit based on the current page.\n         *\n         * If no `ajax-batch-size` is set, batching is disabled but we can\n         * still define the number of items to be shown on the first page with\n         * `max-initial-size`.\n         *\n         * @param {number} page - The current page number.\n         * @returns {number} - The page limit.\n         */\n\n        // Page limit for the first page of a batch.\n        const initial_size = this.options.max[\"initial-size\"] || 0;\n\n        // Page limit for subsequent pages.\n        const batch_size = this.options.ajax[\"batch-size\"] || 0;\n\n        return page === 1 ? initial_size : batch_size;\n    },\n\n    destroy($el) {\n        $el.off(\".pat-autosuggest\");\n        $el.select2(\"destroy\");\n    },\n});\n","import $ from \"jquery\";\nimport { BasePattern } from \"../../core/basepattern\";\nimport dom from \"../../core/dom\";\nimport registry from \"../../core/registry\";\n\nlet scheduled_task = null;\n\nclass Pattern extends BasePattern {\n    static name = \"autofocus\";\n    static trigger = `\n        input.pat-autofocus,\n        input[autofocus],\n        select.pat-autofocus,\n        select[autofocus],\n        textarea.pat-autofocus,\n        textarea[autofocus],\n        button.pat-autofocus,\n        button[autofocus]\n    `;\n\n    init() {\n        if (window.self !== window.top) {\n            // Do not autofocus in iframes.\n            return;\n        }\n\n        // Re-focus after relevant DOM changes.\n        $(document).on(\"pat-update\", (e, data) => {\n            const updated = data?.dom;\n            if (updated?.contains(this.el)) {\n                // Only focus if the updated element is a parent of this autofocus element.\n                this.set_focus();\n            }\n        });\n\n        this.set_focus();\n    }\n\n    set_focus() {\n        if (dom.is_visible(this.el) && this.el.value === \"\") {\n            // Set autofocus only for visible and empty inputs.\n\n            // Clear scheduled tasks if there are any.\n            // Note: Patterns scanning initizlizes patterns \"inside-out\", so\n            //       DOM nodes later in the tree are initizlized first.\n            //       With multiple pattern instantiations and then module-\n            //       globally clearing and re-scheduling tasks we are\n            //       initializing in the end the first pattern which matches\n            //       the conditions.\n            clearTimeout(scheduled_task);\n            scheduled_task = setTimeout(() => {\n                this.el.focus();\n                scheduled_task = null;\n            }, 100);\n        }\n    }\n}\n\nregistry.register(Pattern);\n\nexport default Pattern;\nexport { Pattern };\n","/**\n * Patterns breadcrumbs - breadcrumb trails\n *\n * Copyright 2012-2013 Florian Friesdorf\n * Copyright 2012 Simplon B.V. - Wichert Akkerman\n */\n\nimport $ from \"jquery\";\nimport registry from \"../../core/registry\";\n\nvar _ = {\n    name: \"breadcrumbs\",\n    trigger: \"nav.pat-breadcrumbs\",\n    init: function ($el, opts) {\n        if ($el.length > 1) {\n            return $el.map(function () {\n                return _.init($(this), opts);\n            });\n        }\n\n        // wrap elements in a DIV that will be shifted around\n        var $content = $el\n            .children()\n            .wrapAll(\"<div class='pat-breadcrumbs-content'></div>\")\n            .parent();\n\n        // shift ctrl\n        var $ctrl = $(\"<span class='button shift'>shift</span>\").prependTo($el);\n\n        var shifted = false,\n            shifting = false,\n            difference = 0;\n        var shifter = function (toggle) {\n            return function () {\n                var margin;\n                if (toggle) {\n                    margin = shifted ? 0 : difference;\n                    $content.animate({ \"margin-left\": margin }, function () {\n                        $ctrl.toggleClass(\"shift-right shift-left\");\n                        shifted = !shifted;\n                    });\n                } else {\n                    margin = shifted ? difference : 0;\n                    $content.css({ \"margin-left\": margin });\n                }\n            };\n        };\n\n        var maybeshift = function () {\n            // account for other stuff on the same line (100px)\n            difference = $el.innerWidth() - $content.width() - 100;\n\n            if (difference < 0) {\n                // we should be shifting\n                if (!shifting) {\n                    shifting = true;\n                    $el.addClass(\"shifting\");\n                    $ctrl.removeClass(\"shift-right\");\n                    $ctrl.addClass(\"shift-left\");\n                    $ctrl.on(\"click.pat-breadcrumbs\", shifter(true));\n                    $ctrl.click();\n                } else {\n                    // a shifter that keeps state\n                    shifter(false)();\n                }\n            } else {\n                // we should not be shifting\n                if (shifting) {\n                    $content.animate({ \"margin-left\": 0 }, function () {\n                        shifted = false;\n                        shifting = false;\n                        $el.removeClass(\"shifting\");\n                        $ctrl.removeClass(\"shift-left shift-right\");\n                        $ctrl.off(\".pat-breadcrumbs\");\n                    });\n                }\n            }\n        };\n        $(window).on(\"resize.pat-breadcrumbs\", maybeshift);\n\n        var recalculate = function () {\n            // set fixed width on content\n            var width = $content\n                .children()\n                .toArray()\n                .reduce(function (acc, el) {\n                    // outerWidth is buggy http://bugs.jquery.com/ticket/8443 so\n                    // add a magic buffer value of 5.\n                    // XXX: maybe make the buffer configurable.\n                    return acc + $(el).outerWidth(true) + 5;\n                }, 0);\n            $content.width(width);\n            maybeshift();\n        };\n        $el.on(\"pat-breadcrumbs-changed.pat-breadcrumbs\", recalculate);\n        recalculate();\n\n        return $el;\n    },\n    destroy: function ($el) {\n        $el.off(\".pat-breadcrumbs\");\n    },\n};\nregistry.register(_);\n\nexport default _;\n","import { BasePattern } from \"@patternslib/patternslib/src/core/basepattern\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nexport const parser = new Parser(\"bumper\");\nparser.addArgument(\"selector\");\nparser.addArgument(\"bump-add\", \"bumped\");\nparser.addArgument(\"bump-remove\");\nparser.addArgument(\"unbump-add\");\nparser.addArgument(\"unbump-remove\", \"bumped\");\n\nclass Pattern extends BasePattern {\n    static name = \"bumper\";\n    static trigger = \".pat-bumper\";\n    static parser = parser;\n    ticking = false;\n\n    async init() {\n        this.target_element = this.options.selector\n            ? document.querySelector(this.options.selector)\n            : this.el;\n\n        // wait for next repaint for things to settle.\n        // e.g. CSS applied for injected content.\n        await utils.timeout(1);\n\n        const parent_el = this.el.parentElement;\n        this.container_x = dom.find_scroll_container(parent_el, \"x\", null);\n        this.container_y = dom.find_scroll_container(parent_el, \"y\", null);\n\n        const containers = new Set([this.container_x, this.container_y]);\n        for (const container of containers) {\n            events.add_event_listener(\n                container || document,\n                \"scroll\",\n                \"pat_bumper__scroll\",\n                async () => {\n                    if (!this.ticking) {\n                        this.ticking = true;\n                        await utils.animation_frame();\n                        this.set_bumping_classes();\n                        this.ticking = false;\n                    }\n                }\n            );\n        }\n        this.set_bumping_classes();\n    }\n\n    /**\n     * Get the container position values.\n     *\n     * @param {DOMElement} container - The container element.\n     * @param {Objcet} dimensions - The dimension Object of the container,\n     *                              which were initialized in the init method.\n     *\n     * @returns {Object} The position values.\n     */\n    _get_container_positions(container) {\n        if (!container) {\n            // No container = viewport as scrolling container\n            return {\n                top: 0,\n                right: document.documentElement.clientWidth,\n                bottom: document.documentElement.clientHeight,\n                left: 0,\n            };\n        }\n\n        // Bounds are dynamic, so we cannot cache them.\n        const bounds = container.getBoundingClientRect();\n\n        // Container dimensions\n        const dimensions = {\n            border_top_width: dom.get_css_value(container, \"border-top-width\", true),\n            border_left_width: dom.get_css_value(container, \"border-left-width\", true),\n            padding_top: dom.get_css_value(container, \"padding-top\", true),\n            padding_right: dom.get_css_value(container, \"padding-right\", true),\n            padding_bottom: dom.get_css_value(container, \"padding-bottom\", true),\n            padding_left: dom.get_css_value(container, \"padding-left\", true),\n        };\n\n        const left =\n            bounds.left +\n            dimensions.border_left_width +\n            dimensions.padding_left; // prettier-ignore\n        const top =\n            bounds.top +\n            dimensions.border_top_width +\n            dimensions.padding_top; // prettier-ignore\n\n        const right =\n            bounds.left +\n            dimensions.border_left_width +\n            container.clientWidth -\n            dimensions.padding_right;\n\n        const bottom =\n            bounds.top +\n            dimensions.border_top_width +\n            container.clientHeight -\n            dimensions.padding_bottom;\n\n        return {\n            top: Math.round(top),\n            right: Math.round(right),\n            bottom: Math.round(bottom),\n            left: Math.round(left),\n        };\n    }\n\n    /**\n     * Get the element position values.\n     *\n     * @returns {Object} The position values.\n     */\n    _get_element_positions() {\n        const bounds = this.el.getBoundingClientRect();\n\n        // Element positions\n        const positions = {\n            top: dom.get_css_value(this.el, \"top\", true),\n            right: dom.get_css_value(this.el, \"right\", true),\n            bottom: dom.get_css_value(this.el, \"bottom\", true),\n            left: dom.get_css_value(this.el, \"left\", true),\n        };\n\n        return {\n            top: Math.round(bounds.top - positions.top),\n            right: Math.round(bounds.right + positions.right),\n            bottom: Math.round(bounds.bottom + positions.bottom),\n            left: Math.round(bounds.left - positions.left),\n        };\n    }\n\n    /**\n     * Get the bumping state of the element.\n     *\n     * @returns {Object} The bumping state.\n     */\n    get_bumping_state() {\n        const pos_el = this._get_element_positions();\n        const pos_x = this._get_container_positions(this.container_x);\n        const pos_y =\n            this.container_x === this.container_y\n                ? pos_x\n                : this._get_container_positions(this.container_y);\n\n        const bump_top = pos_el.top <= pos_y.top && pos_el.bottom >= pos_y.top;\n        const bump_right = pos_el.right >= pos_x.right && pos_el.left <= pos_x.right;\n        const bump_bottom = pos_el.bottom >= pos_y.bottom && pos_el.top <= pos_y.bottom;\n        const bump_left = pos_el.left <= pos_x.left && pos_el.right >= pos_x.left;\n\n        const is_bumping = bump_top || bump_right || bump_bottom || bump_left;\n\n        return {\n            bump_top,\n            bump_right,\n            bump_bottom,\n            bump_left,\n            is_bumping,\n        };\n    }\n\n    /**\n     * Set the bumping classes on the element.\n     */\n    set_bumping_classes() {\n        const bumping_state = this.get_bumping_state();\n\n        const classes_to_add = [];\n        const classes_to_remove = [];\n\n        if (bumping_state.is_bumping) {\n            this.options.bump.add && classes_to_add.push(this.options.bump.add);\n            this.options.bump.remove && classes_to_remove.push(this.options.bump.remove);\n\n            bumping_state.bump_top\n                ? classes_to_add.push(\"bumped-top\")\n                : classes_to_remove.push(\"bumped-top\");\n            bumping_state.bump_right\n                ? classes_to_add.push(\"bumped-right\")\n                : classes_to_remove.push(\"bumped-right\");\n            bumping_state.bump_bottom\n                ? classes_to_add.push(\"bumped-bottom\")\n                : classes_to_remove.push(\"bumped-bottom\");\n            bumping_state.bump_left\n                ? classes_to_add.push(\"bumped-left\")\n                : classes_to_remove.push(\"bumped-left\");\n        } else {\n            this.options.unbump.add && classes_to_add.push(this.options.unbump.add);\n            this.options.unbump.remove &&\n                classes_to_remove.push(this.options.unbump.remove);\n            classes_to_remove.push(\n                \"bumped-top\",\n                \"bumped-right\",\n                \"bumped-bottom\",\n                \"bumped-left\"\n            );\n        }\n\n        this.el.classList.remove(...classes_to_remove);\n        this.el.classList.add(...classes_to_add);\n    }\n}\n\nregistry.register(Pattern);\n\nexport default Pattern;\nexport { Pattern };\n","import \"../../core/polyfills\"; // SubmitEvent.submitter for Safari < 15.4 and jsDOM\nimport $ from \"jquery\";\nimport ajax from \"../ajax/ajax\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport create_uuid from \"../../core/uuid\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"pat.inject\");\n//log.setLevel(logging.Level.DEBUG);\n\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\n\nexport const parser = new Parser(\"inject\");\nparser.addArgument(\"default-selector\");\nparser.addArgument(\"target\");\nparser.addArgument(\"data-type\", \"html\");\nparser.addArgument(\"next-href\");\nparser.addArgument(\"source\");\nparser.addArgument(\"trigger\", \"default\", [\n    \"default\",\n    \"autoload\",\n    \"autoload-visible\",\n    \"idle\",\n]);\nparser.addArgument(\"delay\"); // only used in autoload\nparser.addArgument(\"browser-cache\", \"no-cache\", [\"cache\", \"no-cache\"]); // Cache ajax requests. Pass to pat-ajax.\nparser.addArgument(\"confirm\", \"class\", [\"never\", \"always\", \"form-data\", \"class\"]);\nparser.addArgument(\"confirm-message\", \"Are you sure you want to leave this page?\");\nparser.addArgument(\"loading-class\", \"injecting\"); // Add a class to the target while content is still loading.\nparser.addArgument(\"executing-class\", \"executing\"); // Add a class to the element while content is still loading.\nparser.addArgument(\"executed-class\", \"executed\"); // Add a class to the element when content is loaded.\nparser.addArgument(\"class\"); // Add a class to the injected content.\nparser.addArgument(\"history\", \"none\", [\"none\", \"record\"]);\nparser.addArgument(\"push-marker\");\nparser.addArgument(\"scroll\");\n\n// Note: this should not be here but the parser would bail on unknown\n// parameters and expand/collapsible need to pass the url to us.\nparser.addArgument(\"url\");\n\nconst inject = {\n    name: \"inject\",\n    trigger: \"a.pat-inject, form.pat-inject, .pat-subform.pat-inject\",\n    parser: parser,\n\n    async init($el, opts) {\n        // We need to wait a tick. Modern BasePattern based patterns like\n        // pat-validation do always wait a tick before initializing. The\n        // patterns registry always initializes pat-validation first but since\n        // it is waiting a tick the event handlers are registerd after the ones\n        // from pat-inject. Waiting a tick in pat-inject solves this -\n        // pat-validation's event handlers are initialized first.\n        await utils.timeout(1);\n\n        const el = utils.jqToNode($el);\n\n        const cfgs = this.extractConfig($el, opts);\n        if (cfgs.some((e) => e.history === \"record\") && !(\"pushState\" in history)) {\n            // if the injection shall add a history entry and HTML5 pushState\n            // is missing, then don't initialize the injection.\n            log.warn(\"HTML5 pushState is missing, aborting\");\n            return $el;\n        }\n        $el.data(\"pat-inject\", cfgs);\n\n        if (cfgs[0].nextHref && cfgs[0].nextHref.indexOf(\"#\") === 0) {\n            // In case the next href is an anchor, and it already\n            // exists in the page, we do not activate the injection\n            // but instead just change the anchors href.\n\n            // Note: This is used in only one project for linked fullcalendars,\n            // it's sanity is wonky and we should probably solve it differently.\n            if (el.nodeName === \"A\" && $(cfgs[0].nextHref).length > 0) {\n                log.debug(\n                    \"Skipping as next href is anchor, which already exists\",\n                    cfgs[0].nextHref\n                );\n                // TODO: reconsider how the injection enters exhausted state\n                el.setAttribute(\n                    \"href\",\n                    (window.location.href.split(\"#\")[0] || \"\") + cfgs[0].nextHref\n                );\n                return $el;\n            }\n        }\n        if (cfgs[0].pushMarker) {\n            $(\"body\").on(\"push\", (event, data) => {\n                log.debug(\"received push message: \" + data);\n                if (data == cfgs[0].pushMarker) {\n                    log.debug(\"re-injecting \" + data);\n                    this.onTrigger({ currentTarget: el });\n                }\n            });\n        }\n        if (cfgs[0].idleTrigger) {\n            this._initIdleTrigger($el, cfgs[0].idleTrigger);\n        } else {\n            switch (cfgs[0].trigger) {\n                case \"default\":\n                    for (const cfg of cfgs) {\n                        if (cfg.delay) {\n                            cfg.processDelay = cfg.delay;\n                        }\n                    }\n                    // setup event handlers\n                    if (el?.nodeName === \"FORM\") {\n                        log.debug(\"Initializing form with injection on\", el);\n                        events.add_event_listener(\n                            el,\n                            \"submit\",\n                            \"pat-inject--form-submit\",\n                            (e) => {\n                                if (\n                                    e.submitter?.matches(\n                                        \"[type=submit], button:not([type=button]), [type=image]\"\n                                    )\n                                ) {\n                                    // make sure the submitting button is sent\n                                    // with the form\n                                    ajax.onClickSubmit(e);\n                                }\n                                this.onTrigger(e);\n                            }\n                        );\n                    } else if (el?.matches(\".pat-subform\")) {\n                        log.debug(\"Initializing subform with injection\");\n                    } else {\n                        $el.on(\"click.pat-inject\", this.onTrigger.bind(this));\n                    }\n                    break;\n                case \"autoload\":\n                    if (!cfgs[0].delay) {\n                        this.onTrigger({ currentTarget: el });\n                    } else {\n                        // generate UUID\n                        const uuid = create_uuid();\n                        el.setAttribute(\"data-pat-inject-uuid\", uuid);\n\n                        // function to trigger the autoload and mark as triggered\n                        const delayed_trigger = (uuid_) => {\n                            // Check if the element has been removed from the dom\n                            const still_there = document.querySelector(\n                                `[data-pat-inject-uuid=\"${uuid_}\"]`\n                            );\n                            if (!still_there) {\n                                return false;\n                            }\n\n                            $el.data(\"pat-inject-autoloaded\", true);\n                            this.onTrigger({ currentTarget: el });\n                            // Cleanup again.\n                            still_there.removeAttribute(\"data-pat-inject-uuid\");\n                            return true;\n                        };\n                        window.setTimeout(\n                            delayed_trigger.bind(null, uuid),\n                            cfgs[0].delay\n                        );\n                    }\n                    break;\n                case \"autoload-visible\":\n                    this._initAutoloadVisible($el, cfgs);\n                    break;\n                case \"idle\":\n                    this._initIdleTrigger($el, cfgs[0].delay);\n                    break;\n            }\n        }\n\n        log.debug(\"initialised:\", el);\n        return $el;\n    },\n\n    destroy($el) {\n        $el.off(\".pat-inject\");\n        $el.data(\"pat-inject\", null);\n        return $el;\n    },\n\n    onTrigger(e) {\n        /* Injection has been triggered, either via form submission or a\n         * link has been clicked.\n         */\n\n        // Prevent the original event from doing it's work.\n        // We want an AJAX request instead.\n        e.preventDefault && e.preventDefault();\n\n        const el = e.currentTarget;\n        const $el = $(el);\n        let cfgs = $el.data(\"pat-inject\");\n        if (el.nodeName === \"FORM\" && e.type === \"submit\") {\n            const form = el;\n            const submitter = e.submitter;\n\n            // Do not submit invalid forms, if validation is active.\n            // Works with native form validation and with pat-validation.\n            if (\n                !submitter?.matches(\"[formnovalidate]\") &&\n                !form.matches(\"[novalidate]\") &&\n                form.matches(\":invalid\")\n            ) {\n                log.debug(\"Form is invalid, aborting\");\n                return;\n            }\n\n            const formaction = submitter?.getAttribute(\"formaction\");\n            if (formaction) {\n                const opts = {\n                    url: formaction,\n                };\n\n                // Support custom data-pat-inject on formaction buttons.\n                const cfg_node = submitter.closest(\"[data-pat-inject]\");\n                cfgs = this.extractConfig($(cfg_node), opts);\n            }\n\n            // store the params of the form in the config, to be used by history\n            for (const cfg of cfgs) {\n                cfg.params = $.param($el.serializeArray());\n            }\n        }\n\n        $el.trigger(\"patterns-inject-triggered\");\n        this.execute(cfgs, $el);\n    },\n\n    submitSubform($sub) {\n        /* This method is called from pat-subform\n         */\n        const $el = $($sub[0].closest(\"form\"));\n        const cfgs = $sub.data(\"pat-inject\");\n\n        // store the params of the subform in the config, to be used by history\n        for (const cfg of cfgs) {\n            cfg.params = $.param($sub.serializeArray());\n        }\n\n        try {\n            $el.trigger(\"patterns-inject-triggered\");\n        } catch (e) {\n            log.error(\"patterns-inject-triggered\", e);\n        }\n        this.execute(cfgs, $el);\n    },\n\n    extractConfig($el, options = {}) {\n        const el = utils.jqToNode($el);\n        options = Object.assign({}, options); // copy\n\n        const cfgs = parser.parse($el, options, true);\n        for (const cfg of cfgs) {\n            cfg.$context = $el;\n            // options and cfg have priority, fall back to href/action\n            cfg.url =\n                options.url ||\n                cfg.url ||\n                el?.getAttribute(\"href\") ||\n                el?.getAttribute(\"action\") ||\n                el?.closest(\"form\")?.getAttribute(\"action\") ||\n                \"\";\n\n            // separate selector from url\n            const urlparts = cfg.url.split(\"#\");\n            cfg.url = urlparts[0];\n\n            if (urlparts.length > 2) {\n                log.warn(\"Ignoring additional source ids:\", urlparts.slice(2));\n            }\n\n            if (!cfg.defaultSelector) {\n                // if no selector, check for selector as part of original url\n                cfg.defaultSelector = (urlparts[1] && \"#\" + urlparts[1]) || \"body\";\n            }\n            if (cfg.delay) {\n                try {\n                    cfg.delay = utils.parseTime(cfg.delay);\n                } catch {\n                    log.warn(\"Invalid delay value: \", cfg.delay);\n                    cfg.delay = null;\n                }\n            }\n            cfg.processDelay = 0;\n        }\n        return cfgs;\n    },\n\n    elementIsDirty(m) {\n        /* Check whether the passed in form element contains a value.\n         */\n        const data = $.map(m.find(\":input:not(select)\"), (i) => {\n            const val = $(i).val();\n            return Boolean(val) && val !== $(i).attr(\"placeholder\");\n        });\n        return $.inArray(true, data) !== -1;\n    },\n\n    askForConfirmation(cfgs) {\n        /* If configured to do so, show a confirmation dialog to the user.\n         * This is done before attempting to perform injection.\n         */\n        let should_confirm = false;\n        let message;\n\n        for (const cfg of cfgs) {\n            let _confirm = false;\n            if (cfg.confirm == \"always\") {\n                _confirm = true;\n            } else if (\n                cfg.confirm === \"form-data\" &&\n                cfg.target &&\n                cfg.target !== \"none\"\n            ) {\n                _confirm = this.elementIsDirty(cfg.$target);\n            } else if (cfg.confirm === \"class\" && cfg.target && cfg.target !== \"none\") {\n                _confirm = cfg.$target.hasClass(\"is-dirty\");\n            }\n            if (_confirm) {\n                should_confirm = true;\n                message = cfg.confirmMessage;\n            }\n        }\n        if (should_confirm) {\n            if (!window.confirm(message)) {\n                return false;\n            }\n        }\n        return true;\n    },\n\n    ensureTarget(cfg) {\n        /* Make sure that a target element exists and that it's assigned to\n         * cfg.$target.\n         */\n        // make sure target exist\n        if (cfg.target === \"none\") {\n            // special case, we don't want to inject anything\n            return true;\n        }\n        cfg.$target =\n            cfg.$target || (cfg.target === \"self\" ? cfg.$context : $(cfg.target));\n        if (cfg.$target.length === 0) {\n            if (!cfg.target) {\n                log.error(\"Need target selector\", cfg);\n                return false;\n            }\n            cfg.$target = this.createTarget(cfg.target);\n            cfg.$created_target = cfg.$target;\n        }\n        return true;\n    },\n\n    verifySingleConfig(url, cfg) {\n        /* Verify one of potentially multiple configs (i.e. argument lists).\n         *\n         * Extract modifiers such as ::element or ::after.\n         * Ensure that a target element exists.\n         */\n        if (cfg.url !== url) {\n            // in case of multi-injection, all injections need to use\n            // the same url\n            log.error(\"Unsupported different urls for multi-inject\");\n            return false;\n        }\n        // defaults\n        cfg.source = cfg.source || cfg.defaultSelector;\n        cfg.target = cfg.target || cfg.defaultSelector;\n\n        if (!this.extractModifiers(cfg)) {\n            return false;\n        }\n        if (!this.ensureTarget(cfg)) {\n            return false;\n        }\n        this.listenForFormReset(cfg);\n        return true;\n    },\n\n    verifyConfig(cfgs) {\n        /* Verify and post-process all the configurations.\n         * Each \"config\" is an arguments list separated by the &&\n         * combination operator.\n         *\n         * In case of multi-injection, only one URL is allowed, which\n         * should be specified in the first config (i.e. arguments list).\n         *\n         * Verification for each cfg in the array needs to succeed.\n         */\n        return cfgs.every((cfg) => this.verifySingleConfig(cfgs[0].url, cfg));\n    },\n\n    listenForFormReset(cfg) {\n        /* if pat-inject is used to populate target in some form and when\n         * Cancel button is pressed (this triggers reset event on the\n         * form) you would expect to populate with initial placeholder\n         */\n        if (cfg.target === \"none\") {\n            // Special case, we don't want to display any return value.\n            return;\n        }\n        const $form = cfg.$target.parents(\"form\");\n        if ($form.length !== 0 && cfg.$target.data(\"initial-value\") === undefined) {\n            cfg.$target.data(\"initial-value\", cfg.$target.html());\n            $form.on(\"reset\", () => {\n                cfg.$target.html(cfg.$target.data(\"initial-value\"));\n            });\n        }\n    },\n\n    extractModifiers(cfg) {\n        /* The user can add modifiers to the source and target arguments.\n         * Modifiers such as ::element, ::before and ::after.\n         * We identifiy and extract these modifiers here.\n         */\n        const source_re = /^(.*?)(::element)?$/;\n        const target_re = /^(.*?)(::element)?(::after|::before)?$/;\n        const source_match = source_re.exec(cfg.source);\n        const target_match = target_re.exec(cfg.target);\n\n        cfg.source = source_match[1];\n        cfg.sourceMod = source_match[2] ? \"element\" : \"content\";\n        cfg.target = target_match[1];\n        const targetMod = target_match[2] ? \"element\" : \"content\";\n        const targetPosition = (target_match[3] || \"::\").slice(2); // position relative to target\n\n        if (cfg.loadingClass) {\n            cfg.loadingClass += \" \" + cfg.loadingClass + \"-\" + targetMod;\n            if (targetPosition && cfg.loadingClass) {\n                cfg.loadingClass += \" \" + cfg.loadingClass + \"-\" + targetPosition;\n            }\n        }\n        cfg.action = targetMod + targetPosition;\n        // Once we start detecting illegal combinations, we'll\n        // return false in case of error\n        return true;\n    },\n\n    createTarget(selector) {\n        /* create a target that matches the selector\n         *\n         * Note: so far we only support #target and create a div with that id\n         * appended to the body.\n         */\n        if (selector.slice(0, 1) !== \"#\") {\n            log.error(\"only id supported for non-existing target\");\n            return null;\n        }\n        const $target = $(\"<div />\").attr({ id: selector.slice(1) });\n        $(\"body\").append($target);\n        return $target;\n    },\n\n    _performInjection(target, $el, $sources, cfg, trigger, $title) {\n        /* Called after the XHR has succeeded and we have a new $sources\n         * element to inject.\n         */\n        const wrapper = document.createElement(\"template\");\n        if ($sources.length > 0) {\n            const method = cfg.sourceMod === \"content\" ? \"innerHTML\" : \"outerHTML\";\n            // There might be multiple sources, so we need to loop over them.\n            // Access them with \"innerHTML\" or \"outerHTML\" depending on the sourceMod.\n            const sources_string = [...$sources].map(source => source[method]).join(\"\\n\");\n            wrapper.innerHTML = sources_string;\n\n            for (const img of wrapper.content.querySelectorAll(\"img\")) {\n                events.add_event_listener(\n                    img,\n                    \"load\",\n                    \"inject_img_load\",\n                    (e) => {\n                        $(e.currentTarget).trigger(\"pat-inject-content-loaded\");\n                    },\n                    { once: true }\n                );\n            }\n        }\n\n        // Copy, because after insertion wrapper.children is empty.\n        const source_nodes = [...wrapper.content.childNodes];\n\n        // Now the injection actually happens.\n        if (this._inject(trigger, source_nodes, target, cfg)) {\n            // Update history\n            this._update_history(cfg, trigger, $title);\n            // Post-injection\n            this._afterInjection($el, cfg.$created_target || $(source_nodes), cfg);\n        }\n    },\n\n    _update_history(cfg, trigger, $title) {\n        // History support. if subform is submitted, append form params\n        if (cfg.history !== \"record\" || !history?.pushState) {\n            return;\n        }\n        let url = cfg.url;\n        if (cfg.params) {\n            const glue = url.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n            url = `${url}${glue}${cfg.params}`;\n        }\n        history.pushState({ url: url }, \"\", url);\n        // Also inject title element if we have one\n        if ($title?.length) {\n            const title_el = document.querySelector(\"title\");\n            if (title_el) {\n                this._inject(trigger, $title, title_el, {\n                    action: \"element\",\n                });\n            }\n        }\n    },\n\n    _afterInjection($el, $injected, cfg) {\n        /* Set a class on the injected elements and fire the\n         * patterns-injected event.\n         */\n        const el = utils.jqToNode($el);\n        $injected\n            .filter((idx, el_) => {\n                return el_.nodeType !== TEXT_NODE;\n            })\n            .data(\"pat-injected\", { origin: cfg.url });\n\n        if ($injected.length === 1 && $injected[0].nodeType == TEXT_NODE) {\n            // Only one element injected, and it was a text node.\n            // So we trigger \"patterns-injected\" on the parent.\n            // The event handler should check whether the\n            // injected element and the triggered element are\n            // the same.\n            $injected.parent().trigger(\"patterns-injected\", [cfg, el, $injected[0]]);\n        } else {\n            $injected.each((idx, el_) => {\n                // patterns-injected event will be triggered for each injected (non-text) element.\n                if (el_.nodeType !== TEXT_NODE) {\n                    $(el_)\n                        .addClass(cfg[\"class\"])\n                        .trigger(\"patterns-injected\", [cfg, el, el_]);\n                }\n            });\n        }\n\n        if (cfg.scroll && cfg.scroll !== \"none\") {\n            // Get the scroll target for\n            // 1) finding the scroll container\n            // 2) getting the element to scroll to (if not \"top\")\n            const scroll_target = [\"top\", \"target\"].includes(cfg.scroll)\n                ? cfg.$target[0]\n                : dom.querySelectorAllAndMe($injected[0], cfg.scroll);\n\n            const scroll_container = dom.find_scroll_container(\n                scroll_target,\n                null,\n                window\n            );\n\n            if (cfg.scroll === \"top\") {\n                dom.scroll_to_top(scroll_container);\n            } else if (scroll_target) {\n                dom.scroll_to_element(scroll_target, scroll_container);\n            }\n        }\n\n        el.dispatchEvent(\n            new Event(\"pat-inject-success\", { bubbles: true, cancelable: true })\n        );\n    },\n\n    async _onInjectSuccess($el, cfgs, ev) {\n        let data = ev?.jqxhr?.responseText;\n        if (!data) {\n            log.warn(\"No response content, aborting\", ev);\n            return;\n        }\n        if (cfgs[0].source === \"none\") {\n            // Special case, we want to call something, but we don't want to inject anything\n            data = \"\";\n        }\n        const sources$ = await this.callTypeHandler(cfgs[0].dataType, \"sources\", $el, [\n            cfgs,\n            data,\n            ev,\n        ]);\n        /* pick the title source for dedicated handling later\n          Title - if present - is always appended at the end. */\n        let $title;\n        if (\n            sources$ &&\n            sources$[sources$.length - 1] &&\n            sources$[sources$.length - 1][0] &&\n            sources$[sources$.length - 1][0].nodeName === \"TITLE\"\n        ) {\n            $title = sources$[sources$.length - 1];\n        }\n        cfgs.forEach((cfg, idx1) => {\n            const perform_inject = () => {\n                if (cfg.target !== \"none\") {\n                    for (const target of cfg.$target) {\n                        this._performInjection(\n                            target,\n                            $el,\n                            sources$[idx1],\n                            cfg,\n                            ev.target,\n                            $title\n                        );\n                    }\n                }\n            };\n            if (cfg.processDelay) {\n                setTimeout(() => perform_inject(), cfg.processDelay);\n            } else {\n                perform_inject();\n            }\n        });\n        if (cfgs[0].nextHref && $el.is(\"a\")) {\n            // In case next-href is specified the anchor's href will\n            // be set to it after the injection is triggered.\n            $el.attr({ href: cfgs[0].nextHref.replace(/&amp;/g, \"&\") });\n            this.destroy($el);\n        }\n        $el.off(\"pat-ajax-success.pat-inject\");\n        $el.off(\"pat-ajax-error.pat-inject\");\n    },\n\n    async _onInjectError($el, cfgs, event) {\n        let explanation = \"\";\n        const status = event.jqxhr.status;\n        const timestamp = new Date();\n        if (status % 100 == 4) {\n            explanation =\n                \"Sorry! We couldn't find the page to load. Please make a screenshot and send it to support. Thank you!\";\n        } else if (status % 100 == 5) {\n            explanation =\n                \"I am very sorry! There was an error at the server. Please make a screenshot and contact support. Thank you!\";\n        } else if (status == 0) {\n            explanation =\n                \"It seems, the server is down. Please make a screenshot and contact support. Thank you!\";\n        }\n\n        let error_page;\n        let error_page_fragment;\n        const url_params = new URLSearchParams(window.location.search);\n        if (url_params.get(\"pat-inject-errorhandler.off\") === null) {\n            // Prepare a error page to be injected into the document.\n\n            // Try to get a suitable error message from pre-configured error pages.\n            const error_page_url = document\n                ?.querySelector(`meta[name^=pat-inject-status-${status}]`)\n                ?.getAttribute(\"content\", false);\n            error_page_fragment = error_page_url?.split(\"#\")[1];\n            error_page_fragment = error_page_fragment ? `#${error_page_fragment}` : null;\n\n            if (error_page_fragment) {\n                error_page = document.createElement(\"html\");\n                error_page.innerHTML = event.jqxhr.responseText;\n                error_page = error_page.querySelector(error_page_fragment);\n            }\n\n            if (!error_page && error_page_url) {\n                try {\n                    const error_page_response = await fetch(error_page_url, {\n                        method: \"GET\",\n                    });\n                    error_page = document.createElement(\"html\");\n                    error_page.innerHTML = await error_page_response.text();\n                    error_page = error_page.querySelector(error_page_fragment || \"body\");\n                } catch {\n                    // fall back to standard error message and ignore.\n                }\n            }\n        }\n\n        // clean up\n        for (const cfg of cfgs) {\n            if (\"$created_target\" in cfg) {\n                cfg.$created_target.remove();\n            }\n            cfg.$target.removeClass(cfg.loadingClass);\n            $el.removeClass(cfg.executingClass);\n        }\n        $el.off(\"pat-ajax-success.pat-inject\");\n        $el.off(\"pat-ajax-error.pat-inject\");\n\n        if (error_page) {\n            const error_zone = document.querySelector(error_page_fragment || \"body\");\n            error_zone.innerHTML = error_page.innerHTML;\n            registry.scan(error_zone); // initialize any patterns in error page\n        } else {\n            const msg_attr = `${explanation} Status is ${status} ${event.jqxhr.statusText}, time was ${timestamp}. You can click to close this.`;\n            $(\"body\").attr(\"data-error-message\", msg_attr);\n            $(\"body\").on(\"click\", () => {\n                $(\"body\").removeAttr(\"data-error-message\");\n                window.location.href = window.location.href; // reload\n            });\n        }\n    },\n\n    execute(cfgs, $el) {\n        /* Actually execute the injection.\n         *\n         * Either by making an ajax request or by spoofing an ajax\n         * request when the content is readily available in the current page.\n         */\n        const el = utils.jqToNode($el);\n        // get a kinda deep copy, we scribble on it\n        cfgs = cfgs.map((cfg) => $.extend({}, cfg));\n        if (!this.verifyConfig(cfgs)) {\n            return;\n        }\n        if (!this.askForConfirmation(cfgs)) {\n            return;\n        }\n        if ($el.data(\"pat-inject-triggered\")) {\n            // Prevent double triggers;\n            return;\n        }\n        $el.data(\"pat-inject-triggered\", true);\n\n        for (const cfg of cfgs) {\n            // Add a execute class on the pat-inject element.\n            if (cfg?.executingClass) {\n                el.classList.add(cfg.executingClass);\n            }\n            // Add a loading class to the target.\n            // Can be used for loading-spinners.\n            if (cfg?.loadingClass && cfg?.target !== \"none\") {\n                cfg.$target.addClass(cfg.loadingClass);\n            }\n        }\n\n        $el.on(\"pat-ajax-success.pat-inject\", async (e) => {\n            this._onInjectSuccess($el, cfgs, e);\n\n            // Wait for the next tick to ensure that the close-panel listener\n            // is called before this one, even for non-async local injects.\n            await utils.timeout(1);\n            // Remove the close-panel event listener.\n            events.remove_event_listener(el, \"pat-inject--close-panel\");\n            // Only close the panel if a close-panel event was catched previously.\n            if (do_close_panel) {\n                do_close_panel = false;\n                // Re-trigger close-panel event if it was caught while injection was in progress.\n                el.dispatchEvent(\n                    new Event(\"close-panel\", { bubbles: true, cancelable: true })\n                );\n            }\n        });\n        $el.on(\"pat-ajax-error.pat-inject\", this._onInjectError.bind(this, $el, cfgs));\n        $el.on(\"pat-ajax-success.pat-inject pat-ajax-error.pat-inject\", () =>\n            $el.removeData(\"pat-inject-triggered\")\n        );\n\n        // Prevent closing the panel while injection is in progress.\n        let do_close_panel = false;\n        events.add_event_listener(el, \"close-panel\", \"pat-inject--close-panel\", (e) => {\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            do_close_panel = true;\n        });\n\n        if (cfgs[0].url.length) {\n            ajax.request($el, {\n                \"url\": cfgs[0].url,\n                \"browser-cache\": cfgs[0].browserCache,\n            });\n        } else {\n            // If there is no url specified, then content is being fetched\n            // from the same page.\n            // No need to do an ajax request for this, so we spoof the ajax\n            // event.\n            $el.trigger({\n                type: \"pat-ajax-success\",\n                jqxhr: {\n                    responseText: $(\"body\").html(),\n                },\n            });\n        }\n    },\n\n    _inject(trigger, source_nodes, target, cfg) {\n        if (cfg.source === \"none\") {\n            // Special case. Clear the target after ajax call.\n            target.replaceWith(\"\");\n            return true;\n        }\n        if (source_nodes.length === 0) {\n            log.warn(\"Aborting injection, source not found:\", source_nodes);\n            $(trigger).trigger(\"pat-inject-missingSource\", {\n                url: cfg.url,\n                selector: cfg.source,\n            });\n            return false;\n        }\n        if (cfg.target === \"none\") {\n            // Special case. Don't do anything, we don't want any result\n            return true;\n        }\n        if (!target) {\n            log.warn(\"Aborting injection, target not found:\", target);\n            $(trigger).trigger(\"pat-inject-missingTarget\", {\n                selector: cfg.target,\n            });\n            return false;\n        }\n\n        // cfg.action to DOM method mapping\n        const method = {\n            content: \"replaceChildren\",\n            contentafter: \"append\",\n            contentbefore: \"prepend\",\n            element: \"replaceWith\",\n            elementafter: \"after\",\n            elementbefore: \"before\",\n        }[cfg.action];\n\n        // Inject the content HERE!\n        target[method](...source_nodes);\n\n        return true;\n    },\n\n    _sourcesFromHtml(html, url, sources) {\n        const $html = this._parseRawHtml(html, url);\n        return sources.map((source) => {\n            if (source === \"body\") {\n                source = \"#__original_body\";\n            }\n            if (source === \"none\") {\n                return $(\"<!-- -->\");\n            }\n            const $source = $html.find(source);\n\n            if ($source.length === 0) {\n                if (source != \"title\") {\n                    log.warn(\"No source elements for selector:\", source, $html);\n                }\n            }\n\n            $source.find('a[href^=\"#\"]').each((idx, el_) => {\n                const href = el_.getAttribute(\"href\");\n                if (href.indexOf(\"#{1}\") !== -1) {\n                    // We ignore hrefs containing #{1} because they're not\n                    // valid and only applicable in the context of\n                    // pat-clone.\n                    return;\n                }\n                // Skip in-document links pointing to an id that is inside\n                // this fragment.\n                if (href.length === 1) {\n                    // Special case for top-of-page links\n                    el_.href = url;\n                } else if (!$source.find(href).length) {\n                    el_.href = url + href;\n                }\n            });\n            return $source;\n        });\n    },\n\n    _rebaseAttrs: {\n        a: \"href\",\n        form: \"action\",\n        img: \"src\",\n        object: \"data\",\n        source: \"src\",\n        video: \"src\",\n    },\n\n    _rebaseOptions: {\n        \"calendar\": [\"url\", \"event-sources\"],\n        \"collapsible\": [\"load-content\"],\n        \"date-picker\": [\"i18n\"],\n        \"datetime-picker\": [\"i18n\"],\n        \"inject\": [\"url\"],\n    },\n\n    _rebaseURL(base, url) {\n        if (url.indexOf(\"://\") !== -1 || url[0] === \"/\" || url.indexOf(\"data:\") === 0) {\n            return url;\n        }\n        base = new URL(base, window.location).href; // If base is relative make it absolute.\n        return base.slice(0, base.lastIndexOf(\"/\") + 1) + url;\n    },\n\n    _rebaseHTML(base, html) {\n        if (html === \"\") {\n            // Special case, source is none\n            return \"\";\n        }\n\n        // Parse the html string into a DOM tree.\n        const page = document.createElement(\"div\");\n        page.innerHTML = html;\n\n        // Create efficient selector for any tag with it's corresponding\n        // attribute from _rebaseAttrs. Note: the current data structure allows\n        // only for one attribute to be rebased per tag.\n        const rebase_selector = Object.entries(this._rebaseAttrs)\n            .map(([tag, attr]) => `${tag}[${attr}]`)\n            .join(\", \");\n        for (const el_ of page.querySelectorAll(rebase_selector)) {\n            const attr = this._rebaseAttrs[el_.nodeName.toLowerCase()];\n            let value = el_.getAttribute(attr);\n\n            if (\n                value &&\n                value.slice(0, 2) !== \"@@\" &&\n                value[0] !== \"#\" &&\n                value.slice(0, 7) !== \"mailto:\" &&\n                value.slice(0, 4) !== \"tel:\" &&\n                value.slice(0, 4) !== \"fax:\" &&\n                value.slice(0, 7) !== \"callto:\" &&\n                value.slice(0, 10) !== \"ts3server:\" &&\n                value.slice(0, 6) !== \"teams:\" &&\n                value.slice(0, 11) !== \"javascript:\"\n            ) {\n                value = this._rebaseURL(base, value);\n                el_.setAttribute(attr, value);\n            }\n        }\n\n        for (const [pattern_name, opts] of Object.entries(this._rebaseOptions)) {\n            for (const el_ of dom.querySelectorAllAndMe(\n                page,\n                `[data-pat-${pattern_name}]`\n            )) {\n                const pattern = registry.patterns?.[pattern_name];\n                const pattern_parser = pattern?.parser;\n                if (!pattern_parser) {\n                    continue;\n                }\n                // parse: no default options, possibly multiple configs, no grouping.\n                const options = pattern_parser.parse(el_, {}, true, false, false);\n                let changed = false;\n                for (const config of options) {\n                    for (const opt of opts) {\n                        const val = config[opt];\n                        if (!val) {\n                            continue;\n                        }\n                        changed = true;\n                        if (Array.isArray(val)) {\n                            config[opt] = val.map((it) => this._rebaseURL(base, it));\n                        } else {\n                            config[opt] = this._rebaseURL(base, val);\n                        }\n                    }\n                }\n                if (changed) {\n                    el_.setAttribute(\n                        `data-pat-${pattern_name}`,\n                        JSON.stringify(options.length === 1 ? options[0] : options)\n                    );\n                }\n            }\n        }\n\n        return page.innerHTML.trim();\n    },\n\n    _parseRawHtml(html, url = \"\") {\n        // remove script tags and head and replace body by a div\n        const title = html.match(/\\<title\\>(.*)\\<\\/title\\>/);\n        let clean_html = html\n            .replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, \"\")\n            .replace(/<head\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/head>/gi, \"\")\n            .replace(/<html([^>]*?)>/gi, \"\")\n            .replace(/<\\/html([^>]*?)>/gi, \"\")\n            .replace(/<body([^>]*?)>/gi, '<div id=\"__original_body\">')\n            .replace(/<\\/body([^>]*?)>/gi, \"</div>\");\n\n        if (title && title.length == 2) {\n            clean_html = title[0] + clean_html;\n        }\n        try {\n            clean_html = this._rebaseHTML(url, clean_html);\n        } catch (e) {\n            log.error(\"Error rebasing urls\", e);\n        }\n        const $html = $(\"<div/>\").html(clean_html);\n        if ($html.children().length === 0) {\n            log.warn(\"Parsing html resulted in empty jquery object:\", clean_html);\n        }\n        return $html;\n    },\n\n    _initAutoloadVisible($el, cfgs) {\n        if ($el.data(\"pat-inject-autoloaded\")) {\n            // ignore executed autoloads\n            return false;\n        }\n\n        const el = utils.jqToNode($el);\n\n        // delay: default is 200ms to allow scrolling over and past autoload-visible elements without loading them.\n        const delay = cfgs[0].delay || 200;\n        log.debug(`Delay time: ${delay}`);\n\n        // function to trigger the autoload and mark as triggered\n        const trigger = (event) => {\n            if ($el.data(\"pat-inject-autoloaded\")) {\n                log.debug(`autoload-visible trigger skipped ${el}`);\n                return false;\n            }\n            $el.data(\"pat-inject-autoloaded\", true);\n            this.onTrigger({ currentTarget: el });\n            event && event.preventDefault();\n            log.debug(`autoload-visible trigger run ${el}`);\n            return true;\n        };\n\n        // Config see: https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n        const intersection_observer_config = {\n            threshold: 0, // If even one pixel is visible, the callback will be run.\n            root: null, // Root is browser viewport. If the element is visible to the user, the callback will be run.\n            margin: \"0px\", // No margins. The element is not preloaded.\n        };\n\n        let timeout_id = null;\n        const observer = new IntersectionObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.isIntersecting) {\n                    // Run the callback after 200ms to prevent loading all\n                    // visible elements when scrolling over.\n                    timeout_id = window.setTimeout(() => {\n                        observer.disconnect(); // Stop observing loaded elements.\n                        trigger();\n                    }, delay);\n                    log.debug(`autoload-visible intersecting ${el}`);\n                } else {\n                    window.clearTimeout(timeout_id);\n                    log.debug(`autoload-visible not intersecting ${el}`);\n                }\n            }\n        }, intersection_observer_config);\n        observer.observe(el);\n    },\n\n    _initIdleTrigger($el, delay) {\n        // TODO: handle item removed from DOM\n        const timeout = parseInt(delay, 10);\n        let timer;\n\n        const el = utils.jqToNode($el);\n\n        const onTimeout = () => {\n            this.onTrigger({ currentTarget: el });\n            unsub();\n            clearTimeout(timer);\n        };\n\n        const onInteraction = utils.debounce(() => {\n            if (!document.body.contains(el)) {\n                unsub();\n                return;\n            }\n            clearTimeout(timer);\n            timer = setTimeout(onTimeout, timeout);\n        }, timeout);\n\n        const unsub = () => {\n            for (const event of [\"scroll\", \"resize\"]) {\n                window.removeEventListener(event, onInteraction);\n            }\n            for (const event of [\n                \"click\",\n                \"keypress\",\n                \"keyup\",\n                \"mousemove\",\n                \"touchstart\",\n                \"touchend\",\n            ]) {\n                document.removeEventListener(event, onInteraction);\n            }\n        };\n\n        onInteraction();\n\n        for (const event of [\"scroll\", \"resize\"]) {\n            window.addEventListener(event, onInteraction);\n        }\n        for (const event of [\n            \"click\",\n            \"keypress\",\n            \"keyup\",\n            \"mousemove\",\n            \"touchstart\",\n            \"touchend\",\n        ]) {\n            document.addEventListener(event, onInteraction);\n        }\n    },\n\n    registerTypeHandler(type, handler) {\n        this.handlers[type] = handler;\n    },\n\n    async callTypeHandler(type, fn, context, params) {\n        type = type || \"html\";\n        if (this.handlers[type] && $.isFunction(this.handlers[type][fn])) {\n            return await this.handlers[type][fn].bind(this)(...params);\n        } else {\n            return null;\n        }\n    },\n\n    handlers: {\n        html: {\n            sources(cfgs, data) {\n                const sources = cfgs.map((cfg) => cfg.source);\n                sources.push(\"title\");\n                const result = this._sourcesFromHtml(data, cfgs[0].url, sources);\n                return result;\n            },\n        },\n    },\n};\n\n$(document).on(\"patterns-injected.inject\", async (ev, cfg, trigger, injected) => {\n    /* Listen for the patterns-injected event.\n     *\n     * Remove the \"loading-class\" classes from all injection targets and\n     * then scan the injected content for new patterns.\n     */\n    if (cfg?.skipPatInjectHandler) {\n        // Allow skipping this handler but still have other handlers in other\n        // patterns listen to ``patterns-injected``.\n        return;\n    }\n    if (cfg) {\n        cfg.$target.removeClass(cfg.loadingClass);\n        // Remove the executing class, add the executed class to the element with pat.inject on it.\n        $(trigger).removeClass(cfg.executingClass).addClass(cfg.executedClass);\n    }\n    if (injected.nodeType !== TEXT_NODE && injected.nodeType !== COMMENT_NODE) {\n        registry.scan(injected, null, { type: \"injection\", element: trigger });\n        $(injected).trigger(\"patterns-injected-scanned\");\n\n        await utils.timeout(10); // Wait a bit before dispatching next event.\n        injected.dispatchEvent(\n            new CustomEvent(\"patterns-injected-delayed\", {\n                bubbles: true,\n                cancelable: true,\n                detail: {\n                    injected: injected,\n                },\n            })\n        );\n    }\n});\n\n$(window).on(\"popstate\", (event) => {\n    // popstate also triggers on traditional anchors\n    if (!event.originalEvent.state && \"replaceState\" in history) {\n        try {\n            history.replaceState(\"anchor\", \"\", document.location.href);\n        } catch (e) {\n            log.debug(e);\n        }\n        return;\n    }\n    // Not only change the URL, also reload the page.\n    window.location.reload();\n});\n\n// this entry ensures that the initally loaded page can be reached with\n// the back button\nif (\"replaceState\" in history) {\n    try {\n        history.replaceState(\"pageload\", \"\", document.location.href);\n    } catch (e) {\n        log.debug(e);\n    }\n}\n\nregistry.register(inject);\nexport default inject;\n","import $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport events from \"../../core/events\";\nimport inject from \"../inject/inject\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\n// Initialize close-panel functionality.\nimport \"../close-panel/close-panel\";\n\nexport const parser = new Parser(\"modal\");\nparser.addArgument(\"class\");\nparser.addArgument(\"closing\", [\"close-button\"], [\"close-button\", \"outside\"], true);\nparser.addArgument(\"close-text\", \"Close\");\nparser.addArgument(\"panel-header-content\", \":first:not(.header)\");\nparser.addArgument(\"source\", null); // If not given, the href should specify the source via a url fragment.\nparser.addArgument(\"target\", \"#pat-modal\");\n\nexport default Base.extend({\n    name: \"modal\",\n    jquery_plugin: true,\n    // div's are turned into modals\n    // links, forms and subforms inject modals\n    trigger: \"div.pat-modal, a.pat-modal, form.pat-modal, .pat-modal.pat-subform\",\n\n    async init($el, opts, trigger) {\n        if (window.__patternslib_import_styles) {\n            import(\"./_modal.scss\");\n        }\n\n        this.options = parser.parse(this.$el, opts);\n        if (trigger && trigger.type === \"injection\") {\n            $.extend(this.options, parser.parse($(trigger.element), {}, false, false));\n        }\n        if (this.$el.is(\"div\")) {\n            this._init_div1();\n        } else {\n            await this._init_inject1();\n        }\n    },\n\n    async _init_inject1() {\n        // This will get remote content via pat-inject, add the pat-modal class\n        // to the result and pat-inject's pattern scanning will then call\n        // ``_init_div1``.\n\n        const opts = {\n            ...(this.options.source && { source: this.options.source }),\n            target: this.options.target,\n            class:\n                \"pat-modal\" + (this.options[\"class\"] ? \" \" + this.options[\"class\"] : \"\"),\n        };\n        if (this.options.url) {\n            opts.url = this.options.url;\n        }\n        if (this.options.trigger) {\n            opts.trigger = this.options.trigger;\n        }\n\n        // if $el is already inside a modal, do not detach #pat-modal,\n        // because this would unnecessarily close the modal itself\n        if (!this.$el.closest(\"#pat-modal\")) {\n            $(\"#pat-modal\").detach();\n        }\n        this.$el.on(\"pat-inject-missingSource pat-inject-missingTarget\", () => {\n            $(\"#pat-modal\").detach();\n        });\n\n        await inject.init(this.$el, opts);\n    },\n\n    _init_div1() {\n        // This is always called and will inject the modal in the page.\n\n        const header = document.createElement(\"div\");\n        header.setAttribute(\"class\", \"header\");\n\n        if (this.options.closing.indexOf(\"close-button\") !== -1) {\n            header.innerHTML = `<button type=\"button\" class=\"close-panel\">${this.options.closeText}</button>`;\n            registry.scan(header, [\"close-panel\"]); // initialize close-panel\n        }\n\n        // We cannot handle text nodes here\n        let $children;\n        if (this.options.panelHeaderContent === \"none\") {\n            $children = this.$el.children();\n        } else {\n            $children = this.$el.children(\n                \":last, :not(\" + this.options.panelHeaderContent + \")\"\n            );\n        }\n\n        if ($children.length) {\n            $children.wrapAll(\"<div class='panel-content' />\");\n        } else {\n            this.$el.append(\"<div class='panel-content' />\");\n        }\n        this.$el.children(\".panel-content\").before(header);\n        this.$el.children(this.options.panelHeaderContent).prependTo(header);\n\n        // Restore focus in case the active element was a child of $el and\n        // the focus was lost during the wrapping.\n        document.activeElement?.focus();\n\n        this._init_handlers();\n        this.resize();\n        this.setPosition();\n\n        $(\"body\").addClass(\"modal-active\");\n        this.el.dispatchEvent(\n            new Event(\"pat-modal-ready\", { bubbles: true, cancelable: true })\n        );\n    },\n\n    _init_handlers() {\n        events.add_event_listener(this.el, \"close-panel\", \"pat-modal--close-panel\", () =>\n            this.destroy()\n        );\n\n        $(document).on(\"keyup.pat-modal\", this._onKeyUp.bind(this));\n        if (this.options.closing.indexOf(\"outside\") !== -1) {\n            $(document).on(\"click.pat-modal\", this._onPossibleOutsideClick.bind(this));\n        }\n        $(window).on(\n            \"resize.pat-modal-position\",\n            utils.debounce(this.resize.bind(this), 400)\n        );\n        $(document).on(\n            \"pat-inject-content-loaded.pat-modal-position\",\n            \"#pat-modal\",\n            utils.debounce(this.resize.bind(this), 400)\n        );\n        $(document).on(\n            \"patterns-injected.pat-modal-position\",\n            \"#pat-modal,div.pat-modal\",\n            utils.debounce(this.resize.bind(this), 400)\n        );\n        $(document).on(\n            \"pat-update.pat-modal-position\",\n            \"#pat-modal,div.pat-modal\",\n            utils.debounce(this.resize.bind(this), 50)\n        );\n    },\n\n    _onPossibleOutsideClick(ev) {\n        if (this.$el.has(ev.target)) {\n            this.destroy();\n        }\n    },\n\n    _onKeyUp(ev) {\n        if (ev.which === 27) {\n            this.destroy();\n        }\n    },\n\n    getTallestChild() {\n        let $tallest_child;\n        for (const child of $(\"*\", this.$el)) {\n            const $child = $(child);\n            if (typeof $tallest_child === \"undefined\") {\n                $tallest_child = $child;\n            } else if ($child.outerHeight(true) > $tallest_child.outerHeight(true)) {\n                $tallest_child = $child;\n            }\n        }\n        return $tallest_child;\n    },\n\n    setPosition() {\n        this.$el.css(\"top\", ($(window).innerHeight() - this.$el.height()) / 2);\n    },\n\n    resize() {\n        // reset the height before setting a new one\n        this.$el.removeClass(\"max-height\").css(\"height\", \"\");\n\n        const panel_content_elem = this.$el.find(\".panel-content\");\n        const header_elem = this.$el.find(\".header\");\n        const modal_height =\n            panel_content_elem.outerHeight(true) + header_elem.outerHeight(true);\n        if (this.$el.height() < modal_height) {\n            this.$el.addClass(\"max-height\").css({ height: modal_height + \"px\" });\n            this.setPosition();\n        }\n    },\n\n    async destroy() {\n        await utils.timeout(1); // wait a tick for event handlers (e.g. form submit) have a chance to kick in first.\n        $(document).off(\".pat-modal\");\n        this.$el.remove();\n        $(\"body\").removeClass(\"modal-active\");\n        $(\"body\").removeClass(\"modal-panel\");\n    },\n});\n","import Base from \"../../core/base\";\nimport dom from \"../../core/dom\";\nimport logging from \"../../core/logging\";\nimport Modal from \"../modal/modal\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport store from \"../../core/store\";\n\nconst log = logging.getLogger(\"calendar\");\nexport const parser = new Parser(\"calendar\");\n\nparser.addArgument(\"calendar-controls\", null); // Calendar controls must have \"id\" attr set\nparser.addArgument(\"category-controls\", null);\nparser.addArgument(\"column-day\", \"dddd M/d\");\nparser.addArgument(\"column-month\", \"ddd\");\nparser.addArgument(\"column-week\", \"ddd M/d\");\nparser.addArgument(\"initial-date\", null);\nparser.addArgument(\"initial-view\", \"month\", [\n    // Simple names\n    \"month\",\n    \"week\",\n    \"day\",\n    \"list\",\n    // FC 5 names\n    \"dayGridMonth\",\n    \"dayGridWeek\",\n    \"dayGridDay\",\n    \"timeGridWeek\",\n    \"timeGridDay\",\n    \"listDay\",\n    \"listWeek\",\n    \"listMonth\",\n    \"listYear\",\n    \"listWeek\",\n    // FC 3 names\n    \"basicWeek\",\n    \"basicDay\",\n    \"agendaWeek\",\n    \"agendaDay\",\n]);\nparser.addArgument(\"drag-and-drop\", true, [true, false]);\nparser.addArgument(\"drop-external-events\", true, [true, false]);\nparser.addArgument(\"external-event-selector\", \"\");\nparser.addArgument(\"first-day\", null);\nparser.addArgument(\"first-hour\", \"6\");\nparser.addArgument(\"height\", \"auto\");\nparser.addArgument(\"ignore-url\", false);\nparser.addArgument(\"lang\", null); // If not set, use \"en\" (See below)\nparser.addArgument(\"store\", \"none\", [\"none\", \"session\", \"local\"]);\nparser.addArgument(\"time-format\", \"24h\", [\"24h\", \"12h\"]);\nparser.addArgument(\"timezone\", null);\nparser.addArgument(\"title-day\", \"dddd, MMM d, YYYY\");\nparser.addArgument(\"title-month\", \"MMMM YYYY\");\nparser.addArgument(\"title-week\", \"MMM D YYYY\");\nparser.addArgument(\"event-color\", \"blue\");\n\nparser.addArgument(\"url\", null);\nparser.addArgument(\"event-sources\", [], undefined, true);\n//parser.addArgument(\"add-url\", null);\n\n// pat-inject support for individual events\nparser.addArgument(\"pat-inject-source\", null);\nparser.addArgument(\"pat-inject-target\", null);\n\n// pat-modal support for individual events\nparser.addArgument(\"pat-modal-class\", null);\n\n// pat-tooltip support for individual events\nparser.addArgument(\"pat-tooltip-source\", null, [\"ajax\", null]);\n\n// pat-switch support for individual events\nparser.addArgument(\"pat-switch-selector\", null);\nparser.addArgument(\"pat-switch-remove\", null);\nparser.addArgument(\"pat-switch-add\", null);\n\nparser.addAlias(\"default-date\", \"initial-date\");\nparser.addAlias(\"default-view\", \"initial-view\");\n\nexport default Base.extend({\n    name: \"calendar\",\n    trigger: \".pat-calendar\",\n    classMap: {\n        month: \".view-month\",\n        agendaWeek: \".view-week\",\n        agendaDay: \".view-day\",\n    },\n    viewMap: {\n        month: \"dayGridMonth\",\n        week: \"timeGridWeek\",\n        day: \"timeGridDay\",\n        list: \"listMonth\",\n        basicWeek: \"dayGridWeek\",\n        basicDay: \"dayGridDay\",\n        agendaWeek: \"timeGridWeek\",\n        agendaDay: \"timeGridDay\",\n    },\n    dayNames: [\"su\", \"mo\", \"tu\", \"we\", \"th\", \"fr\", \"sa\"],\n    active_categories: null,\n    parser: parser,\n\n    async init() {\n        this.options = store.updateOptions(this.el, parser.parse(this.el, this.options));\n\n        const Calendar = (await import(\"@fullcalendar/core\")).Calendar;\n        const fcDayGrid = (await import(\"@fullcalendar/daygrid\")).default;\n        const fcInteraction = (await import(\"@fullcalendar/interaction\")).default;\n        const fcList = (await import(\"@fullcalendar/list\")).default;\n        const fcLuxon = (await import(\"@fullcalendar/luxon2\")).default;\n        const fcTimeGrid = (await import(\"@fullcalendar/timegrid\")).default;\n\n        // Save some UI elements for reuse.\n        const calendar_controls = this.options.calendarControls\n            ? document.querySelector(this.options.calendarControls)\n            : this.el;\n        this.el_jump_next = calendar_controls.querySelector(\".jump-next\");\n        this.el_jump_prev = calendar_controls.querySelector(\".jump-prev\");\n        this.el_jump_today = calendar_controls.querySelector(\".jump-today\");\n        this.el_view_month = calendar_controls.querySelector(\".view-month\");\n        this.el_view_week = calendar_controls.querySelector(\".view-week\");\n        this.el_view_day = calendar_controls.querySelector(\".view-day\");\n        this.el_view_list_year = calendar_controls.querySelector(\".view-listYear\");\n        this.el_view_list_month = calendar_controls.querySelector(\".view-listMonth\");\n        this.el_view_list_week = calendar_controls.querySelector(\".view-listWeek\");\n        this.el_view_list_day = calendar_controls.querySelector(\".view-listDay\");\n        this.el_timezone = calendar_controls.querySelector(\"select[name='timezone']\");\n        this.el_title =\n            this.el.querySelector(\".cal-title\") ||\n            calendar_controls.querySelector(\".cal-title\");\n\n        const storage_prefix = `${this.name}-${window.location.pathname}`;\n        this.storage =\n            this.options.store === \"none\"\n                ? null\n                : store[this.options.store](storage_prefix);\n\n        const query_string = new URLSearchParams(window.location.search);\n\n        const config = {};\n        config.headerToolbar = false;\n        config.initialDate =\n            query_string.get(\"date\") ||\n            this.storage?.get?.(\"date\") ||\n            this.options.initial.date;\n        config.initialView =\n            query_string.get(\"view\") ||\n            this.storage?.get?.(\"view\") ||\n            this.options.initial.view;\n        config.initialView = this.viewMap[config.initialView] || config.initialView;\n        config.editable = this.options.editable || false;\n        config.plugins = [fcDayGrid, fcInteraction, fcList, fcLuxon, fcTimeGrid];\n        config.eventColor = this.options.eventColor;\n\n        let lang = this.options.lang || dom.acquire_attribute(this.el, \"lang\") || \"en\";\n        // we don't support any country-specific language variants, always use first 2 letters\n        lang = lang.substr(0, 2).toLowerCase();\n        if (lang !== \"en\") {\n            const locale = await import(`@fullcalendar/core/locales/${lang}.js`);\n            config.locale = locale.default;\n            log.debug(`Loaded locale for ${lang}`);\n        }\n        if (this.options.first.day !== null) {\n            config.firstDay = this.options.first.day;\n            if (this.dayNames.indexOf(this.options.first.day) >= 0) {\n                // Set firstDay as string\n                config.firstDay = this.dayNames.indexOf(this.options.first.day);\n            }\n        }\n\n        let timezone = this.el_timezone?.value || this.options.timezone || null;\n        if (timezone) {\n            config.timeZone = timezone;\n        }\n\n        if (this.options.timeFormat == \"12h\") {\n            // 12h format\n            config.eventTimeFormat = {\n                hour12: true,\n                meridiem: \"narrow\",\n                hour: \"numeric\",\n            };\n        } else {\n            // 24h format\n            config.eventTimeFormat = {\n                hour12: false,\n                meridiem: \"false\",\n                hour: \"numeric\",\n            };\n        }\n\n        const sources = [...(this.options.event.sources || [])];\n        if (this.options.url && !sources.includes(this.options.url)) {\n            // add, but do not re-add same source twice.\n            sources.push(this.options.url);\n        }\n        config.eventSources = [];\n        for (const [idx, url] of sources.entries()) {\n            const src = this.create_event_source(idx, url);\n            config.eventSources.push(src);\n        }\n\n        // Restore category controls from local storage before showing events.\n        this._restoreCategoryControls();\n        this._registerCategoryControls();\n        this.reset_active_categories();\n        config.eventDidMount = (args) => this.init_event(args);\n\n        // Need to create a sub-element of ``pat-calendar`` to allow custom\n        // controls within pat-calendar to not be overwritten.\n        const cal_el = document.createElement(\"div\");\n        cal_el.setAttribute(\"class\", \"pat-calendar__fc\");\n        this.el.appendChild(cal_el);\n\n        if (this.options.addUrl) {\n            config.dateClick = this.addNewEvent.bind(this);\n            // Create a element for modals/injections\n            this.mod_el = document.createElement(\"section\");\n            this.mod_el.setAttribute(\"class\", \"pat-calendar__modal\");\n            this.el.appendChild(this.mod_el);\n        }\n\n        let calendar = (this.calendar = new Calendar(cal_el, config));\n        calendar.render();\n\n        calendar.on(\"datesSet\", this._viewChanged.bind(this));\n        calendar.on(\"dateClick\", this._viewChanged.bind(this));\n\n        if (this.el_title) {\n            this.el_title.innerHTML = calendar.view.title;\n        }\n\n        this._registerCalendarControls();\n        this.setActiveClasses();\n    },\n\n    create_event_source(idx, url) {\n        return {\n            id: `event-source--${idx + 1}`,\n            events: (info, success, failure) =>\n                this._fetch_events(url, info, success, failure),\n            className: `event-source--${idx + 1}`,\n        };\n    },\n\n    event_mapper(event) {\n        // Maps backend results to the fullcalendar event schema.\n        // Default implementation confirms to plone.restapi conventions.\n        const ret = {\n            id: event.UID,\n            title: event.title,\n            start: new Date(event.start),\n            end: new Date(event.end),\n            allDay: event.whole_day,\n            url: event.url || event[\"@id\"],\n\n            backgroundColor: event.color,\n            borderColor: event.color,\n            classNames: event.class ? event.class.split(\" \") : [],\n\n            // non fullcalendar standard fields\n            description: event.description,\n            text: event.text,\n            location: event.location,\n            open_end: event.open_end,\n            recurrence: event.recurrence,\n            attendees: event.attendees,\n            contact_name: event.contact_name,\n            contact_phone: event.contact_phone,\n            contact_email: event.contact_email,\n            event_url: event.event_url,\n        };\n        for (const prop in ret) {\n            if (!ret[prop]) {\n                delete ret[prop];\n            }\n        }\n        return ret;\n    },\n\n    update_event(event, data) {\n        // Updated an existing event with new event properties.\n        event.setDates(data.start, data.end);\n        event.setAllDay(data.allDay);\n        event.setProp(\"id\", data.id);\n        event.setProp(\"title\", data.title);\n        event.setProp(\"url\", data.url);\n\n        event.setProp(\"backgroundColor\", data.color);\n        event.setProp(\"borderColor\", data.color);\n\n        event.setExtendedProp(\"description\", data.description);\n        event.setExtendedProp(\"text\", data.text);\n        event.setExtendedProp(\"location\", data.location);\n        event.setExtendedProp(\"open_end\", data.open_end);\n        event.setExtendedProp(\"recurrence\", data.recurrence);\n        event.setExtendedProp(\"attendees\", data.attendees);\n        event.setExtendedProp(\"contact_name\", data.contact_name);\n        event.setExtendedProp(\"contact_phone\", data.contact_phone);\n        event.setExtendedProp(\"contact_email\", data.contact_email);\n        event.setExtendedProp(\"event_url\", data.event_url);\n    },\n\n    async _fetch_events(url, info, success, failure) {\n        let results = [];\n        while (url) {\n            url = url\n                .replace(\"${start_str}\", info.startStr.split(\"T\")[0])\n                .replace(\"${end_str}\", info.endStr.split(\"T\")[0]);\n\n            let response;\n            try {\n                response = await fetch(url, {\n                    method: \"GET\",\n                    mode: \"cors\",\n                    headers: {\n                        \"Accept\": \"application/json\",\n                    },\n                });\n            } catch (e) {\n                failure(e);\n                return;\n            }\n            let result = await response.json();\n            let results_ = result.items?.map(this.event_mapper) || [];\n            results = results.concat(results_);\n\n            // resolve all ``next`` batching urls\n            url = result.batching?.next || null;\n        }\n\n        success(results);\n    },\n\n    init_event(args) {\n        this.filter_event(args.event);\n\n        let do_scan = false;\n\n        // pat-inject support\n        const source = this.options.pat[\"inject-source\"];\n        const target = this.options.pat[\"inject-target\"];\n        if (args.event.url && (source || target)) {\n            // Only set pat-inject if event has a url\n            args.el.classList.add(\"pat-inject\");\n            args.el.setAttribute(\n                \"data-pat-inject\",\n                `target: ${target || \"body\"}; source: ${source || \"body\"}`\n            );\n            do_scan = true;\n        }\n\n        // pat-modal support\n        if (args.event.url && this.options.pat[\"modal-class\"]) {\n            // Only set pat-modal if event has a url\n            args.el.classList.add(\"pat-modal\");\n            args.el.setAttribute(\n                \"data-pat-modal\",\n                `class: ${this.options.pat[\"modal-class\"]}`\n            );\n            do_scan = true;\n        }\n\n        // pat-tooltip support\n        if (args.event.url && this.options.pat[\"tooltip-source\"] === \"ajax\") {\n            // Only set pat-tooltip if event has a url\n            args.el.classList.add(\"pat-tooltip\");\n            args.el.setAttribute(\"data-pat-tooltip\", \"source: ajax\");\n            do_scan = true;\n        }\n\n        // pat-switch support\n        const switch_sel = this.options.pat[\"switch-selector\"];\n        if (switch_sel) {\n            const switch_add = this.options.pat[\"switch-add\"];\n            const switch_rm = this.options.pat[\"switch-remove\"];\n\n            args.el.classList.add(\"pat-switch\");\n            args.el.setAttribute(\n                \"data-pat-switch\",\n                `selector: ${switch_sel}${switch_add ? \"; add: \" + switch_add : \"\"}${\n                    switch_rm ? \"; remove: \" + switch_rm : \"\"\n                }`\n            );\n            do_scan = true;\n        }\n\n        if (do_scan) {\n            registry.scan(args.el);\n        }\n    },\n\n    filter_event(event) {\n        let show = true;\n        if (this.active_categories !== null) {\n            // intersection\n            show =\n                this.active_categories.filter((it) => event.classNames.includes(it))\n                    .length > 0;\n        }\n        if (show) {\n            event.setProp(\"display\", \"auto\");\n        } else {\n            event.setProp(\"display\", \"none\");\n        }\n    },\n\n    reset_active_categories() {\n        const ctrls = this.get_category_controls();\n        this.active_categories = null;\n        if (ctrls.length) {\n            this.active_categories = ctrls.filter((el) => el.checked).map((el) => el.id);\n        }\n        this.storage && this.storage.set(\"active_categories\", this.active_categories);\n    },\n\n    get_category_controls() {\n        const ctrl_containers = this.options.categoryControls\n            ? document.querySelectorAll(this.options.categoryControls)\n            : [this.el];\n        const ctrls = [];\n        for (const it of ctrl_containers) {\n            const inp = it.querySelectorAll(\"input[type=checkbox]\");\n            ctrls.push(...inp);\n        }\n        return [...new Set(ctrls)]; // do not return the same inputs multiple times\n    },\n\n    _registerCategoryControls() {\n        /* The \"category controls\" are checkboxes that cause different\n         * types of events to be shown or hidden.\n         */\n        let timer;\n        for (const ctrl of this.get_category_controls()) {\n            ctrl.addEventListener(\"change\", () => {\n                clearTimeout(timer); // Cancel scheduled filter runs\n                timer = setTimeout(() => {\n                    this.reset_active_categories();\n                    this.calendar.getEvents().map(this.filter_event.bind(this));\n                }, 50);\n            });\n        }\n    },\n\n    _restoreCategoryControls() {\n        /* Restore values of the category controls as stored in store.\n         * NOTE: run BEFORE _registerCalendarControls\n         */\n        const ctrls = this.get_category_controls();\n        const active_categories =\n            (this.storage && this.storage.get(\"active_categories\")) || null;\n\n        if (!ctrls.length || active_categories === null) {\n            // No category controls or never set, use default un/checked status.\n            return;\n        }\n\n        for (const ctrl of ctrls) {\n            if (ctrl.hidden) {\n                // Do not set non-user-interactable inputs.\n                // They are programmatically set.\n                continue;\n            }\n            if (active_categories.includes(ctrl.id)) {\n                ctrl.checked = true;\n            } else {\n                ctrl.checked = false;\n            }\n            ctrl.dispatchEvent(new Event(\"change\", { bubbles: true, cancelable: true }));\n        }\n    },\n\n    _registerCalendarControls() {\n        this.el_jump_next?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.next();\n        });\n\n        this.el_jump_prev?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.prev();\n        });\n\n        this.el_jump_today?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.today();\n        });\n\n        this.el_view_month?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.changeView(\"dayGridMonth\");\n        });\n\n        this.el_view_week?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.changeView(\"timeGridWeek\");\n        });\n\n        this.el_view_day?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.changeView(\"timeGridDay\");\n        });\n\n        this.el_view_list_year?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.changeView(\"listYear\");\n        });\n\n        this.el_view_list_month?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.changeView(\"listMonth\");\n        });\n\n        this.el_view_list_week?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.changeView(\"listWeek\");\n        });\n\n        this.el_view_list_day?.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            this.calendar.changeView(\"listDay\");\n        });\n\n        this.el_timezone?.addEventListener(\"change\", (event) => {\n            event.preventDefault();\n            this.calendar.setOption(\"timeZone\", event.target.value);\n        });\n    },\n\n    setActiveClasses() {\n        // Set active classes of UI elements.\n\n        this.el_jump_today?.classList.remove(\"active\");\n        this.el_view_month?.classList.remove(\"active\");\n        this.el_view_week?.classList.remove(\"active\");\n        this.el_view_day?.classList.remove(\"active\");\n        this.el_view_list_year?.classList.remove(\"active\");\n        this.el_view_list_month?.classList.remove(\"active\");\n        this.el_view_list_week?.classList.remove(\"active\");\n        this.el_view_list_day?.classList.remove(\"active\");\n\n        const cdate = this.calendar.currentData.currentDate;\n        const today = new Date();\n        if (\n            cdate.getYear() === today.getYear() &&\n            cdate.getMonth() === today.getMonth() &&\n            cdate.getDate() === today.getDate()\n        ) {\n            this.el_jump_today?.classList.add(\"active\");\n        }\n\n        switch (this.calendar.view.type) {\n            case \"dayGridMonth\":\n                this.el_view_month?.classList.add(\"active\");\n                break;\n            case \"timeGridWeek\":\n                this.el_view_week?.classList.add(\"active\");\n                break;\n            case \"timeGridDay\":\n                this.el_view_day?.classList.add(\"active\");\n                break;\n            case \"listYear\":\n                this.el_view_list_year?.classList.add(\"active\");\n                break;\n            case \"listMonth\":\n                this.el_view_list_month?.classList.add(\"active\");\n                break;\n            case \"listWeek\":\n                this.el_view_list_week?.classList.add(\"active\");\n                break;\n            case \"listDay\":\n                this.el_view_list_day?.classList.add(\"active\");\n                break;\n        }\n    },\n\n    _viewChanged(data) {\n        // Set title\n        if (this.el_title) {\n            this.el_title.innerHTML = data.view.title;\n        }\n        // store current date and view\n        const date = data.view.currentStart.toISOString();\n        const view = data.view.type;\n        this.storage && this.storage.set(\"date\", date);\n        this.storage && this.storage.set(\"view\", view);\n\n        const query = new URLSearchParams(window.location.search);\n        query.set(\"date\", date);\n        query.set(\"view\", view);\n        history.replaceState(null, null, \"?\" + query.toString());\n\n        this.setActiveClasses();\n    },\n\n    async addNewEvent(info) {\n        let addUrl = this.options.addUrl;\n        if (!addUrl) {\n            return;\n        }\n\n        let start, end, allDay;\n        if (this.calendar.view.type === \"timeGridMonth\") {\n            start = info.date;\n            end = info.date;\n            allDay = true;\n        } else {\n            start = info.date;\n            end = new Date(start.getTime() + 1 * 60 * 60 * 1000); // same as start, 1h offset\n            allDay = false;\n        }\n        addUrl = addUrl\n            .replace(\"${start_str}\", start)\n            .replace(\"${end_str}\", end)\n            .replace(\"${all_day}\", allDay ? \"1\" : \"0\");\n\n        const event = this.calendar.addEvent(\n            {\n                title: \"New Event\",\n                start: start,\n                end: end,\n            },\n            true\n        );\n\n        await new Modal(this.mod_el, {\n            url: addUrl,\n            trigger: \"autoload\",\n        });\n\n        //const mod_el = document.querySelector(\"#pat-modal form\");\n        //mod_el.addEventListener(\"submit\", (e) => {\n        document.addEventListener(\"submit\", async (e) => {\n            const form = e.target;\n            const form_data = new FormData(form);\n            try {\n                const response = await fetch(form.action, {\n                    method: form.method,\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                    },\n                    body: form_data,\n                });\n                let data = await response.json();\n                data = this.event_mapper(data);\n                this.update_event(event, data);\n            } catch (error) {\n                log.error(error);\n                event.remove();\n            }\n        });\n    },\n});\n","/**\n * Patterns carousel\n *\n * Copyright 2017 Syslab.com GmbH Alexander Pilz\n */\nimport $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\n\nconst log = logging.getLogger(\"pat.carousel\");\n\nexport const parser = new Parser(\"carousel\");\nparser.addArgument(\"auto-play\", false);\nparser.addArgument(\"auto-play-speed\", 1000);\nparser.addArgument(\"speed\", 500);\nparser.addArgument(\"height\", \"fixed\");\nparser.addArgument(\"arrows\", \"show\");\nparser.addArgument(\"slides-to-show\", 1);\nparser.addArgument(\"slides-to-scroll\", 1);\nparser.addArgument(\"dots\", \"show\");\nparser.addArgument(\"append-dots\", \"\");\nparser.addArgument(\"infinite\", false);\n\nexport default Base.extend({\n    name: \"carousel\",\n    trigger: \".pat-carousel\",\n\n    async init() {\n        if (window.__patternslib_import_styles) {\n            import(\"slick-carousel/slick/slick.scss\");\n        }\n        await import(\"slick-carousel\");\n        const ImagesLoaded = (await import(\"imagesloaded\")).default;\n\n        this.options = parser.parse(this.el, this.options);\n        this.settings = {\n            autoplay: this.options.auto.play,\n            autoplaySpeed: this.options.auto[\"play-speed\"],\n            speed: this.options.speed,\n            adaptiveHeight: this.options.height === \"adaptive\",\n            arrows: this.options.arrows === \"show\",\n            slidesToShow: this.options.slides[\"to-show\"],\n            slidesToScroll: this.options.slides[\"to-scroll\"],\n            dots: this.options.dots === \"show\",\n            infinite: this.options.infinite,\n        };\n        if (this.options.appendDots) {\n            this.settings.appendDots = this.options.appendDots;\n        }\n\n        ImagesLoaded(this.el, () => this.setup());\n    },\n\n    setup() {\n        const $carousel = $(this.el).slick(this.settings);\n        let $panel_links = $();\n\n        $carousel\n            .children()\n            .each((index, obj) => {\n                if (!obj.id) {\n                    return;\n                }\n                var $links = $(\"a[href=#\" + obj.id + \"]\");\n                // TODO: fix this.\n                // eslint-disable-next-line no-undef\n                if (index === control.currentPage) {\n                    $links.addClass(\"current\");\n                } else {\n                    $links.removeClass(\"current\");\n                }\n                $links.on(\n                    \"click.pat-carousel\",\n                    null,\n                    // TODO: fix this.\n                    // eslint-disable-next-line no-undef\n                    { control: control, index: index },\n                    this.onPanelLinkClick.bind(this)\n                );\n                $panel_links = $panel_links.add($links);\n            })\n            .end()\n            .on(\n                \"slide_complete.pat-carousel\",\n                null,\n                $panel_links,\n                this.onSlideComplete.bind(this)\n            );\n    },\n\n    _loadPanelImages(slider, page) {\n        let $img;\n        log.info(\"Loading lazy images on panel \" + page);\n        slider.$items\n            .eq(page)\n            .find(\"img\")\n            .addBack()\n            .filter(\"[data-src]\")\n            .each((idx, img) => {\n                $img = $(img);\n                this.src = $img.attr(\"data-src\");\n                $img.removeAttr(\"data-src\");\n            });\n    },\n\n    onPanelLinkClick: function (event) {\n        event.data.control.gotoPage(event.data.index, false);\n        event.preventDefault();\n    },\n\n    onInitialized: function (event, slider) {\n        this._loadPanelImages(slider, slider.options.startPanel);\n        this._loadPanelImages(slider, slider.options.startPanel + 1);\n        this._loadPanelImages(slider, 0);\n        this._loadPanelImages(slider, slider.pages + 1);\n    },\n\n    onSlideInit: function (event, slider) {\n        this._loadPanelImages(slider, slider.targetPage);\n    },\n\n    onSlideComplete: function (event, slider) {\n        var $panel_links = event.data;\n        $panel_links.removeClass(\"current\");\n        if (slider.$targetPage[0].id)\n            $panel_links\n                .filter(\"[href=#\" + slider.$targetPage[0].id + \"]\")\n                .addClass(\"current\");\n        this._loadPanelImages(slider, slider.targetPage + 1);\n    },\n});\n","import Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport utils from \"../../core/utils\";\nimport \"../../core/jquery-ext\";\n\nexport const parser = new Parser(\"checklist\");\nparser.addArgument(\"select\", \".select-all\");\nparser.addArgument(\"deselect\", \".deselect-all\");\nparser.addArgument(\"toggle\", \".toggle-all\");\n\nexport default Base.extend({\n    name: \"checklist\",\n    trigger: \".pat-checklist\",\n    jquery_plugin: true,\n    all_selects: [],\n    all_deselects: [],\n    all_toggles: [],\n    all_checkboxes: [],\n    all_radios: [],\n\n    init() {\n        this.options = parser.parse(this.el, this.options, false);\n        this.$el.on(\"patterns-injected\", this._init.bind(this));\n\n        this.change_handler = utils.debounce(() => {\n            this.change_buttons_and_toggles();\n            this.change_checked();\n        }, 50);\n\n        this._init();\n    },\n\n    _init() {\n        this.all_checkboxes = this.el.querySelectorAll(`input[type=checkbox]`);\n        this.all_radios = this.el.querySelectorAll(\"input[type=radio]\");\n\n        this.all_selects = dom.find_scoped(this.el, this.options.select);\n        for (const btn of this.all_selects) {\n            events.add_event_listener(\n                btn,\n                \"click\",\n                \"pat-checklist--select-all--click\",\n                this.select_all.bind(this)\n            );\n        }\n\n        this.all_deselects = dom.find_scoped(this.el, this.options.deselect);\n        for (const btn of this.all_deselects) {\n            events.add_event_listener(\n                btn,\n                \"click\",\n                \"pat-checklist--deselect-all--click\",\n                this.deselect_all.bind(this)\n            );\n        }\n\n        this.all_toggles = dom.find_scoped(this.el, this.options.toggle);\n        for (const btn of this.all_toggles) {\n            events.add_event_listener(\n                btn,\n                \"click\",\n                \"pat-checklist--toggle-all--click\",\n                this.toggle_all.bind(this)\n            );\n        }\n\n        // update select/deselect button status\n        this.change_buttons_and_toggles();\n        this.change_checked();\n        events.add_event_listener(\n            this.el,\n            \"change\",\n            \"pat-checklist--change-handler--change\",\n            this.change_handler.bind(this)\n        );\n    },\n\n    destroy() {\n        for (const it of this.all_selects) {\n            events.remove_event_listener(it, \"pat-checklist--select-all--click\");\n        }\n        for (const it of this.all_deselects) {\n            events.remove_event_listener(it, \"pat-checklist--deselect-all--click\");\n        }\n        for (const it of this.all_toggles) {\n            events.remove_event_listener(it, \"pat-checklist--toggle-all--click\");\n        }\n        events.remove_event_listener(this.el, \"pat-checklist--change-handler--change\");\n        this.$el.off(\"patterns_injected\");\n    },\n\n    find_siblings(el, sel) {\n        // Looks for the closest elements within the `el` tree that match the\n        // `sel` selector\n        let res;\n        let parent = el.parentNode;\n        while (parent) {\n            res = parent.querySelectorAll(`${sel}:not(${this.options.toggle})`);\n            if (res.length || parent === this.el) {\n                // return if results were found or we reached the pattern top\n                return res;\n            }\n            parent = parent.parentNode;\n        }\n    },\n\n    find_checkboxes(ref_el, sel) {\n        let chkbxs = [];\n        if (this.options.select.indexOf(\"#\") === 0) {\n            chkbxs = this.el.querySelectorAll(sel);\n        } else {\n            chkbxs = this.find_siblings(ref_el, sel);\n        }\n        return chkbxs;\n    },\n\n    change_buttons_and_toggles() {\n        let chkbxs;\n        for (const btn of this.all_selects) {\n            chkbxs = this.find_checkboxes(btn, \"input[type=checkbox]\");\n            btn.disabled = [...chkbxs]\n                .map((el) => el.matches(\":checked\"))\n                .every((it) => it === true);\n        }\n        for (const btn of this.all_deselects) {\n            chkbxs = this.find_checkboxes(btn, \"input[type=checkbox]\");\n            btn.disabled = [...chkbxs]\n                .map((el) => el.matches(\":checked\"))\n                .every((it) => it === false);\n        }\n        for (const tgl of this.all_toggles) {\n            chkbxs = this.find_checkboxes(tgl, \"input[type=checkbox]\");\n            tgl.checked = [...chkbxs]\n                .map((el) => el.matches(\":checked\"))\n                .every((it) => it === true);\n        }\n    },\n\n    select_all(e) {\n        e.preventDefault();\n        const chkbxs = this.find_checkboxes(\n            e.target,\n            \"input[type=checkbox]:not(:checked)\"\n        );\n        for (const box of chkbxs) {\n            box.checked = true;\n            box.dispatchEvent(events.change_event());\n            box.dispatchEvent(events.input_event());\n        }\n    },\n\n    deselect_all(e) {\n        e.preventDefault();\n        const chkbxs = this.find_checkboxes(e.target, \"input[type=checkbox]:checked\");\n        for (const box of chkbxs) {\n            box.checked = false;\n            box.dispatchEvent(events.change_event());\n            box.dispatchEvent(events.input_event());\n        }\n    },\n\n    toggle_all(e) {\n        e.preventDefault();\n        const checked = e.target.checked;\n        const chkbxs = this.find_checkboxes(e.target, \"input[type=checkbox]\");\n        for (const box of chkbxs) {\n            box.checked = checked;\n            box.dispatchEvent(events.change_event());\n            box.dispatchEvent(events.input_event());\n        }\n    },\n\n    change_checked() {\n        for (const it of [...this.all_checkboxes, ...this.all_radios]) {\n            for (const label of it.labels) {\n                label.classList.remove(\"checked\", \"unchecked\");\n                label.classList.add(it.checked ? \"checked\" : \"unchecked\");\n            }\n        }\n\n        for (const fieldset of dom.querySelectorAllAndMe(this.el, \"fieldset\")) {\n            if (\n                fieldset.querySelectorAll(\n                    `input[type=checkbox]:checked:not(${this.options.toggle}), input[type=radio]:checked`\n                ).length\n            ) {\n                fieldset.classList.remove(\"unchecked\");\n                fieldset.classList.add(\"checked\");\n            } else {\n                fieldset.classList.remove(\"checked\");\n                fieldset.classList.add(\"unchecked\");\n            }\n        }\n    },\n});\n","/* Clone pattern */\nimport $ from \"jquery\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport Base from \"../../core/base\";\nimport logging from \"../../core/logging\";\nimport dom from \"../../core/dom\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"pat-clone\");\nconst TEXT_NODE = 3;\n\nexport const parser = new Parser(\"clone\");\nparser.addArgument(\"max\");\nparser.addArgument(\"template\", \":first\");\nparser.addArgument(\"trigger-element\", \".add-clone\");\nparser.addArgument(\"remove-element\", \".remove-clone\");\nparser.addArgument(\"remove-behaviour\", \"confirm\", [\"confirm\", \"none\"]);\nparser.addArgument(\n    \"remove-confirmation\",\n    \"Are you sure you want to remove this element?\"\n);\nparser.addArgument(\"clone-element\", \".clone\");\nparser.addAlias(\"remove-behavior\", \"remove-behaviour\");\n\nexport default Base.extend({\n    name: \"clone\",\n    trigger: \".pat-clone\",\n\n    init() {\n        this.options = parser.parse(this.el, this.options);\n        if (this.options.template.lastIndexOf(\":\", 0) === 0) {\n            this.template = $(this.options.template, this.el)[0];\n        } else {\n            this.template = document.querySelector(this.options.template);\n        }\n\n        this.bind_trigger(document.body);\n\n        const clones = this.el.querySelectorAll(this.options.cloneElement);\n        this.num_clones = clones.length;\n        for (const clone of clones) {\n            this.bind_remove(clone);\n        }\n    },\n\n    clone() {\n        if (this.num_clones >= this.options.max) {\n            alert(\"Sorry, only \" + this.options.max + \" elements allowed.\");\n            return;\n        }\n        this.num_clones += 1;\n\n        let $clone =\n            this.template.nodeName === \"TEMPLATE\"\n                ? $([...this.template.content.children]).clone()\n                : $(this.template).safeClone();\n\n        const ids = ($clone.attr(\"id\") || \"\").split(\" \").filter((it) => it);\n        $clone.removeAttr(\"id\").removeClass(\"disable-patterns\");\n        $.each(\n            ids,\n            function (idx, id) {\n                // Re-add all ids that have the substring #{1} in them, while\n                // also replacing that substring with the number of clones.\n                if (id.indexOf(\"#{1}\") !== -1) {\n                    $clone.attr(\n                        \"id\",\n                        $clone.attr(\"id\")\n                            ? $clone.attr(\"id\") + \" \"\n                            : \"\" + id.replace(\"#{1}\", this.num_clones)\n                    );\n                }\n            }.bind(this)\n        );\n\n        $clone.appendTo(this.$el);\n        $clone\n            .children()\n            .addBack()\n            .contents()\n            .addBack()\n            .filter(this.incrementValues.bind(this));\n\n        this.bind_trigger($clone);\n        this.bind_remove($clone);\n\n        $clone.prop(\"hidden\", false);\n        registry.scan($clone);\n\n        $clone.trigger(\"pat-update\", {\n            pattern: \"clone\",\n            action: \"added\",\n            dom: $clone[0],\n        });\n        if (this.num_clones >= this.options.max) {\n            for (const el_ of this.clone_triggers) {\n                dom.hide(el_);\n            }\n        }\n    },\n\n    incrementValues(idx, el) {\n        const $el = $(el);\n        $el.children().addBack().contents().filter(this.incrementValues.bind(this));\n        const callback = function (idx, attr) {\n            if (attr.name === \"type\" || !$el.attr(attr.name)) {\n                return;\n            }\n            try {\n                $el.attr(\n                    attr.name,\n                    $el.attr(attr.name).replace(\"#{1}\", this.num_clones)\n                );\n            } catch (e) {\n                log.warn(e);\n            }\n        };\n        if (el.nodeType !== TEXT_NODE) {\n            $.each(el.attributes, callback.bind(this));\n        } else if (el.data.length) {\n            el.data = el.data.replace(\"#{1}\", this.num_clones);\n        }\n    },\n\n    bind_trigger(triggers) {\n        // Bind clone trigger\n        for (const node of utils.ensureArray(triggers)) {\n            for (const trigger of dom.querySelectorAllAndMe(\n                node,\n                this.options.triggerElement\n            )) {\n                trigger.addEventListener(\"click\", () => this.clone());\n            }\n        }\n    },\n\n    bind_remove(clone) {\n        for (const node of utils.ensureArray(clone)) {\n            for (const remove_button of dom.querySelectorAllAndMe(\n                node,\n                this.options.remove.element\n            )) {\n                remove_button.addEventListener(\"click\", () => {\n                    if (this.options.remove.behaviour === \"confirm\") {\n                        if (window.confirm(this.options.remove.confirmation) === true) {\n                            this.remove(clone);\n                        }\n                    } else {\n                        this.remove(clone);\n                    }\n                });\n            }\n        }\n    },\n\n    remove(clone) {\n        for (const node of utils.ensureArray(clone)) {\n            node.remove();\n            this.$el.trigger(\"pat-update\", {\n                pattern: \"clone\",\n                action: \"removed\",\n                dom: node,\n            });\n        }\n        this.num_clones -= 1;\n        if (this.num_clones < this.options.max) {\n            for (const el_ of this.clone_triggers) {\n                dom.show(el_);\n            }\n        }\n    },\n});\n","import { BasePattern } from \"../../core/basepattern\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nexport const parser = new Parser(\"clone-code\");\nparser.addArgument(\"source\", \":first-child\");\nparser.addArgument(\"features\", null, [\"format\"]);\n\nclass Pattern extends BasePattern {\n    static name = \"clone-code\";\n    static trigger = \".pat-clone-code\";\n    static parser = parser;\n\n    async init() {\n        // Source\n        if (this.options.source.lastIndexOf(\":\", 0) === 0) {\n            this.source = this.el.querySelector(this.options.source);\n        } else {\n            this.source = document.querySelector(this.options.source);\n        }\n        await this.clone();\n    }\n\n    async clone() {\n        // Clone the template.\n        let markup =\n            this.source.nodeName === \"TEMPLATE\"\n                ? this.source.innerHTML\n                : this.source.outerHTML;\n\n        // Create temporary wrapper.\n        let tmp_wrapper;\n        if (this.source.nodeName === \"HTML\") {\n            // We have a full HTML document which we cannot wrap into a div.\n            tmp_wrapper = new DOMParser().parseFromString(markup, \"text/html\");\n        } else {\n            tmp_wrapper = document.createElement(\"div\");\n            tmp_wrapper.innerHTML = markup;\n        }\n\n        // Remove elements with the class ``clone-ignore``.\n        const ignore = tmp_wrapper.querySelectorAll(\".clone-ignore\");\n        for (const _el of ignore) {\n            _el.remove();\n        }\n\n        // Get back the clone string depending of what the wrapper is.\n        markup =\n            tmp_wrapper instanceof HTMLDocument\n                ? tmp_wrapper.documentElement.outerHTML\n                : tmp_wrapper.innerHTML;\n\n        if (this.options.features?.includes(\"format\")) {\n            // Format the markup.\n            const prettier = (await import(\"prettier/standalone\")).default;\n            const parser_html = (await import(\"prettier/parser-html\")).default;\n            markup = prettier.format(markup, {\n                parser: \"html\",\n                plugins: [parser_html],\n            });\n        }\n\n        // Now we need to wrap the contents in any case in a div.\n        tmp_wrapper = document.createElement(\"div\");\n        tmp_wrapper.innerHTML = this.wrapper_template(utils.escape_html(markup));\n        const pre_code_el = tmp_wrapper.children[0];\n\n        this.el.appendChild(pre_code_el);\n        registry.scan(pre_code_el);\n    }\n\n    wrapper_template(markup) {\n        return `\n<pre class=\"pat-syntax-highlight\">\n  <code class=\"language-html\">\n${markup}\n  </code>\n</pre>\n        `;\n    }\n}\n\nregistry.register(Pattern);\nexport default Pattern;\nexport { Pattern };\n","import $ from \"jquery\";\nimport \"../../core/jquery-ext\";\nimport { BasePattern } from \"../../core/basepattern\";\nimport events from \"../../core/events\";\nimport inject from \"../inject/inject\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport store from \"../../core/store\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"pat.collapsible\");\n\nexport const parser = new Parser(\"collapsible\");\nparser.addArgument(\"load-content\");\nparser.addArgument(\"store\", \"none\", [\"none\", \"session\", \"local\"]);\nparser.addArgument(\"transition\", \"slide\", [\n    \"none\",\n    \"css\",\n    \"fade\",\n    \"slide\",\n    \"slide-horizontal\",\n]);\nparser.addArgument(\"effect-duration\", \"fast\");\nparser.addArgument(\"effect-easing\", \"swing\");\nparser.addArgument(\"closed\", false);\nparser.addArgument(\"trigger\", \"::first\");\nparser.addArgument(\"close-trigger\");\nparser.addArgument(\"open-trigger\");\n// pat-scroll support\nparser.addArgument(\"scroll-selector\");\nparser.addArgument(\"scroll-offset\", 0);\n\nconst debounce_scroll_timer = { timer: null };\n\nclass Pattern extends BasePattern {\n    static name = \"collapsible\";\n    static trigger = \".pat-collapsible\";\n    static parser = parser;\n\n    transitions = {\n        \"none\": { closed: \"hide\", open: \"show\" },\n        \"fade\": { closed: \"fadeOut\", open: \"fadeIn\" },\n        \"slide\": { closed: \"slideUp\", open: \"slideDown\" },\n        \"slide-horizontal\": { closed: \"slideOut\", open: \"slideIn\" },\n    };\n\n    async init() {\n        const $el = (this.$el = $(this.el));\n\n        let $content;\n\n        if (this.options.trigger === \"::first\") {\n            this.$trigger = $el.children(\":first\");\n            $content = $el.children(\":gt(0)\");\n        } else {\n            this.$trigger = $(this.options.trigger);\n            $content = $el.children();\n        }\n        if (this.$trigger.length === 0) {\n            log.error(\"Collapsible has no trigger.\", $el[0]);\n            return;\n        }\n\n        this.$panel = $el.children(\".panel-content\");\n        if (this.$panel.length === 0) {\n            if ($content.length) {\n                this.$panel = $content.wrapAll(\"<div class='panel-content' />\").parent();\n            } else {\n                this.$panel = $(\"<div class='panel-content' />\").insertAfter(\n                    this.$trigger\n                );\n            }\n        }\n\n        let state = this.options.closed || $el.hasClass(\"closed\") ? \"closed\" : \"open\";\n        if (this.options.store !== \"none\") {\n            const storage = (\n                this.options.store === \"local\" ? store.local : store.session\n            )(this.name);\n            state = storage.get($el.attr(\"id\")) || state;\n        }\n\n        if (state === \"closed\") {\n            this.$trigger.removeClass(\"collapsible-open\").addClass(\"collapsible-closed\");\n            $el.removeClass(\"open\").addClass(\"closed\");\n            this.$panel.hide();\n        } else {\n            if (this.options.loadContent) {\n                this._loadContent($el, this.options.loadContent, this.$panel);\n            }\n            this.$trigger.removeClass(\"collapsible-closed\").addClass(\"collapsible-open\");\n            $el.removeClass(\"closed\").addClass(\"open\");\n            this.$panel.show();\n        }\n\n        this.$trigger\n            .off(\".pat-collapsible\")\n            .on(\"click.pat-collapsible\", null, $el, this._onClick.bind(this))\n            .on(\"keypress.pat-collapsible\", null, $el, this._onKeyPress.bind(this));\n\n        if (this.options.closeTrigger) {\n            $(document).on(\"click\", this.options.closeTrigger, this.close.bind(this));\n        }\n        if (this.options.openTrigger) {\n            $(document).on(\"click\", this.options.openTrigger, this.open.bind(this));\n        }\n\n        // pat-scroll support\n        if (this.options.scroll?.selector && this.options.scroll.selector !== \"none\") {\n            const Scroll = (await import(\"../scroll/scroll\")).default;\n            this.scroll = new Scroll(this.el, {\n                trigger: \"manual\",\n                selector: this.options.scroll.selector,\n                offset: this.options.scroll?.offset,\n            });\n            await events.await_pattern_init(this.scroll);\n\n            // scroll debouncer for later use.\n            this.debounce_scroll = utils.debounce(\n                this.scroll.scrollTo.bind(this.scroll),\n                10,\n                debounce_scroll_timer\n            );\n        }\n\n        return $el;\n    }\n\n    open() {\n        if (!this.$el.hasClass(\"open\")) {\n            this.toggle();\n        }\n        return this.$el;\n    }\n\n    close() {\n        if (!this.$el.hasClass(\"closed\")) {\n            this.toggle();\n        }\n        return this.$el;\n    }\n\n    _onClick(event) {\n        this.toggle(event.data);\n    }\n\n    _onKeyPress(event) {\n        const keycode = event.keyCode ? event.keyCode : event.which;\n        if (keycode === 13) {\n            this.toggle();\n        }\n    }\n\n    _loadContent($el, url, $target) {\n        const components = url.split(\"#\");\n        const base_url = components[0];\n        const id = components[1] ? \"#\" + components[1] : \"body\";\n        const opts = [\n            {\n                url: base_url,\n                source: id,\n                $target: $target,\n                dataType: \"html\",\n            },\n        ];\n        inject.execute(opts, $el);\n    }\n\n    // jQuery method to force loading of content.\n    loadContent($el) {\n        return $el.each(\n            function (idx, el) {\n                if (this.options.loadContent)\n                    this._loadContent($(el), this.options.loadContent, this.$panel);\n            }.bind(this)\n        );\n    }\n\n    toggle() {\n        const new_state = this.$el.hasClass(\"closed\") ? \"open\" : \"closed\";\n        if (this.options.store !== \"none\") {\n            const storage = (\n                this.options.store === \"local\" ? store.local : store.session\n            )(this.name);\n            storage.set(this.$el.attr(\"id\"), new_state);\n        }\n        if (new_state === \"open\") {\n            this.$el.trigger(\"patterns-collapsible-open\");\n            this._transit(this.$el, \"closed\", \"open\");\n            this.debounce_scroll?.(); // debounce scroll, if available.\n        } else {\n            this.$el.trigger(\"patterns-collapsible-close\");\n            this._transit(this.$el, \"open\", \"closed\");\n        }\n        return this.$el; // allow chaining\n    }\n\n    async _transit($el, from_cls, to_cls) {\n        if (to_cls === \"open\" && this.options.loadContent) {\n            this._loadContent($el, this.options.loadContent, this.$panel);\n        }\n        const duration =\n            this.options.transition === \"css\" || this.options.transition === \"none\"\n                ? null\n                : this.options.effect.duration;\n        if (!duration) {\n            this.$trigger\n                .removeClass(\"collapsible-\" + from_cls)\n                .addClass(\"collapsible-\" + to_cls);\n            $el.removeClass(from_cls).addClass(to_cls).trigger(\"pat-update\", {\n                pattern: \"collapsible\",\n                action: \"attribute-changed\",\n                dom: $el[0],\n                transition: \"complete\",\n            });\n        } else {\n            const t = this.transitions[this.options.transition];\n            $el.addClass(\"in-progress\").trigger(\"pat-update\", {\n                pattern: \"collapsible\",\n                action: \"attribute-changed\",\n                dom: $el[0],\n                transition: \"start\",\n            });\n            this.$trigger.addClass(\"collapsible-in-progress\");\n            await this.$panel[t[to_cls]](\n                duration,\n                this.options.effect.easing,\n                function () {\n                    this.$trigger\n                        .removeClass(\"collapsible-\" + from_cls)\n                        .removeClass(\"collapsible-in-progress\")\n                        .addClass(\"collapsible-\" + to_cls);\n                    $el.removeClass(from_cls)\n                        .removeClass(\"in-progress\")\n                        .addClass(to_cls)\n                        .trigger(\"pat-update\", {\n                            pattern: \"collapsible\",\n                            action: \"attribute-changed\",\n                            dom: $el[0],\n                            transition: \"complete\",\n                        });\n                }.bind(this)\n            ).promise();\n        }\n    }\n}\n\nregistry.register(Pattern);\n\nexport default Pattern;\nexport { Pattern };\n","/**\n * Patterns pat-polyfill-colour - Polyfill for colour inputs.\n *\n * Copyright 2014 Marko Durkovic\n * Copyright 2014 Simplon B.V. - Wichert Akkerman\n */\nimport registry from \"../../core/registry\";\n\nvar _ = {\n    name: \"polyfill-color\",\n    trigger: \"input.pat-colour-picker,input.pat-color-picker\",\n    async init($el) {\n        await import(\"spectrum-colorpicker\");\n        if (window.__patternslib_import_styles) {\n            import(\"./_colour-picker.scss\");\n        }\n        return $el.spectrum({ preferredFormat: \"hex\" });\n    },\n};\n\nregistry.register(_);\nexport default _;\n","/* pat-datetime-picker  - Polyfill for input type=datetime-local */\nimport Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport utils from \"../../core/utils\";\nimport dom from \"../../core/dom\";\n\nexport const parser = new Parser(\"datetime-picker\");\nparser.addArgument(\"format\", \"YYYY-MM-DD\");\nparser.addArgument(\"week-numbers\", [], [\"show\", \"hide\"]);\nparser.addArgument(\"i18n\"); // URL pointing to JSON resource with i18n values\nparser.addArgument(\"today\", \"Today\");\nparser.addArgument(\"clear\", \"Clear\");\nparser.addArgument(\"first-day\", 0);\n\nexport default Base.extend({\n    name: \"datetime-picker\",\n    trigger: \".pat-datetime-picker\",\n    parser: parser,\n    el_date: null,\n    el_time: null,\n\n    async init() {\n        const el = this.el;\n        this.options = parser.parse(this.el, this.options);\n\n        if (utils.checkInputSupport(\"datetime-local\", \"invalid date\")) {\n            return;\n        }\n\n        if (window.__patternslib_import_styles) {\n            import(\"./_datetime-picker.scss\");\n        }\n        const DatePicker = (await import(\"../date-picker/date-picker\")).default;\n\n        const value = this.el.value.split(\"T\");\n        const date_value = value[0] || \"\";\n        const time_value = value[1] || \"\";\n\n        const el_wrapper = document.createElement(\"div\");\n        el_wrapper.setAttribute(\"class\", \"pat-datetime-picker__wrapper\");\n\n        dom.hide(el);\n\n        // let the buttons be of type button otherwise they are submit buttons\n        const html_btn_now = `\n            <button type=\"button\" class=\"_btn _now\" title=\"${this.options.today}\">\n                <span class=\"_icon\"/>\n                <span class=\"_text\">${this.options.today}</span>\n            </button>`;\n        const html_btn_clear = `\n            <button type=\"button\" class=\"_btn _clear\" title=\"${this.options.clear}\">\n                <span class=\"_icon\"/>\n                <span class=\"_text\">${this.options.clear}</span>\n            </button>`;\n\n        el_wrapper.innerHTML = `\n            <input type=\"date\" placeholder=\"YYYY-MM-DD\" value=\"${date_value}\" />\n            <input type=\"time\" placeholder=\"hh:mm\" value=\"${time_value}\" />\n            ${this.options.today ? html_btn_now : \"\"}\n            ${this.options.clear ? html_btn_clear : \"\"}\n        `;\n\n        this.el_time = el_wrapper.querySelector(\"input[type=time]\");\n        this.el_time.addEventListener(\"change\", () => this.update());\n\n        this.el_date = el_wrapper.querySelector(\"input[type=date]\");\n        this.el_date.addEventListener(\"change\", () => {\n            if (!this.el_time.value) {\n                // Set time on date change, if time was empty.\n                this.el_time.value = this.isotime();\n            }\n            this.update();\n        });\n\n        const date_options = {\n            behavior: \"native\",\n            format: this.options.format,\n            weekNumbers: this.options.weekNumbers,\n            firstDay: this.options.firstDay,\n        };\n        await DatePicker.init(this.el_date, date_options);\n\n        if (this.options.today) {\n            const btn_now = el_wrapper.querySelector(\"._btn._now\");\n            btn_now.addEventListener(\"click\", (e) => {\n                e.preventDefault();\n                this.el_date.value = this.isodate();\n                this.el_time.value = this.isotime();\n                this.update();\n            });\n        }\n\n        if (this.options.clear) {\n            const btn_clear = el_wrapper.querySelector(\"._btn._clear\");\n            btn_clear.addEventListener(\"click\", (e) => {\n                e.preventDefault();\n                this.el_date.value = \"\";\n                this.el_time.value = \"\";\n                this.update();\n            });\n        }\n\n        // TODO: timezone\n        el.parentNode.insertBefore(el_wrapper, el);\n    },\n\n    update() {\n        if (this.el_date.value && this.el_time.value) {\n            this.el.value = `${this.el_date.value}T${this.el_time.value}`;\n        } else {\n            this.el.value = \"\";\n        }\n        this.el.dispatchEvent(new Event(\"change\", { bubbles: true, cancelable: true }));\n    },\n\n    isodate() {\n        const now = new Date();\n        return now.toISOString().substr(0, 10);\n    },\n\n    isotime() {\n        const now = new Date();\n        return now.toTimeString().substr(0, 5);\n    },\n});\n","import $ from \"jquery\";\nimport { BasePattern } from \"@patternslib/patternslib/src/core/basepattern\";\nimport events from \"../../core/events\";\nimport dom from \"../../core/dom\";\nimport logging from \"../../core/logging\";\nimport Parser from \"@patternslib/patternslib/src/core/parser\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"depends\");\n\nexport const parser = new Parser(\"depends\");\nparser.addArgument(\"condition\");\nparser.addArgument(\"action\", \"show\", [\"show\", \"enable\", \"both\"]);\nparser.addArgument(\"transition\", \"none\", [\"none\", \"css\", \"fade\", \"slide\"]);\nparser.addArgument(\"effect-duration\", \"fast\");\nparser.addArgument(\"effect-easing\", \"swing\");\n\n\n// A custom input event which differs from the one in `core/events` in that it\n// accepts a `detail` object to pass arbitrary information around.\n// TODO: The events in `core/events` should be refactored to accept a `detail`\n// object.\nconst input_event = (detail = {}) => {\n    return new CustomEvent(\"input\", {\n        bubbles: true,\n        cancelable: false,\n        detail: detail,\n    });\n};\n\n\nclass Pattern extends BasePattern {\n    static name = \"depends\";\n    static trigger = \".pat-depends\";\n    static parser = parser;\n\n    async init() {\n        this.$el = $(this.el);\n        const DependsHandler = (await import(\"../../lib/dependshandler\")).default; // prettier-ignore\n\n        try {\n            this.handler = new DependsHandler(this.el, this.options.condition);\n        } catch (e) {\n            log.error(\"Invalid condition: \" + e.message, this.el);\n            return;\n        }\n\n        // Initialize\n        this.set_state();\n\n        for (const input of this.handler.getAllInputs()) {\n            // Note: One input can be a dependency for multiple other dependent\n            // elements. Therefore we need to bind the events not uniquely and\n            // add a uuid to the event bindings id.\n\n            events.add_event_listener(\n                input,\n                \"input\",\n                `pat-depends--input--${this.uuid}`,\n                (e) => {\n                    if (e?.detail?.pattern_uuid === this.uuid) {\n                        // Ignore input events invoked from this pattern\n                        // instance to avoid infinite loops.\n                        return;\n                    }\n                    this.set_state();\n                }\n            );\n\n            if (input.form) {\n                events.add_event_listener(\n                    input.form,\n                    \"reset\",\n                    `pat-depends--reset--${this.uuid}`,\n                    async () => {\n                        // TODO: note sure, what this timeout is for.\n                        await utils.timeout(50);\n                        this.set_state.bind(this);\n                    }\n                );\n            }\n        }\n    }\n\n    update_modal() {\n        const modal = this.el.closest(\".pat-modal\");\n\n        // If we're in a modal, make sure that it gets resized.\n        if (modal) {\n            $(document).trigger(\"pat-update\", { pattern: \"depends\" });\n        }\n    }\n\n    enable() {\n        const inputs = dom.find_inputs(this.el);\n        for (const input of inputs) {\n            if (input.disabled === false) {\n                // Do not re-enable an already enabled input.\n                continue;\n            }\n\n            // Now, enable the input element.\n            input.disabled = false;\n\n            if (input === this.el) {\n                // Do not re-trigger this pattern on it's own element to avoid\n                // infinite loops.\n                continue;\n            }\n\n            if (dom.is_button(input)) {\n                // Do not trigger the input event on buttons as they do not\n                // support it.\n                continue;\n            }\n\n            // Trigger the input after enabling so that any other bound\n            // actions can react on that.\n            input.dispatchEvent(input_event({ pattern_uuid: this.uuid }));\n        }\n\n        // Restore the original click behavior for anchor elements.\n        if (this.el.tagName === \"A\") {\n            events.remove_event_listener(this.el, \"pat-depends--click\");\n        }\n\n        // Remove the disabled class from the element.\n        this.el.classList.remove(\"disabled\");\n\n        // Trigger the pat-update event to notify other patterns about enabling.\n        this.$el.trigger(\"pat-update\", {\n            pattern: \"depends\",\n            action: \"attribute-changed\",\n            dom: this.el,\n            enabled: true,\n        });\n    }\n\n    disable() {\n        const inputs = dom.find_inputs(this.el);\n        for (const input of inputs) {\n            if (input.disabled === true) {\n                // Do not re-disable an already disabled input.\n                continue;\n            }\n\n            // Now, disable the input element.\n            input.disabled = true;\n\n            if (input === this.el) {\n                // Do not re-trigger this pattern on it's own element to avoid\n                // infinite loops.\n                continue;\n            }\n\n            if (dom.is_button(input)) {\n                // Do not trigger the input event on buttons as they do not\n                // support it.\n                continue;\n            }\n\n            // Trigger the input after disabling so that any other bound\n            // actions can react on that.\n            input.dispatchEvent(input_event({ pattern_uuid: this.uuid }));\n        }\n\n        // Prevent the default click behavior for anchor elements.\n        if (this.el.tagName === \"A\") {\n            events.add_event_listener(this.el, \"click\", \"pat-depends--click\", (e) =>\n                e.preventDefault()\n            );\n        }\n\n        // Add the disabled class to the element.\n        this.el.classList.add(\"disabled\");\n\n        // Trigger the pat-update event to notify other patterns about disabling.\n        this.$el.trigger(\"pat-update\", {\n            pattern: \"depends\",\n            action: \"attribute-changed\",\n            dom: this.el,\n            enabled: false,\n        });\n    }\n\n    set_state() {\n        const state = this.handler.evaluate();\n        switch (this.options.action) {\n            case \"show\":\n                utils.hideOrShow(this.el, state, this.options, this.name);\n                this.update_modal();\n                break;\n            case \"enable\":\n                if (state) {\n                    this.enable();\n                } else {\n                    this.disable();\n                }\n                break;\n            case \"both\":\n                utils.hideOrShow(this.el, state, this.options, this.name);\n                this.update_modal();\n                if (state) {\n                    this.enable();\n                } else {\n                    this.disable();\n                }\n                break;\n        }\n    }\n}\n\n// Register Pattern class in the global pattern registry\nregistry.register(Pattern);\n\n// Make it available\nexport default Pattern;\n","/**\n * equaliser - Equalise height of elements in a row\n *\n * Copyright 2013 Simplon B.V. - Wichert Akkerman\n */\nimport $ from \"jquery\";\nimport registry from \"../../core/registry\";\nimport Parser from \"../../core/parser\";\nimport utils from \"../../core/utils\";\n\nexport const parser = new Parser(\"equaliser\");\nparser.addArgument(\"transition\", \"none\", [\"none\", \"grow\"]);\nparser.addArgument(\"effect-duration\", \"fast\");\nparser.addArgument(\"effect-easing\", \"swing\");\n\nvar equaliser = {\n    name: \"equaliser\",\n    trigger: \".pat-equaliser, .pat-equalizer\",\n\n    async init($el, opts) {\n        const ImagesLoaded = (await import(\"imagesloaded\")).default;\n\n        return $el.each(function () {\n            var $container = $(this),\n                options = parser.parse($container, opts);\n            $container.data(\"pat-equaliser\", options);\n            $(window).on(\n                \"resize.pat-equaliser\",\n                null,\n                this,\n                utils.debounce(equaliser._onEvent, 100)\n            );\n            ImagesLoaded(\n                this,\n                $.proxy(function () {\n                    equaliser._update(this);\n                }, this)\n            );\n            const callback = utils.debounce(equaliser._update.bind(this), 100);\n            const observer = new MutationObserver(callback);\n            const config = {\n                childList: true,\n                subtree: true,\n                characterData: true,\n                attributes: true,\n            };\n            observer.observe(document.body, config);\n        });\n    },\n\n    _update: function (container) {\n        var $container = $(container),\n            options = $container.data(\"pat-equaliser\"),\n            $children = $container.children(),\n            max_height = 0;\n\n        for (var i = 0; i < $children.length; i++) {\n            var $child = $children.eq(i),\n                css = $child.css(\"height\"),\n                height;\n            $child.css(\"height\", \"\").removeClass(\"equalised\");\n            height = $child.height();\n            if (height > max_height) max_height = height;\n            if (css) $child.css(\"height\", css);\n        }\n\n        var new_css = { height: max_height + \"px\" };\n\n        switch (options && options.transition) {\n            case \"none\":\n                $children.css(new_css).addClass(\"equalised\");\n                break;\n            case \"grow\":\n                $children.animate(\n                    new_css,\n                    options.effect.duration,\n                    options.effect.easing,\n                    function () {\n                        $(this).addClass(\"equalised\");\n                    }\n                );\n                break;\n        }\n        $container.trigger(\"pat-update\", {\n            pattern: \"equaliser\",\n            action: \"attribute-changed\",\n            dom: container,\n        });\n    },\n\n    _onEvent: function (event) {\n        if (typeof event.data !== \"undefined\") {\n            equaliser._update(event.data);\n        }\n    },\n};\n\nregistry.register(equaliser);\nexport default equaliser;\n","import $ from \"jquery\";\nimport inject from \"../inject/inject\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\n\nexport const parser = new Parser(\"expandable\");\nparser.addArgument(\"load-content\");\n\nvar _ = {\n    name: \"expandable\",\n    trigger: \"ul.pat-expandable\",\n    jquery_plugin: true,\n    init: function ($el) {\n        // make sure inject folders have a ul\n        $el.find(\".folder[data-pat-expandable]:not(:has(ul))\").append(\"<ul />\");\n\n        // find all folders that contain a ul\n        var $folders = $el.find(\"li.folder:has(ul)\");\n\n        // inject span.toggle as first child of each folder\n        $folders.prepend(\"<span class='toggle'></span>\");\n\n        // all folders are implicitly closed\n        $folders.filter(\":not(.open,.closed)\").addClass(\"closed\");\n\n        // trigger open event for open folders\n        $folders.filter(\".open\").trigger(\"patterns-folder-open\");\n\n        // wire spans as control elements\n        var $ctrls = $el.find(\"span.toggle\");\n        $ctrls.each(function () {\n            var $ctrl = $(this),\n                $folder = $ctrl.parent();\n            $ctrl.on(\"click.pat-expandable\", function () {\n                $folder\n                    .toggleClass(\"open closed\")\n                    .filter(\".open[data-pat-expandable]\")\n                    .patExpandable(\"loadContent\");\n            });\n        });\n        return $el;\n    },\n    loadContent: function ($el) {\n        return $el.each(function () {\n            var $el = $(this),\n                url = parser.parse($el).loadContent,\n                components = url.split(\"#\"),\n                base_url = components[0],\n                id = components[1] ? \"#\" + components[1] : \"body\",\n                opts = [\n                    {\n                        url: base_url,\n                        source: id,\n                        $target: $el.find(\"ul\"),\n                        dataType: \"html\",\n                    },\n                ];\n            inject.execute(opts, $el);\n        });\n    },\n};\nregistry.register(_);\nexport default _;\n","/**\n * @license\n * Patterns @VERSION@ focus - Manage focus class on fieldsets\n *\n * Copyright 2012 Simplon B.V.\n */\n\nimport $ from \"jquery\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nvar focus = {\n    name: \"focus\",\n\n    onNewContent: function () {\n        if ($(document.activeElement).is(\":input\"))\n            focus._doFocus(document.activeElement);\n    },\n\n    transform: function ($root) {\n        $root.find(\":input[placeholder]\").each(function (ix, el) {\n            var $relatives = utils.findRelatives(el);\n            if (el.placeholder) $relatives.attr(\"data-placeholder\", el.placeholder);\n        });\n        $root.find(\":input\").each(focus.onChange);\n    },\n\n    onFocus: function () {\n        focus._doFocus(this);\n    },\n\n    _updateHasValue: function (el) {\n        var $relatives = utils.findRelatives(el);\n        var hv = utils.hasValue(el);\n\n        if (hv) {\n            $relatives.addClass(\"has-value\").attr(\"data-value\", el.value);\n        } else {\n            $relatives\n                .filter(function (ix, e) {\n                    const inputs = $(\":input\", e);\n                    for (var i = 0; i < inputs.length; i++)\n                        if (utils.hasValue(inputs[i])) return false;\n                    return true;\n                })\n                .removeClass(\"has-value\")\n                .attr(\"data-value\", null);\n        }\n    },\n\n    _doFocus: function (el) {\n        var $relatives = utils.findRelatives(el);\n        $relatives.addClass(\"focus\");\n        this._updateHasValue($relatives);\n    },\n\n    onBlur: function () {\n        var $relatives = utils.findRelatives(this);\n\n        $(document).one(\"mouseup keyup\", function () {\n            $relatives.filter(\":not(:has(:input:focus))\").removeClass(\"focus\");\n        });\n    },\n\n    onChange: function () {\n        focus._updateHasValue(this);\n    },\n};\n\n$(document)\n    .on(\"focus.patterns\", \":input\", focus.onFocus)\n    .on(\"blur.patterns\", \":input\", focus.onBlur)\n    .on(\"newContent\", focus.onNewContent)\n    .on(\"change.pat-focus keyup.pat-focus\", \":input\", focus.onChange)\n    .on(\"input.pat-focus\", \":input[type=range]\", utils.debounce(focus.onChange, 50));\n\nregistry.register(focus);\nexport default focus;\n","import $ from \"jquery\";\nimport logging from \"../../core/logging\";\nimport registry from \"../../core/registry\";\nimport modal from \"../modal/modal\";\nimport input_change_events from \"../../lib/input-change-events\";\n\nvar log = logging.getLogger(\"form-state\");\n\nvar _ = {\n    name: \"form-state\",\n    trigger: \"form.pat-form-state\",\n    init: function ($form) {\n        if ($form.length > 1)\n            return $form.each(function () {\n                _.init($(this));\n            });\n\n        input_change_events.setup($form, _.name);\n\n        // XXX: hide reset buttons until we have proper handling for them\n        $form.find(\"[type=reset]\").hide();\n\n        _.setReset.call($form);\n\n        // remember initial state of the form and after\n        // successfull submission\n        $form.data(\"pat-ajax.state\", $form.serializeArray());\n        $form.on(\"pat-ajax-success\", _.saveState);\n\n        return $form;\n    },\n    saveState: function () {\n        var $form = $(this);\n        $form.data(\"pat-ajax.previous-state\", $form.data(\"pat-ajax.state\"));\n        $form.data(\"pat-ajax.state\", $form.serializeArray());\n        $form.trigger(\"pat-form-state-saved\");\n    },\n    setModified: function () {\n        var $form = $(this);\n\n        $form.find(\"[type=reset]\").prop(\"disabled\", false);\n        $form.find(\"[type=submit]\").prop(\"disabled\", false);\n\n        $form\n            .addClass(\"modified\")\n            .off(\".pat-form-state\")\n            .one(\"reset.pat-form-state\", _.setReset)\n            .one(\"pat-ajax-error.pat-form-state\", _.setError)\n            .one(\"pat-ajax-success.pat-form-state\", _.setSaved);\n        log.debug(\"modified\");\n    },\n    setReset: function () {\n        var $form = $(this);\n\n        // hide only if form has changeable inputs\n        if (\n            $form\n                .find(\n                    ':input[type!=\"hidden\"][type!=\"submit\"]' +\n                        '[type!=\"reset\"][type!=button]'\n                )\n                .not(\"button\").length\n        ) {\n            $form.find(\"[type=reset]\").prop(\"disabled\", true);\n            $form.find(\"[type=submit]\").prop(\"disabled\", true);\n        }\n\n        $form\n            .removeClass(\"modified\")\n            .off(\".pat-form-state\")\n            .one(\"input-change.pat-form-state\", _.setModified);\n        log.debug(\"reset\");\n    },\n    setError: function (event) {\n        var msg = [event.jqxhr.status, event.jqxhr.statusText].join(\" \");\n        modal.init(\n            $(\n                \"<div class='pat-modal small'>\" +\n                    \"<h3>Error</h3>\" +\n                    \"<div class='wizard-box'>\" +\n                    \"<div class='panel-body'>\" +\n                    \"<p>A server error has occured.</p>\" +\n                    \"<p>The error message is: <strong>\" +\n                    msg +\n                    \"</strong>.</p>\" +\n                    \"</div>\" +\n                    \"<div class='buttons panel-footer'>\" +\n                    \"<button class='close-panel'>Ok</button>\" +\n                    \"</div>\" +\n                    \"</div>\" +\n                    \"</div>\"\n            ).appendTo($(\"body\"))\n        );\n    },\n    setSaved: function (event) {\n        if (event.target !== this) return;\n\n        var $form = $(this);\n        _.setReset.call($form);\n\n        var time = new Date(),\n            timestr =\n                time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds();\n        $form.find(\"time.last-saved\").remove();\n        $form.prepend(\n            \"<time class='last-saved' datetime='\" + timestr + \"'>\" + timestr + \"</time>\"\n        );\n\n        $form.addClass(\"saved\");\n    },\n};\nregistry.register(_);\n\nexport default _;\n","// Patterns forward - Forward click events\nimport Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport utils from \"../../core/utils\";\n\nexport const parser = new Parser(\"forward\");\nparser.addArgument(\"selector\");\nparser.addArgument(\"trigger\", \"click\", [\"click\", \"auto\"]);\nparser.addArgument(\"delay\");\n\nexport default Base.extend({\n    name: \"forward\",\n    trigger: \".pat-forward\",\n    skip: false,\n\n    init() {\n        this.options = parser.parse(this.el, this.options);\n        if (!this.options.selector) {\n            return;\n        }\n        if (this.options.delay) {\n            this.options.delay = utils.parseTime(this.options.delay);\n        }\n\n        this.el.addEventListener(\"click\", this.on_click.bind(this));\n        if (this.options.trigger === \"auto\") {\n            this.el.click();\n        }\n    },\n\n    async on_click(event) {\n        if (this.skip) {\n            this.skip = false;\n            return;\n        }\n        event.preventDefault();\n        if (this.options.delay) {\n            await utils.timeout(this.options.delay);\n        }\n        let targets;\n        if (this.options.selector === \"self\") {\n            this.skip = true;\n            targets = [this.el];\n        } else {\n            targets = document.querySelectorAll(this.options.selector);\n        }\n        for (const el of targets) {\n            el.click();\n        }\n    },\n});\n\n// Notes:\n//\n// We're using `ELEMENT.click()` instead of\n// `ELEMENT.dispatchEvent(new Event(\"click\"))`.\n// The latter doesn't get recognized by jQuery and does not invoke the default\n// action on an <a href> element.\n//\n","import Base from \"../../core/base\";\n\nexport default Base.extend({\n    name: \"fullscreen-close\",\n    trigger: \".close-fullscreen\",\n    async init() {\n        const Screenfull = (await import(\"screenfull\")).default;\n\n        this.$el[0].addEventListener(\"click\", function () {\n            // no prevent-default nor stop propagation to let\n            // the button also do other stuff.\n            Screenfull.exit();\n        });\n    },\n});\n","import Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport logging from \"../../core/logging\";\n\n// Lazy loading modules.\nlet Screenfull;\n\nconst log = logging.getLogger(\"fullscreen\");\n\nexport const parser = new Parser(\"fullscreen\");\nparser.addArgument(\"selector\", null); // Selector for the fullscreen element.\nparser.addArgument(\"close-button\", \"none\", [\"none\", \"show\"]); // Inject a fullscreen button.\n\n/*\nclass Fullscreen extends Base {\n    __constructor__()\n}\n*/\n\nexport default Base.extend({\n    name: \"fullscreen\",\n    trigger: \".pat-fullscreen\",\n\n    async init($el, opts) {\n        Screenfull = (await import(\"screenfull\")).default;\n\n        this.options = parser.parse(this.$el, opts);\n        //const el = this.$el[0];\n        //el.addEventListener('click', function (e) {  // TODO: doesn't work in karma for href links\n        this.$el.on(\"click\", this.fullscreen_handler.bind(this));\n    },\n\n    fullscreen_handler(event) {\n        event.preventDefault();\n        const el = this.$el[0];\n        // querying the fullscreen element fs_el and inside the event\n        // handler instead of outside allows for dynamic injecting\n        // fullscreen elements even after pattern initialization.\n        let fs_el_sel = this.options.selector\n            ? this.options.selector\n            : el.getAttribute(\"href\");\n        fs_el_sel = fs_el_sel ? fs_el_sel : \"body\";\n        const fs_el = document.querySelector(fs_el_sel);\n        if (fs_el) {\n            // setting page to fullscreen\n            Screenfull.request(fs_el);\n            if (this.options.closeButton === \"show\") {\n                this.setup_exit_button(fs_el);\n            }\n        } else {\n            log.error(\"No fullscreen element found.\");\n        }\n    },\n\n    setup_exit_button(fs_el) {\n        // setting up the exit button\n        let exit_el = null;\n        if (this.options.closeButton === \"show\") {\n            exit_el = document.createElement(\"button\");\n            exit_el.className = \"pat-fullscreen-close-fullscreen\";\n            exit_el.title = \"Exit fullscreen\";\n            exit_el.appendChild(document.createTextNode(\"Exit fullscreen\"));\n            exit_el.addEventListener(\"click\", (e) => {\n                e.preventDefault();\n                Screenfull.exit();\n            });\n        }\n        fs_el.appendChild(exit_el);\n        Screenfull.on(\"change\", () => {\n            // Removing exit button.\n            // The button is also removed when pressing the <ESC> button.\n            if (!Screenfull.isFullscreen) {\n                fs_el.removeChild(exit_el);\n            }\n        });\n    },\n});\n","// pat-gallery - A gallery pattern.\nimport Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport logging from \"../../core/logging\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"pat.gallery\");\n\nexport const parser = new Parser(\"gallery\");\nparser.addArgument(\"item-selector\", \"a\"); // selector for anchor element, which is added to the gallery.\nparser.addArgument(\"loop\", true);\nparser.addArgument(\"scale-method\", \"fit\", [\"fit\", \"fitNoUpscale\", \"zoom\"]);\nparser.addArgument(\"delay\", 30000);\nparser.addArgument(\"effect-duration\", 250);\n\nlet PhotoSwipe;\nlet PhotoSwipeUI;\n\nexport default Base.extend({\n    name: \"gallery\",\n    trigger: \".pat-gallery\",\n    orig_body_overflow: \"auto\",\n\n    images: [],\n\n    async init() {\n        if (window.__patternslib_import_styles) {\n            import(\"photoswipe/dist/photoswipe.css\");\n            import(\"photoswipe/dist/default-skin/default-skin.css\");\n        }\n        PhotoSwipe = (await import(\"photoswipe\")).default;\n        PhotoSwipeUI = (await import(\"photoswipe/dist/photoswipe-ui-default\")).default; // prettier-ignore\n\n        this.options = parser.parse(this.el, this.options);\n\n        this.template = await this.get_template();\n\n        const gallery_observer = new MutationObserver(\n            this.initialize_trigger.bind(this)\n        );\n        gallery_observer.observe(this.el, {\n            subtree: true,\n            childList: true,\n        });\n\n        this.initialize_trigger();\n    },\n\n    async get_template() {\n        // Check for already defined templates.\n        let template = document.querySelector(\n            \".pat-gallery__template-wrapper, #photoswipe-template\"\n        );\n        // Otherwise, use default template.\n        if (!template) {\n            const raw_template = (await import(\"./template.html\")).default;\n            template = document.createElement(\"div\");\n            template.setAttribute(\"class\", \"pat-gallery__template-wrapper\");\n            template.setAttribute(\"hidden\", \"\");\n            template.innerHTML = raw_template;\n            document.body.appendChild(template);\n        }\n        return template;\n    },\n\n    initialize_trigger() {\n        const image_wrapper_els = dom.querySelectorAllAndMe(\n            this.el,\n            this.options.itemSelector\n        );\n        this.images = [...image_wrapper_els].map((it) => {\n            events.add_event_listener(\n                it,\n                \"click\",\n                \"pat-gallery--image_handler\",\n                this.initialize_gallery.bind(this)\n            );\n\n            const src =\n                it.getAttribute(\"href\") ||\n                it.getAttribute(\"src\") ||\n                it.querySelector(\"img\")?.getAttribute(\"src\");\n            const title =\n                it.getAttribute(\"title\") ||\n                it.querySelector(\"img\")?.getAttribute(\"title\");\n\n            return {\n                w: 0,\n                h: 0,\n                src: src,\n                title: title,\n            };\n        });\n    },\n\n    initialize_gallery(e) {\n        const trigger_el = e.currentTarget;\n\n        this.template.removeAttribute(\"hidden\");\n\n        const pswp_el = dom.querySelectorAllAndMe(this.template, \".pswp\")?.[0];\n        if (!pswp_el) {\n            log.warn(\"No photoswipe template found.\");\n        }\n\n        // Now - when all is set - prevent default action.\n        e.preventDefault();\n\n        const index =\n            this.images\n                .map((it) => it.src)\n                .indexOf(\n                    trigger_el.getAttribute(\"href\") || trigger_el.getAttribute(\"src\")\n                ) || 0;\n\n        const options = {\n            // Get the index of the clicked gallery item in the list of images.\n            index: index,\n            scaleMode: this.options.scaleMethod,\n            loop: this.options.loop,\n            slideshowDelay: this.options.delay,\n            hideAnimationDuration: this.options.effectDuration,\n            showAnimationDuration: this.options.effectDuration,\n            pinchToClose: false,\n            closeOnScroll: false,\n            // Fix reload on gallery close which was induced by a history back call.\n            history: false,\n        };\n\n        const gallery = new PhotoSwipe(pswp_el, PhotoSwipeUI, this.images, options);\n\n        const gallery_reinit_sizes_debouncer = utils.debounce(() => {\n            gallery.updateSize(true); // reinit Items\n        }, 50);\n\n        gallery.listen(\"gettingData\", function (index, item) {\n            // Workaround for the fact that we don't know the image sizes.\n            // https://github.com/dimsemenov/PhotoSwipe/issues/796\n            if (item.w < 1 || item.h < 1) {\n                // unknown size\n                const img = new Image();\n                img.onload = (_e) => {\n                    const img_el = _e.target;\n                    // will get size after load\n                    item.w = img_el.width; // set image width\n                    item.h = img_el.height; // set image height\n                    item.needsUpdate = true;\n                    gallery_reinit_sizes_debouncer(); // debounce to not land in a re-init loop.\n                };\n                img.src = item.src; // let's download image\n            }\n        });\n\n        gallery.listen(\"initialZoomInEnd\", () => {\n            // don't show body scrollbars when overlay is open\n            this.orig_body_overflow = dom.get_css_value(document.body, \"overflow\");\n            document.body.style.overflow = \"hidden\";\n        });\n\n        gallery.listen(\"destroy\", () => {\n            // show original overlay value on body after closing\n            document.body.style.overflow = this.orig_body_overflow;\n            this.template.setAttribute(\"hidden\", \"\");\n        });\n\n        gallery.init();\n    },\n});\n","import $ from \"jquery\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\n\nconst log = logging.getLogger(\"pat.image-crop\");\n\nexport const parser = new Parser(\"image-crop\");\nparser.addArgument(\"preview-id\", \"\");\nparser.addArgument(\"preview-height\", 0);\nparser.addArgument(\"preview-width\", 0);\nparser.addArgument(\"aspect-ratio\", 1);\nparser.addArgument(\"form-id\", \"\");\nparser.addArgument(\"initial-sel\", \"0 0 0 0\");\nparser.addArgument(\"min-size\", \"0 0\");\nparser.addArgument(\"max-size\", \"0 0\");\nparser.addArgument(\"input-prefix\", \"\");\n\nvar _ = {\n    name: \"image-crop\",\n    trigger: \"img.pat-image-crop\",\n    bounds: [0, 0],\n    inputNames: [\"x1\", \"y1\", \"x2\", \"y2\", \"w\", \"h\"],\n\n    async init($el, options) {\n        await import(\"jquery-jcrop\");\n\n        // initialize the elements\n        return $el.each(function () {\n            var $this = $(this),\n                opts = parser.parse($this, options),\n                data = {};\n\n            // Initialize the preview parameters\n            if (opts.preview.id.length === 0) data.preview = false;\n            else {\n                data.preview = {};\n                data.preview.element = $(opts.preview.id);\n                if (data.preview.element.length === 0) {\n                    log.error(\"Invalid preview element ID supplied: \" + opts.preview.id);\n                    return;\n                }\n                if (opts.previewWidth > 0 && opts.preview.height > 0) {\n                    data.preview.width = opts.preview.width;\n                    data.preview.height = opts.preview.height;\n                } else {\n                    data.preview.width = data.preview.element.parent().width();\n                    data.preview.height = data.preview.element.parent().height();\n                }\n            }\n\n            // Set the form ID\n            if (opts.formId.length === 0) {\n                // no form ID supplied. Look for the closest parent form element\n                data.form = $this.closest(\"form\");\n                if (data.form.length === 0) {\n                    log.error(\"No form specified or found\");\n                    return;\n                }\n            } else {\n                data.form = $(opts.formId);\n                if (data.form.length === 0) {\n                    log.error(\"Invalid form ID supplied: \" + opts.formId);\n                }\n            }\n\n            // Setup form inputs\n            data.prefix = opts.inputPrefix;\n            data.inputs = {};\n            for (var i = 0; i < _.inputNames.length; i++)\n                data.inputs[_.inputNames[i]] = _._setupInput(\n                    data.form,\n                    data.prefix,\n                    _.inputNames[i]\n                );\n\n            //\n            // Initial coordinates\n            //\n            var ic = _._parseOpt(opts.initialSel);\n            if (ic.length !== 4) log.warn(\"Invalid coordinates for initial selection\");\n            else if (ic[2] - ic[0] > 0 && ic[3] - ic[1] > 0) data.initialCoords = ic;\n\n            data.aspectRatio = opts.aspectRatio;\n            data.minSize = _._parseOpt(opts.minSize);\n            data.maxSize = _._parseOpt(opts.maxSize);\n\n            var handler = function (c) {\n                _.onSelect(c, data);\n            };\n\n            $this.Jcrop(\n                {\n                    onChange: handler,\n                    onSelect: handler,\n                    onRelease: handler,\n                    aspectRatio: data.aspectRatio,\n                    setSelect: data.initialCoords,\n                    minSize: data.minSize,\n                    maxSize: data.maxSize,\n                },\n                function () {\n                    data.api = this;\n                    _.onSelect(this.tellSelect(), data);\n                }\n            );\n        });\n    },\n\n    _setupInput: function ($form, prefix, name) {\n        var input = $form.find(\"input[name=\" + prefix + name + \"]\");\n        if (input.length === 0)\n            input = $('<input type=\"hidden\" name=\"' + prefix + name + '\" />').appendTo(\n                $form\n            );\n        return input;\n    },\n\n    _parseOpt: function (val) {\n        var ret = val\n            .replace(/\\s{2,}/g, \" \")\n            .trim()\n            .split(\" \");\n        for (var i = 0; i < ret.length; i++) ret[i] = parseInt(ret[i], 10);\n        return ret;\n    },\n\n    onSelect: function (c, data) {\n        if (data.preview) _.updatePreview(c, data);\n        _.updateInputs(c, data);\n    },\n\n    updatePreview: function (c, data) {\n        if (!data.api) return;\n        if (parseInt(c.w, 10) > 0) {\n            var rx = data.preview.width / c.w,\n                ry = data.preview.height / c.h,\n                bounds = data.api.getBounds();\n\n            data.preview.element.css({\n                width: Math.round(rx * bounds[0]) + \"px\",\n                height: Math.round(ry * bounds[1]) + \"px\",\n                marginLeft: \"-\" + Math.round(rx * c.x) + \"px\",\n                marginTop: \"-\" + Math.round(ry * c.y) + \"px\",\n            });\n        }\n    },\n\n    updateInputs: function (c, data) {\n        if (c && c.w && parseInt(c.w, 10) > 0) {\n            data.inputs.x1.attr(\"value\", c.x);\n            data.inputs.y1.attr(\"value\", c.y);\n            data.inputs.x2.attr(\"value\", c.x2);\n            data.inputs.y2.attr(\"value\", c.y2);\n            data.inputs.w.attr(\"value\", c.w);\n            data.inputs.h.attr(\"value\", c.h);\n        }\n    },\n};\n\nregistry.register(_);\nexport default _;\n","import $ from \"jquery\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\nimport dom from \"../../core/dom\";\n\nvar legend = {\n    name: \"legend\",\n    trigger: \"legend\",\n\n    _convertToIframes: function ($root) {\n        $root.findInclusive(\"object[type='text/html']\").each(function () {\n            var $object = $(this),\n                $iframe = $(\"<iframe allowtransparency='true'/>\");\n\n            $iframe\n                .attr(\"id\", $object.attr(\"id\"))\n                .attr(\"class\", $object.attr(\"class\"))\n                .attr(\"src\", $object.attr(\"data\"))\n                .attr(\"frameborder\", \"0\")\n                .attr(\"style\", \"background-color:transparent\");\n            $object.replaceWith($iframe);\n        });\n    },\n\n    transform: function ($root) {\n        const root = utils.jqToNode($root);\n        const all = dom.querySelectorAllAndMe(root, \"legend:not(.disable-patterns)\");\n        for (const el of all) {\n            $(el).replaceWith(\"<p class='legend'>\" + $(el).html() + \"</p>\");\n        }\n    },\n};\nregistry.register(legend);\nexport default legend;\n","import $ from \"jquery\";\nimport { BasePattern } from \"../../core/basepattern\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport logging from \"../../core/logging\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"pat.markdown\");\nconst is_markdown_resource = /\\.md$/;\n\nclass Pattern extends BasePattern {\n    static name = \"markdown\";\n    static trigger = \".pat-markdown\";\n\n    async init() {\n        if (this.el.matches(this.trigger)) {\n            /* This pattern can either be used standalone or as an enhancement\n             * to pat-inject. The following only applies to standalone, when\n             * the element is explicitly configured with the pat-markdown\n             * trigger.\n             */\n            const source = dom.is_input(this.el) ? this.el.value : this.el.innerHTML;\n            const rendered = await this.render(source);\n            this.el.replaceWith(...rendered);\n        }\n    }\n\n    async render(text) {\n        const marked = (await import(\"marked\")).marked;\n        const DOMPurify = (await import(\"dompurify\")).default;\n\n        const wrapper = document.createElement(\"div\");\n        const parsed = DOMPurify.sanitize(marked.parse(text));\n        wrapper.innerHTML = parsed;\n\n        // If pat-syntax-highlight is available, highlight code blocks.\n        const SyntaxHighlight = registry.patterns[\"syntax-highlight\"];\n        if (SyntaxHighlight) {\n            for (const item of wrapper.querySelectorAll(\"pre > code\")) {\n                const pre = item.parentElement;\n                pre.classList.add(\"pat-syntax-highlight\");\n                // If the code block language was set in a fenced code block,\n                // marked has already set the language as a class on the code tag.\n                // pat-syntax-highlight will understand this.\n                new SyntaxHighlight(pre);\n                await events.await_event(pre, \"init.syntax-highlight.patterns\");\n            }\n        }\n\n        return $(wrapper);\n    }\n\n    async renderForInjection(cfg, data) {\n        let header;\n        let source = data;\n        if (cfg.source && (header = /^#+\\s*(.*)/.exec(cfg.source)) !== null) {\n            source = this.extractSection(source, header[1]);\n            if (source === null) {\n                log.warn('Could not find section \"' + cfg.source + '\" in ' + cfg.url);\n                return $(\"<div/>\").attr(\"data-src\", cfg.url);\n            }\n            source += \"\\n\"; // Needed for some markdown syntax\n        }\n        const rendered = await this.render(source);\n        return rendered.attr(\"data-src\", cfg.source ? cfg.url + cfg.source : cfg.url);\n    }\n\n    extractSection(text, header) {\n        let pattern;\n        header = utils.escapeRegExp(header);\n        let matcher = new RegExp(\n            \"^((#+)\\\\s*@TEXT@\\\\s*|@TEXT@\\\\s*\\\\n([=-])+\\\\s*)$\".replace(/@TEXT@/g, header),\n            \"m\"\n        );\n        let match = matcher.exec(text);\n        if (match === null) {\n            return null;\n        } else if (match[2]) {\n            // We have a ##-style header.\n            const level = match[2].length;\n            pattern =\n                \"^#{@LEVEL@}\\\\s*@TEXT@\\\\s*$\\\\n+((?:.|\\\\n)*?(?=^#{1,@LEVEL@}\\\\s)|.*(?:.|\\\\n)*)\";\n            pattern = pattern.replace(/@LEVEL@/g, level);\n        } else if (match[3]) {\n            // We have an underscore-style header.\n            if (match[3] === \"=\")\n                pattern =\n                    \"^@TEXT@\\\\s*\\\\n=+\\\\s*\\\\n+((?:.|\\\\n)*?(?=^.*?\\\\n=+\\\\s*$)|(?:.|\\\\n)*)\";\n            else\n                pattern =\n                    \"^@TEXT@\\\\s*\\\\n-+\\\\s*\\\\n+((?:.|\\\\n)*?(?=^.*?\\\\n[-=]+\\\\s*$)|(?:.|\\\\n)*)\";\n        } else {\n            log.error(\"Unexpected section match result\", match);\n            return null;\n        }\n        pattern = pattern.replace(/@TEXT@/g, header);\n        matcher = new RegExp(pattern, \"m\");\n        match = matcher.exec(text);\n        if (match === null) {\n            log.error(\"Failed to find section with known present header?\");\n        }\n        return match !== null ? match[0] : null;\n    }\n}\n\ndom.document_ready(() => {\n    $(document.body).on(\n        \"patterns-inject-triggered.pat-markdown\",\n        \"a.pat-inject\",\n        function identifyMarkdownURLs() {\n            /* Identify injected URLs which point to markdown files and set their\n             * datatype so that we can register a type handler for them.\n             */\n            const cfgs = $(this).data(\"pat-inject\");\n            cfgs.forEach(function (cfg) {\n                if (is_markdown_resource.test(cfg.url)) {\n                    cfg.dataType = \"markdown\";\n                }\n            });\n        }\n    );\n});\n\nasync function register_external_handlers() {\n    await utils.timeout(1);\n\n    const inject = registry.patterns.inject;\n    if (inject) {\n        inject.registerTypeHandler(\"markdown\", {\n            async sources(cfgs, data) {\n                return await Promise.all(\n                    cfgs.map(async function (cfg) {\n                        const pat = new Pattern(cfg.$target[0]);\n                        const rendered = await pat.renderForInjection(cfg, data);\n                        return rendered;\n                    })\n                );\n            },\n        });\n    }\n}\nregister_external_handlers();\n\nregistry.register(Pattern);\nexport default Pattern;\nexport { Pattern };\n","/**\n * Patternslib pattern for Masonry\n * Copyright 2015 Syslab.com GmBH\n */\nimport $ from \"jquery\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport Base from \"../../core/base\";\nimport utils from \"../../core/utils\";\n\n// Lazy loading modules.\nlet Masonry;\n\nconst log = logging.getLogger(\"pat.masonry\");\n\nexport const parser = new Parser(\"masonry\");\n// parser.addArgument(\"stagger\", \"\");\nparser.addArgument(\"column-width\");\nparser.addArgument(\"container-style\", '{ \"position\": \"relative\" }');\nparser.addArgument(\"gutter\");\nparser.addArgument(\"is-fit-width\", false);\nparser.addArgument(\"is-horizontal-order\", false); // preserve horizontal order.\nparser.addArgument(\"is-origin-left\", true);\nparser.addArgument(\"is-origin-top\", true);\nparser.addArgument(\"is-percent-position\", false); // set item positions in percent values. items will not transition on resize.\nparser.addArgument(\"is-resize\", true); // adjust sizes and position on resize.\nparser.addArgument(\"item-selector\", \".item\");\nparser.addArgument(\"stamp\", \"\");\nparser.addArgument(\"transition-duration\", \"0.4s\");\n\n// is-* are masonry v3 options, here we add v4 style names.\n// we keep the is-* as there is special support with options parsing.\nparser.addAlias(\"fit-width\", \"is-fit-width\");\nparser.addAlias(\"origin-left\", \"is-origin-left\");\nparser.addAlias(\"origin-top\", \"is-origin-top\");\nparser.addAlias(\"horizontal-order\", \"is-horizontal-order\");\nparser.addAlias(\"percent-position\", \"is-percent-position\");\nparser.addAlias(\"resize\", \"is-resize\");\n\nexport default Base.extend({\n    name: \"masonry\",\n    trigger: \".pat-masonry\",\n\n    async init($el, opts) {\n        Masonry = (await import(\"masonry-layout\")).default;\n        const ImagesLoaded = (await import(\"imagesloaded\")).default;\n\n        this.options = parser.parse(this.$el, opts);\n        // Initialize\n        this.initMasonry();\n\n        const imgLoad = await ImagesLoaded(this.$el);\n        imgLoad.on(\n            \"progress\",\n            function () {\n                if (!this.msnry) {\n                    this.initMasonry();\n                }\n                this.quicklayout();\n            }.bind(this)\n        );\n        imgLoad.on(\n            \"always\",\n            function () {\n                if (!this.msnry) {\n                    this.initMasonry();\n                }\n                this.layout();\n            }.bind(this)\n        );\n\n        // Update if something gets injected inside the pat-masonry\n        this.$el\n            .on(\n                \"patterns-injected.pat-masonry\",\n                utils.debounce(this.update.bind(this), 100)\n            )\n            .on(\"pat-update\", utils.debounce(this.quicklayout.bind(this), 200));\n\n        var callback = utils.debounce(this.quicklayout.bind(this), 400);\n        var observer = new MutationObserver(callback);\n        /* Explicitly not including style. We assume style is set dynamically only by scripts and we do all our controlled changes through classes.\n           That way we avoid masonry to react on its own style calculation */\n        var config = {\n            childList: true,\n            subtree: true,\n            characterData: false,\n            attributeOldValue: true,\n            attributes: true,\n            attributeFilter: [\"class\"],\n        };\n        observer.observe(document.body, config);\n    },\n\n    async initMasonry() {\n        var containerStyle;\n        try {\n            containerStyle = JSON.parse(this.options.containerStyle);\n        } catch {\n            containerStyle = { position: \"relative\" };\n            log.warn(\n                \"Invalid value passed in as containerStyle. Needs to \" +\n                    \"be valid JSON so that it can be converted to an object for Masonry.\"\n            );\n        }\n        this.msnry = new Masonry(this.$el[0], {\n            columnWidth: this.getTypeCastedValue(this.options.columnWidth),\n            containerStyle: containerStyle,\n            fitWidth: this.options.is[\"fit-width\"],\n            gutter: this.getTypeCastedValue(this.options.gutter),\n            horizontalOrder: this.options.is[\"horizontal-order\"],\n            initLayout: false,\n            itemSelector: this.options.itemSelector,\n            originLeft: this.options.is[\"origin-left\"],\n            originTop: this.options.is[\"origin-top\"],\n            percentPosition: this.options.is[\"percent-position\"],\n            resize: this.options.is[\"resize\"],\n            stamp: this.options.stamp,\n            transitionDuration: this.options.transitionDuration,\n        });\n    },\n\n    update: function () {\n        this.msnry.remove();\n        this.initMasonry();\n        this.layout();\n    },\n\n    quicklayout: function () {\n        if (!this.msnry) {\n            // Not initialized yet\n            return;\n        }\n        // call masonry layout on the children before calling it on this element\n        this.$el.find(\".pat-masonry\").each(function (idx, child) {\n            $(child).patMasonry(\"quicklayout\");\n        });\n        this.msnry.layout();\n    },\n\n    layout: function () {\n        this.$el.removeClass(\"masonry-ready\");\n        this.msnry.on(\n            \"layoutComplete\",\n            function () {\n                this.$el.addClass(\"masonry-ready\");\n            }.bind(this)\n        );\n        this.msnry.layout();\n        this.quicklayout();\n    },\n\n    getTypeCastedValue: function (original) {\n        var val = Number(original);\n        return isNaN(val) ? original || 0 : val;\n    },\n});\n","import $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\n\nexport const parser = new Parser(\"fullscreen\");\nparser.addArgument(\"nav-item-selector\", \"li\"); // CSS Selector for navigation items.\n\nexport default Base.extend({\n    name: \"menu\",\n    trigger: \".pat-menu\",\n\n    timer: null,\n\n    init: function ($el, opts) {\n        this.options = parser.parse(this.$el, opts);\n        var self = this;\n        $el.find(this.options.navItemSelector).each(function () {\n            var $it = $(this);\n            $it.addClass(\"closed\")\n                .on(\"mouseover\", self.mouseOverHandler.bind(self))\n                .on(\"mouseout\", self.mouseOutHandler.bind(self));\n            if ($it.children(self.options.navItemSelector).length > 0) {\n                $it.addClass(\"hasChildren\");\n            }\n        });\n    },\n\n    openMenu: function (it) {\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null;\n        }\n        it = $(it);\n        if (!it.hasClass(\"open\")) {\n            it.siblings(\".open\").each(\n                function () {\n                    this.closeMenu(this.$el);\n                }.bind(this)\n            );\n            it.addClass(\"open\").removeClass(\"closed\");\n        }\n    },\n\n    closeMenu: function (it) {\n        $(it).find(\".open\").addBack().removeClass(\"open\").addClass(\"closed\");\n    },\n\n    mouseOverHandler: function (ev) {\n        this.openMenu(ev.target);\n    },\n\n    mouseOutHandler: function (ev) {\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null;\n        }\n        this.timer = setTimeout(\n            function () {\n                this.closeMenu(ev.target);\n            }.bind(this),\n            1000\n        );\n    },\n});\n","import { BasePattern } from \"../../core/basepattern\";\nimport dom from \"../../core/dom\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"scroll-marker\");\n//logging.setLevel(logging.Level.DEBUG);\n\nexport const parser = new Parser(\"scroll-marker\");\nparser.addArgument(\"in-view-class\", \"in-view\");\nparser.addArgument(\"current-class\", \"current\");\nparser.addArgument(\"current-content-class\", \"scroll-marker-current\");\n\nparser.addArgument(\"side\", \"top\", [\"top\", \"bottom\", \"middle\", \"auto\"]);\nparser.addArgument(\"distance\", \"50%\");\nparser.addArgument(\"visibility\", null, [null, \"none\", \"most-visible\"]);\nparser.addArgument(\"selector\", \"a[href^='#']\");\n\nclass Pattern extends BasePattern {\n    static name = \"scroll-marker\";\n    static trigger = \".pat-scroll-marker\";\n    static parser = parser;\n\n    parser_group_options = false;\n\n    // Used to disable automatically setting the current class when it's set\n    // differently, e.g. by clicking in a pat-navigation menu.\n    set_current_disabled = false;\n\n    init() {\n        // Get all elements that are referenced by links in the current page.\n        this.observables = new Map(\n            [...dom.querySelectorAllAndMe(this.el, this.options.selector)]\n                .map(\n                    // Create the structure:\n                    // id: {link, target}\n                    // to create the resulting Map holding all necessary information.\n                    (it) => [\n                        it.hash.split(\"#\")[1],\n                        {\n                            link: it,\n                            target: document.querySelector(dom.escape_css_id(it.hash)),\n                        },\n                    ]\n                )\n                .filter(\n                    // Filter again for any missing targets.\n                    (it) => it[1].target\n                )\n        );\n\n        // Find a possible scroll container based on the first target/content\n        // element in the observables map.\n        // Note, a Map's values method returns an iterator.\n        const first_observable = this.observables.values().next();\n        if (!first_observable.value) {\n            // No targets found.\n            return;\n        }\n        this.scroll_container = dom.find_scroll_container(\n            first_observable.value.target,\n            \"y\",\n            window\n        );\n        // window.innerHeight or el.clientHeight\n        const scroll_container_height =\n            typeof this.scroll_container.innerHeight !== \"undefined\"\n                ? this.scroll_container.innerHeight\n                : this.scroll_container.clientHeight;\n        this.scroll_marker_distance = utils.parseLength(\n            this.options.distance,\n            scroll_container_height\n        );\n\n        log.debug(\"scroll_container: \", this.scroll_container);\n        log.debug(\"scroll_container_height: \", scroll_container_height);\n        log.debug(\"distance: \", this.options.distance);\n        log.debug(\"distance parsed: \", this.scroll_marker_distance);\n        log.debug(\"side: \", this.options.side);\n        log.debug(\"visibility: \", this.options.visibility);\n\n        this.debounced_scroll_marker_current_callback = utils.debounce(\n            this.scroll_marker_current_callback.bind(this),\n            200,\n            { timer: null },\n            false\n        );\n\n        // For debugging.\n        this.callback_cnt = 0;\n\n        const observer = new IntersectionObserver(\n            this.scroll_marker_callback.bind(this),\n            {\n                root: this.scroll_container === window ? null : this.scroll_container,\n                threshold: utils.threshold_list(10),\n            }\n        );\n        for (const it of this.observables.values()) {\n            observer.observe(it.target);\n        }\n    }\n\n    scroll_marker_callback(entries) {\n        log.debug(\"cnt: \", this.callback_cnt++);\n        log.debug(\"entries: \", entries);\n\n        for (const entry of entries) {\n            // Set the in-view class on the link.\n            const id = entry.target.getAttribute(\"id\");\n            const item = this.observables.get(id);\n            if (!item) {\n                continue;\n            }\n\n            if (entry.isIntersecting) {\n                item.link.classList.add(this.options[\"in-view-class\"]);\n            } else {\n                item.link.classList.remove(this.options[\"in-view-class\"]);\n            }\n        }\n\n        // Return if the scroll marker is disabled.\n        // E.g. when navigation item was clicked.\n        if (this.set_current_disabled) {\n            return;\n        }\n\n        this.debounced_scroll_marker_current_callback();\n    }\n\n    scroll_marker_current_callback() {\n        // Set the item which is nearest to the scroll container's middle to current.\n\n        // First, set all to non-current.\n        for (const item of this.observables.values()) {\n            item.link.classList.remove(this.options[\"current-class\"]);\n            item.target.classList.remove(this.options[\"current-content-class\"]);\n        }\n\n        // Sort by distance to the middle of the scroll container.\n        let items_by_weight = [...this.observables.values()].map((it) => it.target);\n        log.debug(\"items_by_weight initial: \", items_by_weight);\n\n        if (this.options.visibility === \"most-visible\") {\n            // Create a map with all ratios.\n            const ratio_map = new Map(\n                items_by_weight.map((it) => [\n                    it,\n                    dom.get_visible_ratio(it, this.scroll_container),\n                ])\n            );\n\n            log.debug(\"ratio_map: \", ratio_map);\n\n            // Sort items by ratio of visible area.\n            items_by_weight.sort((a, b) => {\n                const ratio_a = ratio_map.get(a);\n                const ratio_b = ratio_map.get(b);\n                if (ratio_a > ratio_b) {\n                    return -1;\n                }\n                if (ratio_a < ratio_b) {\n                    return 1;\n                }\n                return 0;\n            });\n\n            log.debug(\"items_by_weight per ratio: \", items_by_weight);\n\n            // Filter all items which have a ratio smaller than the first item.\n            const ratio_0 = ratio_map.get(items_by_weight[0]);\n            items_by_weight = items_by_weight.filter(\n                (it) => ratio_map.get(it) >= ratio_0\n            );\n\n            log.debug(\"items_by_weight filtered: \", items_by_weight);\n            log.debug(\"ratio item 0: \", ratio_0);\n        }\n        // Always sort by distance.\n        items_by_weight.sort((a, b) => {\n            let distance_a;\n            let distance_b;\n\n            const a_rect = a.getBoundingClientRect();\n            const b_rect = b.getBoundingClientRect();\n            const scroll_marker_distance = this.scroll_marker_distance;\n\n            switch (this.options.side) {\n                case \"top\":\n                    distance_a = Math.abs(a_rect.top - scroll_marker_distance);\n                    distance_b = Math.abs(b_rect.top - scroll_marker_distance);\n                    break;\n                case \"bottom\":\n                    distance_a = Math.abs(a_rect.bottom - scroll_marker_distance);\n                    distance_b = Math.abs(b_rect.bottom - scroll_marker_distance);\n                    break;\n                case \"middle\":\n                    distance_a = Math.abs(\n                        (a_rect.top - a_rect.bottom) / 2 - scroll_marker_distance\n                    );\n                    distance_b = Math.abs(\n                        (b_rect.top - b_rect.bottom) / 2 - scroll_marker_distance\n                    );\n                    break;\n                default:\n                    distance_a = Math.min(\n                        Math.abs(a_rect.top - scroll_marker_distance),\n                        Math.abs(a_rect.bottom - scroll_marker_distance)\n                    );\n                    distance_b = Math.min(\n                        Math.abs(b_rect.top - scroll_marker_distance),\n                        Math.abs(b_rect.bottom - scroll_marker_distance)\n                    );\n            }\n\n            if (distance_a < distance_b) {\n                return -1;\n            }\n            if (distance_a > distance_b) {\n                return 1;\n            }\n            return 0;\n        });\n\n        log.debug(\"items_by_weight per distance: \", items_by_weight);\n\n        // Finally, set the nearest to current.\n        const nearest = items_by_weight[0];\n        const nearest_link = this.observables.get(nearest?.getAttribute(\"id\"))?.link;\n        log.debug(\"nearest: \", nearest);\n        log.debug(\"nearest_link: \", nearest_link);\n        if (nearest_link) {\n            nearest_link.classList.add(this.options[\"current-class\"]);\n            nearest.classList.add(this.options[\"current-content-class\"]);\n        }\n    }\n}\n\nregistry.register(Pattern);\nexport default Pattern;\nexport { Pattern };\n","import $ from \"jquery\";\nimport { BasePattern } from \"../../core/basepattern\";\nimport Parser from \"../../core/parser\";\nimport ScrollMarker from \"../scroll-marker/scroll-marker\";\nimport dom from \"../../core/dom\";\nimport logging from \"../../core/logging\";\nimport events from \"../../core/events\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"navigation\");\n\nexport const parser = new Parser(\"navigation\");\nparser.addArgument(\"item-wrapper\", \"li\");\nparser.addArgument(\"in-path-class\", \"navigation-in-path\");\nparser.addArgument(\"in-view-class\", \"in-view\");\nparser.addArgument(\"current-class\", \"current\");\nparser.addArgument(\"current-content-class\", \"navigation-current\");\n\nparser.addArgument(\"scroll-item-side\", \"top\", [\"top\", \"bottom\", \"middle\", \"auto\"]);\nparser.addArgument(\"scroll-item-distance\", \"50%\");\nparser.addArgument(\"scroll-item-visibility\", null, [null, \"none\", \"most-visible\"]);\nparser.addArgument(\"scroll-trigger-selector\", \"a[href^='#'].scroll-trigger\");\n\nclass Pattern extends BasePattern {\n    static name = \"navigation\";\n    static trigger = \".pat-navigation\";\n    static parser = parser;\n\n    parser_group_options = false;\n\n    init() {\n        this.$el = $(this.el);\n\n        this.init_listeners();\n        this.init_markings();\n\n        if (utils.is_option_truthy(this.options[\"scroll-trigger-selector\"])) {\n            this.scroll_marker = new ScrollMarker(this.el, {\n                \"current-class\": this.options[\"current-class\"],\n                \"current-content-class\": this.options[\"current-content-class\"],\n                \"in-view-class\": this.options[\"in-view-class\"],\n                \"side\": this.options[\"scroll-item-side\"],\n                \"distance\": this.options[\"scroll-item-distance\"],\n                \"visibility\": this.options[\"scroll-item-visibility\"],\n                \"selector\": this.options[\"scroll-trigger-selector\"],\n            });\n\n            this.debounced_scroll_marker_enabler = utils.debounce(() => {\n                log.debug(\"Enable scroll-marker.\");\n                this.scroll_marker.set_current_disabled = false;\n                events.remove_event_listener(\n                    this.scroll_marker.scroll_container === window\n                        ? document\n                        : this.scroll_marker.scroll_container,\n                    \"pat-navigation__scroll_marker_enable\"\n                );\n            }, 200);\n        }\n    }\n\n    /**\n     * Initialize listeners for the navigation.\n     */\n    init_listeners() {\n        const current = this.options[\"current-class\"];\n\n        events.add_event_listener(\n            this.el,\n            \"click\",\n            \"pat_navigation_click_handler\",\n            (ev) => {\n                // Get the click target's anchor element. The click target\n                // might be a child of the link, e.g. a span wrapped within an\n                // anchor.\n                const target = ev.target.closest(\"a\");\n                if (target?.matches(\":not(.pat-inject)\")) {\n\n                    // Remove all set current classes\n                    this.clear_items();\n                    // Mark the current item\n                    this.mark_current(target);\n\n                    if (\n                        !utils.is_option_truthy(this.options[\"scroll-trigger-selector\"])\n                    ) {\n                        // Don't do the scroll-marker stuff below, if it is disabled by the settings.\n                        return;\n                    }\n                    // Disable scroll marker to set the current class after\n                    // clicking in the menu and scrolling to the target.\n                    log.debug(\"Disable scroll-marker.\");\n                    this.scroll_marker.set_current_disabled = true;\n                    this.debounced_scroll_marker_enabler();\n                    events.add_event_listener(\n                        this.scroll_marker.scroll_container === window\n                            ? document\n                            : this.scroll_marker.scroll_container,\n                        \"scroll\",\n                        \"pat-navigation__scroll_marker_enable\",\n                        this.debounced_scroll_marker_enabler.bind(this)\n                    );\n                }\n            }\n        );\n\n        // Mark the navigation items after pat-inject triggered within this navigation menu.\n        this.$el.on(\"patterns-inject-triggered\", \"a\", (ev) => {\n            // Remove all set current classes\n            this.clear_items();\n            // Mark the current item\n            this.mark_current(ev.target);\n        });\n\n        // Mark the navigation items after pat-inject injected into this navigation menu.\n        this.$el.on(\"patterns-injected-scanned\", () => {\n            this.init_markings();\n        });\n\n        // Automatically and recursively load the ``.current`` item.\n        if (this.el.classList.contains(\"navigation-load-current\")) {\n            // Check for current elements injected here.\n            this.$el.on(\"patterns-injected-scanned\", (ev) => {\n                const target = ev.target;\n                if (target.matches(`a.${current}`)) target.click();\n                else if (target.matches(`.${current}`)) target.querySelector(\"a\")?.click(); // prettier-ignore\n            });\n            this.el.querySelector(`a.${current}, .${current} a`)?.click();\n        }\n    }\n\n    /**\n     * Initial run to mark the current item and its parents.\n     */\n    init_markings() {\n        if (this.el.querySelector(`.${this.options[\"current-class\"]}`)) {\n            log.debug(\"Mark navigation items based on existing current class\");\n            this.mark_current();\n        } else {\n            log.debug(\"Mark navigation items based on URL pattern.\");\n            this.mark_items_url();\n        }\n    }\n\n    /**\n     * Get a matching parent or stop at stop_el.\n     *\n     * @param {Node} item - The item to start with.\n     * @param {String} selector - The CSS selector to search parent elements for.\n     * @param {Node} stop_el - The element to stop at.\n     *\n     * @returns {Node} - The matching parent or null.\n     */\n    get_parent(item, selector, stop_el) {\n        let matching_parent = item.parentNode;\n        while (matching_parent) {\n            if (matching_parent === stop_el || matching_parent === document) {\n                return null;\n            }\n            if (matching_parent.matches(selector)) {\n                return matching_parent;\n            }\n            matching_parent = matching_parent.parentNode;\n        }\n    }\n\n    /**\n     * Mark an item and it's wrapper as current.\n     *\n     * @param {Node} [current_el] - The item to mark as current.\n     *                              If not given, the element's tree will be searched for an existing current item.\n     *                              This is to also mark the wrapper and it's path appropriately.\n     */\n    mark_current(current_el) {\n        const current_els = current_el\n            ? [current_el]\n            : this.el.querySelectorAll(`.current > a, a.current`);\n\n        for (const item of current_els) {\n            item.classList.add(this.options[\"current-class\"]);\n            const wrapper = item.closest(this.options[\"item-wrapper\"]);\n            wrapper?.classList.add(this.options[\"current-class\"]);\n            this.mark_in_path(wrapper || item);\n            log.debug(\"Statically set current item marked as current\", item);\n\n            // Clear all previous current content items.\n            for (const it of [\n                ...document.querySelectorAll(\n                    `.${this.options[\"current-content-class\"]}`\n                ),\n            ]) {\n                it.classList.remove(this.options[\"current-content-class\"]);\n            }\n            // Mark the current content item, if it is a hash link.\n            if (item.matches(\"a[href^='#']\")) {\n                const content_item = document.querySelector(\n                    dom.escape_css_id(item.hash)\n                );\n                if (content_item) {\n                    content_item.classList.add(this.options[\"current-content-class\"]);\n                }\n            }\n        }\n    }\n\n    /**\n     * Mark all parent navigation elements as in path.\n     *\n     * @param {Node} start_el - The element to start with.\n     *\n     */\n    mark_in_path(start_el) {\n        let path_el = this.get_parent(start_el, this.options[\"item-wrapper\"], this.el);\n        while (path_el) {\n            if (!path_el.matches(`.${this.options[\"current-class\"]}`)) {\n                path_el.classList.add(this.options[\"in-path-class\"]);\n                for (const it of [...path_el.children].filter((it) => it.matches(\"a\"))) {\n                    it.classList.add(this.options[\"in-path-class\"]);\n                }\n                log.debug(\"Marked item as in-path\", path_el);\n            }\n            path_el = this.get_parent(path_el, this.options[\"item-wrapper\"], this.el);\n        }\n    }\n\n    /**\n     * Mark all navigation items that are in the path of the current url.\n     *\n     * @param {String} [url] - The url to check against.\n     *                         If not given, the current url will be used.\n     */\n    mark_items_url(url) {\n        const current_url = url || this.base_url();\n        const current_url_prepared = this.prepare_url(current_url);\n\n        const portal_url = this.prepare_url(document.body.dataset?.portalUrl);\n        const nav_items = this.el.querySelectorAll(\"a\");\n\n        for (const nav_item of nav_items) {\n            // Get the nav item's url and rebase it against the current url to\n            // make absolute or relative URLs FQDN URLs.\n            const nav_url = this.prepare_url(\n                new URL(nav_item.getAttribute(\"href\", \"\"), current_url)?.href\n            );\n\n            const wrapper = nav_item.closest(this.options[\"item-wrapper\"]);\n\n            if (nav_url === current_url_prepared) {\n                nav_item.classList.add(this.options[\"current-class\"]);\n                wrapper?.classList.add(this.options[\"current-class\"]);\n                this.mark_in_path(nav_item);\n            } else if (\n                // Compare the current navigation item url with a slash at the\n                // end - if it is \"inPath\" it must have a slash in it.\n                current_url_prepared.indexOf(`${nav_url}/`) === 0 &&\n                // Do not set inPath for the \"Home\" url, as this would always\n                // be in the path.\n                nav_url !== portal_url\n            ) {\n                nav_item.classList.add(this.options[\"in-path-class\"]);\n                wrapper?.classList.add(this.options[\"in-path-class\"]);\n            } else {\n                // Not even in path.\n                continue;\n            }\n        }\n    }\n\n    /**\n     * Clear all navigation items from the inPath and current classes\n     */\n    clear_items() {\n        const items = this.el.querySelectorAll(\n            `.${this.options[\"in-path-class\"]}, .${this.options[\"current-class\"]}`\n        );\n        for (const item of items) {\n            item.classList.remove(this.options[\"in-path-class\"]);\n            item.classList.remove(this.options[\"current-class\"]);\n        }\n    }\n\n    /**\n     * Prepare a URL for comparison.\n     * Plone-specific \"/view\" and \"@@\" will be removed as well as a trailing slash.\n     *\n     * @param {String} url - The url to prepare.\n     *\n     * @returns {String} - The prepared url.\n     */\n    prepare_url(url) {\n        return url?.replace(\"/view\", \"\").replaceAll(\"@@\", \"\").replace(/\\/$/, \"\");\n    }\n\n    /**\n     * Get the URL of the current page.\n     * If a ``canonical`` meta tag is found, return this.\n     * Otherwise return the window.location URL.\n     * Already prepare the URL for comparison.\n     *\n     * @returns {String} - The current URL.\n     */\n    base_url() {\n        return this.prepare_url(\n            document.querySelector('head link[rel=\"canonical\"]')?.href ||\n                window.location.href\n        );\n    }\n}\n\nregistry.register(Pattern);\nexport default Pattern;\nexport { Pattern };\n","// Patterns notification - Display (self-healing) notifications.\nimport $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport inject from \"../inject/inject\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\n// Initialize close-panel functionality.\nimport \"../close-panel/close-panel\";\n\nconst log = logging.getLogger(\"notification\");\n//log.setLevel(logging.Level.DEBUG);\n\nexport const parser = new Parser(\"notification\");\nparser.addArgument(\"type\", \"static\", [\"static\", \"banner\"]);\nparser.addArgument(\"healing\", \"5s\");\nparser.addArgument(\"controls\", \"icons\", [\"icons\", \"buttons\", \"none\"]);\nparser.addArgument(\"class\");\nparser.addArgument(\"close-text\", \"Close\");\n\nexport default Base.extend({\n    name: \"notification\",\n    trigger: \".pat-notification\",\n    count: 0,\n\n    init($el, opts) {\n        if (this.el.matches(\"a, form\")) {\n            this._init_inject($el, opts);\n        } else {\n            this._init_notification($el, opts);\n        }\n    },\n\n    _init_notification($el, opts) {\n        this.count++;\n\n        const el = $el[0];\n        const options = parser.parse($el, opts);\n        const closetext = options.closeText;\n\n        const wrapper = document.createElement(\"div\");\n        wrapper.setAttribute(\"id\", `pat-notification-${this.count}`);\n        wrapper.setAttribute(\"class\", \"pat-notification-panel\");\n        dom.wrap(el, wrapper);\n\n        events.add_event_listener(\n            wrapper,\n            \"mouseenter\",\n            \"notification__mouseenter\",\n            this.onMouseEnter.bind(this)\n        );\n        events.add_event_listener(\n            wrapper,\n            \"mouseleave\",\n            \"notification__mouseleave\",\n            this.onMouseLeave.bind(this)\n        );\n\n        if (options[\"class\"]) {\n            wrapper.classList.add(options[\"class\"]);\n        }\n\n        if (!Array.isArray(options.controls)) {\n            options.controls = [options.controls];\n        }\n\n        // add close icon if requested\n        if (options.controls.indexOf(\"icons\") >= 0) {\n            wrapper.append(\n                dom.create_from_string(\n                    `<button type=\"button\" class=\"close-panel\">${closetext}</button>`\n                )\n            );\n        }\n\n        // add close button if requested\n        if (options.controls.indexOf(\"buttons\") >= 0) {\n            wrapper.append(\n                dom.create_from_string(\n                    `<div class=\"button-bar\">\n                    <button type=\"button\" class=\"close-panel\">${closetext}</button>\n                </div>`\n                )\n            );\n        }\n\n        if (wrapper.querySelector(\".close-panel\")) {\n            events.add_event_listener(\n                wrapper,\n                \"close-panel\",\n                \"pat-notification--close-panel\",\n                this.onClick.bind(this)\n            );\n            registry.scan(wrapper, [\"close-panel\"]);\n        } else {\n            events.add_event_listener(\n                wrapper,\n                \"click\",\n                \"notification__click\",\n                this.onClick.bind(this)\n            );\n        }\n\n        if (options.type === \"banner\") {\n            let container = document.querySelector(\"#pat-notification-banners\");\n            if (!container) {\n                container = document.createElement(\"div\");\n                container.setAttribute(\"id\", \"pat-notification-banners\");\n                container.setAttribute(\"class\", \"pat-notification-container\");\n                document.body.append(container);\n            }\n            container.append(wrapper);\n        }\n\n        let healing = options.healing;\n        if (healing !== \"persistent\") {\n            healing = utils.parseTime(healing);\n        }\n\n        log.debug(`Healing value is: ${healing}`);\n        dom.set_data(wrapper, \"healing\", healing);\n\n        $el.animate({ opacity: 1 }, \"fast\", () => {\n            this.init_remove_timer(wrapper);\n        });\n    },\n\n    _init_inject($el) {\n        $el[0].addEventListener(\"pat-inject-success\", (e) => {\n            const $trigger = $(e.target);\n            const cfg = parser.parse($trigger, { type: \"banner\" });\n\n            const $temp = $(\"#pat-notification-temp\")\n                .contents()\n                .wrapAll(\"<div/>\")\n                .parent()\n                .addClass(\"pat-notification\");\n\n            if ($trigger.is(\"a\")) {\n                $trigger.after($temp);\n            } else {\n                $temp.prependTo($trigger);\n            }\n            this._init_notification($temp, cfg);\n\n            // XXX: Do this later as inject tries to access its target afterwards.\n            // This should be fixed in injection.\n            setTimeout(() => {\n                $(\"#pat-notification-temp\").remove();\n            }, 0);\n        });\n        inject.init($el, {\n            target: \"#pat-notification-temp\",\n        });\n    },\n\n    init_remove_timer(panel) {\n        const healing = dom.get_data(panel, \"healing\");\n        if (healing !== \"persistent\") {\n            clearTimeout(dom.get_data(panel, \"timer\"));\n            dom.set_data(\n                panel,\n                \"timer\",\n                setTimeout(() => {\n                    log.debug(\"Timeout reached.\");\n                    this.remove(panel);\n                }, healing)\n            );\n        }\n    },\n\n    onMouseEnter(e) {\n        dom.set_data(e.target, \"persistent\", true);\n    },\n\n    onMouseLeave(e) {\n        const panel = e.target;\n        dom.set_data(panel, \"persistent\", false);\n        this.init_remove_timer(panel);\n    },\n\n    onClick(e) {\n        const panel = e.target.closest(\".pat-notification-panel\");\n        dom.set_data(panel, \"persistent\", false);\n        this.remove(panel);\n    },\n\n    remove(panel) {\n        if (\n            dom.get_data(panel, \"persistent\") === true ||\n            dom.get_data(panel, \"removing\") === true\n        ) {\n            return;\n        }\n        const $panel = $(panel);\n\n        dom.set_data(panel, \"removing\", true);\n\n        $panel.stop(true).animate(\n            { opacity: 0 },\n            {\n                step() {\n                    if (dom.get_data(panel, \"persistent\") === true) {\n                        // remove the timer and show notification\n                        clearTimeout(dom.get_data(panel, \"timer\"));\n                        $panel.stop(true).animate({ opacity: 1 });\n                        dom.set_data(panel, \"removing\", false);\n                        return false;\n                    }\n                },\n\n                complete() {\n                    $panel.off(\".pat-notification\");\n                    $panel.slideUp(\"slow\", () => {\n                        $panel.remove();\n                    });\n                },\n            }\n        );\n    },\n});\n","import Base from \"../../core/base\";\nimport events from \"../../core/events\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nconst logger = logging.getLogger(\"push\");\n\nexport const parser = new Parser(\"push\");\nparser.addArgument(\"url\", null);\nparser.addArgument(\"push-id\", null);\nparser.addArgument(\"mode\", \"replace\", [\"replace\", \"append\", \"desktop-notification\"]);\n\nconst rfp_key = \"pat-push__desktop-notification__request_for_permission\";\n\nexport default Base.extend({\n    name: \"push\",\n    trigger: \".pat-push\",\n\n    init() {\n        this.options = parser.parse(this.el, this.options);\n\n        if (\n            this.options.mode === \"desktop-notification\" &&\n            !(Notification.permission in [\"denied\", \"granted\"])\n        ) {\n            // Try to get a notification permission on any click.\n            events.add_event_listener(\n                document,\n                \"click\",\n                rfp_key,\n                this.desktop_notification__request_permission.bind(this)\n            );\n        }\n\n        document.body.addEventListener(\"push\", (e) => {\n            logger.debug(\"received push marker\");\n            const data = e?.detail?.body;\n            if (data === this.options.pushId) {\n                if (this.options.mode === \"desktop-notification\") {\n                    this.desktop_notification();\n                } else if (this.el.tagName === \"FORM\") {\n                    this.el.dispatchEvent(events.submit_event());\n                } else {\n                    this.perform_inject();\n                }\n            }\n        });\n    },\n\n    async perform_inject() {\n        let data = null;\n\n        try {\n            const response = await fetch(this.options.url);\n            data = await response.text();\n        } catch {\n            logger.error(\n                `Could not fetch from ${this.options.url} on push-id ${this.options.pushId}.`\n            );\n        }\n\n        if (data === null) {\n            return;\n        }\n\n        if (this.options.mode === \"append\") {\n            this.el.insertAdjacentHTML(\"beforeend\", data);\n        } else {\n            this.el.innerHTML = data;\n        }\n        registry.scan(this.el);\n    },\n\n    async desktop_notification__request_permission() {\n        // Wait a bit to make the dialog more prominent...\n        await utils.timeout(1000);\n\n        // Notifications need to be granted.\n        // Note: Current browsers don't allow an automatic request for\n        //       permission but need an interaction to allow it.\n        //       The following code won't work out of the box in such cases.\n        if (!(Notification.permission in [\"denied\", \"granted\"])) {\n            Notification.requestPermission((permission) => {\n                // Unregister the event handler, which should only be necessary once.\n                events.remove_event_listener(document, rfp_key);\n\n                // Whatever the user answers, we make sure Chrome stores the information\n                if (!(\"permission\" in Notification)) {\n                    Notification.permission = permission;\n                }\n            });\n        }\n    },\n\n    async desktop_notification() {\n        // Let's check if the browser supports notifications\n        if (!(\"Notification\" in window)) {\n            logger.error(\"This browser does not support notifications.\");\n            return;\n        }\n\n        // Let's check if the user is okay to get some notification\n        if (Notification.permission !== \"granted\") {\n            return;\n        }\n\n        let data = [];\n        try {\n            const response = await fetch(this.options.url);\n            data = await response.json();\n        } catch {\n            logger.error(\n                `Could not fetch from ${this.options.url} on push-id ${this.options.pushId}.`\n            );\n        }\n\n        if (!data?.length) {\n            return;\n        }\n\n        for (const message of data) {\n            const notification = new Notification(message.title, message);\n            if (message.data?.url) {\n                // If ``message.data`` contains an URL, open it.\n                // If not, the browser will simply get the focus when\n                // clicking on the desktop notification.\n                notification.addEventListener(\"click\", () => {\n                    window.open(message.data.url, \"_self\");\n\n                    // Opening a URL in a new tab from JavaScript is\n                    // equivalent to opening a popup window which is\n                    // blocked by default.\n                    // Therefore, we open the URL in the same tab and\n                    // rely on other mechanisms that the user's work\n                    // isn't lost (auto-save, form unload protection.)\n\n                    // Don't focus the originating tab.\n                    //e.preventDefault();\n                    // Open in new window.\n                    //const new_window = window.open(message.data.url, \"_blank\");\n                    //try {\n                    //    new_window.focus();\n                    //} catch (e) {\n                    //    // Opening of new window (aka \"popup\") might\n                    //    // have been blocked.\n                    //    window.focus();\n                    //}\n                });\n            }\n        }\n    },\n});\n","import Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\n\nexport const parser = new Parser(\"scroll-box\");\nparser.addArgument(\"timeout-stop\", 600); // Timeout to detect when stopping scrolling.\n\nexport default Base.extend({\n    name: \"scroll-box\",\n    trigger: \".pat-scroll-box\",\n\n    scroll_listener: null,\n    last_known_scroll_position: 0,\n    timeout_id__scroll_stop: null,\n\n    init() {\n        const el = this.el;\n        this.options = parser.parse(el);\n        this.scroll_listener = el === document.body ? window : el;\n\n        // If scolling is not possible, exit.\n        if (\n            !this.scroll_listener === window &&\n            ([\"auto\", \"scroll\"].indexOf(getComputedStyle(el).overflow) === -1 ||\n                [\"auto\", \"scroll\"].indexOf(getComputedStyle(el).overflowY) === -1)\n        ) {\n            return;\n        }\n\n        let ticking = false;\n        events.add_event_listener(\n            this.scroll_listener,\n            \"scroll\",\n            \"pat-scroll-box--scroll_listener\",\n            () => {\n                if (!ticking) {\n                    window.requestAnimationFrame(() => {\n                        this.set_scroll_classes();\n\n                        // Detect case when user stops scrolling.\n                        window.clearTimeout(this.timeout_id__scroll_stop);\n                        this.timeout_id__scroll_stop = window.setTimeout(() => {\n                            // When user stopped scrolling, set/clear scroll classes.\n                            this.clear_scrolling_classes();\n                        }, this.options.timeoutStop);\n\n                        ticking = false;\n                    });\n                    ticking = true;\n                }\n            }\n        );\n\n        // Set initial state\n        this.set_scroll_classes();\n    },\n\n    set_scroll_classes() {\n        const scroll_pos = dom.get_scroll_y(this.scroll_listener);\n        const offset =\n            this.scroll_listener === window ? window.innerHeight : this.el.clientHeight;\n\n        const to_add = [];\n\n        if (scroll_pos < this.last_known_scroll_position) {\n            to_add.push(\"scroll-up\");\n            to_add.push(\"scrolling-up\");\n        } else if (this.last_known_scroll_position < scroll_pos) {\n            to_add.push(\"scroll-down\");\n            to_add.push(\"scrolling-down\");\n        }\n\n        if (scroll_pos <= 0) {\n            to_add.push(\"scroll-position-top\");\n        } else if (offset + scroll_pos >= this.el.scrollHeight) {\n            to_add.push(\"scroll-position-bottom\");\n        }\n\n        // Keep DOM manipulation calls together to let the browser optimize reflow/repaint.\n        // See: https://areknawo.com/dom-performance-case-study/\n\n        this.el.classList.remove(\n            \"scroll-up\",\n            \"scroll-down\",\n            \"scrolling-up\",\n            \"scrolling-down\",\n            \"scroll-position-top\",\n            \"scroll-position-bottom\"\n        );\n        this.el.classList.add(...to_add);\n\n        this.last_known_scroll_position = scroll_pos;\n    },\n\n    clear_scrolling_classes() {\n        // Remove ``scrolling-up`` and ``scrolling-down``\n        // but keep ``scroll-up`` and ``scroll-down``.\n        this.el.classList.remove(\"scrolling-up\", \"scrolling-down\");\n    },\n});\n","/* Patterns selectbox - Expose select option for (un)checking. */\nimport $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport dom from \"../../core/dom\";\n\nconst KEY_RESET = \"__patternslib__pat_selectbox__reset\";\n\nexport default Base.extend({\n    name: \"selectbox\",\n    trigger: \".pat-select\",\n    all_selects: [],\n\n    init() {\n        const el = this.el;\n\n        if (el.form && !el[KEY_RESET]) {\n            $(el.form).on(\"reset.pat-selectbox\", () => this.form_reset());\n            el[KEY_RESET] = true;\n        }\n\n        this.all_selects = dom.querySelectorAllAndMe(el, \"select:not([multiple])\");\n        for (const sel of this.all_selects) {\n            // create parent span if not direct child of a label\n            if (!sel.parentNode.matches(\"label\")) {\n                dom.wrap(sel, document.createElement(\"span\"));\n            }\n            this.change_select(sel);\n            $(sel).on(\"change.pat-selectbox\", () => this.change_select(sel));\n        }\n    },\n\n    destroy($el) {\n        return $el.off(\".pat-selectbox\");\n    },\n\n    form_reset() {\n        // This event is triggered before the form is reset, and we need\n        // the post-reset state to update our pattern. Use a small delay\n        // to fix this.\n        setTimeout(() => {\n            for (const sel of this.all_selects) {\n                this.change_select(sel);\n            }\n        }, 50);\n    },\n\n    change_select(el) {\n        el.parentNode.setAttribute(\"data-option\", el.querySelector(\"option:checked\")?.text || ''); // prettier-ignore\n        el.parentNode.setAttribute(\"data-option-value\", el.value);\n    },\n});\n","/**\n * Patterns URL - URL parsing utilities\n *\n * Copyright 2013 Simplon B.V.\n */\n\nfunction UrlArgumentParser() {\n    this._cache = null;\n    if (window.addEventListener) window.addEventListener(\"popstate\", this._reset);\n}\n\nUrlArgumentParser.prototype = {\n    space_pattern: /\\+/g,\n    keyvalue_pattern: /^(.+?)(?:=(.*))/,\n\n    _reset: function UrlArgumentParser_reset() {\n        this._cache = null;\n    },\n\n    _decodeQS: function UrlArgumentParser_decodeQS(bit) {\n        return decodeURIComponent(bit.replace(this.space_pattern, \" \"));\n    },\n\n    _parse: function UrlArgumentParser_parse(qs) {\n        var query = /\\?(.+)/.exec(qs),\n            params = {};\n\n        if (query === null) return params;\n\n        var parameters = query[1].split(\"&\"),\n            i,\n            parts,\n            key,\n            value;\n\n        for (i = 0; i < parameters.length; i++) {\n            if ((parts = this.keyvalue_pattern.exec(parameters[i])) === null) {\n                key = this._decodeQS(parameters[i]);\n                value = null;\n            } else {\n                key = this._decodeQS(parts[1]);\n                value = this._decodeQS(parts[2]);\n            }\n\n            if (params[key] === undefined) params[key] = [];\n            params[key].push(value);\n        }\n\n        return params;\n    },\n\n    get: function UrlArgumentParser_get() {\n        if (this._cache === null) this._cache = this._parse(window.location.search);\n        return this._cache;\n    },\n};\n\nvar url_parser = new UrlArgumentParser();\n\nexport default {\n    UrlArgumentParser: UrlArgumentParser,\n    parameters: url_parser.get.bind(url_parser),\n};\n","/**\n * Patterns remove - send event when objects are removed from the DOM\n *\n * Copyright 2012 Simplon B.V. - Wichert Akkerman\n */\nimport $ from \"jquery\";\n\nvar real_cleanData = $.cleanData;\n\n$.cleanData = function remove_cleanData(elems) {\n    var i, el;\n    for (i = 0; (el = elems[i]) !== undefined; i++) $(el).triggerHandler(\"destroy\");\n    real_cleanData.call(this, arguments);\n};\n","/**\n * Patterns slides - Automatic and customised slideshows.\n *\n * Copyright 2013 Simplon B.V. - Wichert Akkerman\n */\nimport $ from \"jquery\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\nimport url from \"../../core/url\";\nimport \"../../core/remove\";\n\nvar slides = {\n    name: \"slides\",\n    trigger: \".pat-slides\",\n\n    setup: function () {\n        $(document).on(\"patterns-injected\", utils.debounce(slides._reset, 100));\n    },\n\n    async init($el) {\n        if (!this.el.querySelector(\".slide\")) {\n            // no slides, nothing to do.\n            return;\n        }\n        await import(\"slides/src/slides\"); // loads ``Presentation`` globally.\n\n        var parameters = url.parameters();\n        if (parameters.slides !== undefined) {\n            var requested_ids = slides._collapse_ids(parameters.slides);\n            if (requested_ids) slides._remove_slides($el, requested_ids);\n        }\n        $el.each(function () {\n            var presentation = new window.Presentation(this),\n                $container = $(this);\n            $container\n                .data(\"pat-slide\", presentation)\n                .on(\"SlideDisplay\", slides._onSlideDisplay)\n                .on(\"SlideHide\", slides._onSlideHide);\n        });\n        return slides._hook($el);\n    },\n\n    _onSlideDisplay: function (event) {\n        var slide = event.originalEvent.detail.slide.element,\n            $videos = $(\"video\", slide);\n\n        $videos.each(function () {\n            if (this.paused) {\n                this.currentTime = 0;\n                this.play();\n            }\n        });\n    },\n\n    _onSlideHide: function (event) {\n        var slide = event.originalEvent.detail.slide.element,\n            $videos = $(\"video\", slide);\n\n        $videos.each(function () {\n            if (!this.paused) this.pause();\n        });\n    },\n\n    _collapse_ids: function (params) {\n        var ids = [];\n        params.forEach(function (param) {\n            if (param)\n                ids = ids.concat(\n                    param.split(\",\").filter(function (id) {\n                        return !!id;\n                    })\n                );\n        });\n        return ids;\n    },\n\n    _remove_slides: function ($shows, ids) {\n        var has_bad_id = function (idx, el) {\n            return ids.indexOf(el.id) === -1;\n        };\n\n        for (var i = 0; i < $shows.length; i++) {\n            var $show = $shows.eq(i),\n                $bad_slides = $show.find(\".slide[id]\").filter(has_bad_id);\n            $bad_slides.remove();\n        }\n    },\n\n    _hook: function ($el) {\n        return $el\n            .off(\"destroy.pat-slide\")\n            .on(\"destroy.pat-slide\", utils.debounce(slides._reset, 100));\n    },\n\n    _reset: function () {\n        var $container = $(this).closest(\".pat-slides\"),\n            presentation = $container.data(\"pat-slide\");\n        if (presentation) presentation.scan();\n        slides._hook($(this.trigger));\n    },\n};\n\nslides.setup();\nregistry.register(slides);\nexport default slides;\n","import $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport Parser from \"../../core/parser\";\n\nexport const parser = new Parser(\"sortable\");\nparser.addArgument(\"selector\", \"li\");\nparser.addArgument(\"drag-class\", \"dragged\"); // Class to apply to item that is being dragged.\nparser.addArgument(\"drop\"); // Callback function for when item is dropped (null)\n\n// BBB for the mockup sortable pattern.\nparser.addAlias(\"dragClass\", \"drag-class\");\n\nexport default Base.extend({\n    name: \"sortable\",\n    trigger: \".pat-sortable\",\n\n    init: function () {\n        if (window.__patternslib_import_styles) {\n            import(\"./_sortable.scss\");\n        }\n        this.$form = this.$el.closest(\"form\");\n        this.options = parser.parse(this.$el, false);\n        this.recordPositions().initScrolling();\n        this.$el.on(\"pat-update\", this.onPatternUpdate.bind(this));\n        this.$el.on(\"patterns-injected\", this.recordPositions.bind(this));\n    },\n\n    onPatternUpdate: function (ev, data) {\n        /* Handler which gets called when pat-update is triggered within\n         * the .pat-sortable element.\n         */\n        if (data?.pattern !== \"clone\" || data?.action !== \"added\") {\n            // Nothing to do.\n            return;\n        }\n        this.recordPositions();\n    },\n\n    recordPositions: function () {\n        // use only direct descendants to support nested lists\n        this.$sortables = this.$el.children().filter(this.options.selector);\n        this.$sortables.each(function (idx) {\n            $(this).data(\"patterns.sortable\", { position: idx });\n            // Add `.sortable-item` class to each sortable.\n            this.classList.add(\"sortable-item\");\n        });\n        this.addHandles();\n        return this;\n    },\n\n    addHandles: function () {\n        for (const sortable of this.$sortables) {\n            const handles = dom.querySelectorAllAndMe(sortable, \".sortable-handle\");\n            if (handles.length === 0) {\n                // TODO: we should change to a <button>.\n                const handle = document.createElement(\"a\");\n                handle.textContent = \"⇕\";\n                handle.classList.add(\"sortable-handle\");\n                handle.setAttribute(\"draggable\", \"true\");\n                handle.setAttribute(\"href\", \"#\");\n                //handle.setAttribute(\"title\", \"Drag to reorder\"); // TODO: specify if that should be kept.\n                handle.setAttribute(\"aria-label\", \"Drag to reorder\");\n                sortable.appendChild(handle);\n                handles.push(handle);\n            }\n\n            for (const handle of handles) {\n                // TODO: remove when element is a button.\n                events.add_event_listener(\n                    handle,\n                    \"click\",\n                    \"pat-sortable--click\",\n                    (e) => {\n                        e.preventDefault();\n                    }\n                );\n                events.add_event_listener(\n                    handle,\n                    \"dragstart\",\n                    \"pat-sortable--dragstart\",\n                    this.onDragStart.bind(this)\n                );\n                events.add_event_listener(\n                    handle,\n                    \"dragend\",\n                    \"pat-sortable--dragend\",\n                    this.onDragEnd.bind(this)\n                );\n            }\n        }\n    },\n\n    initScrolling: function () {\n        // invisible scroll activation areas\n        var scrollup = $('<div id=\"pat-scroll-up\">&nbsp;</div>'),\n            scrolldn = $('<div id=\"pat-scroll-dn\">&nbsp;</div>'),\n            scroll = $().add(scrollup).add(scrolldn);\n        scrollup.css({ top: 0 });\n        scrolldn.css({ bottom: 0 });\n        scroll.css({\n            position: \"fixed\",\n            zIndex: 999999,\n            height: 32,\n            left: 0,\n            right: 0,\n        });\n        scroll.on(\"dragover\", function (ev) {\n            ev.preventDefault();\n            if ($(\"html,body\").is(\":animated\")) {\n                return;\n            }\n            var newpos =\n                $(window).scrollTop() +\n                ($(this).attr(\"id\") === \"pat-scroll-up\" ? -32 : 32);\n            $(\"html,body\").animate({ scrollTop: newpos }, 50, \"linear\");\n        });\n        return this;\n    },\n\n    onDragEnd: function (ev) {\n        const $dragged = $(ev.target.closest(this.options.selector));\n        $dragged.removeClass(this.options.dragClass);\n        this.$sortables.off(\".pat-sortable\");\n        this.$el.off(\".pat-sortable\");\n        $(\"#pat-scroll-up, #pat-scroll-dn\").detach();\n        var change = this.submitChangedAmount(\n            $(ev.target).closest(this.options.selector)\n        );\n        // Call the optionally passed-in callback function\n        if (this.options.drop) {\n            this.options.drop($dragged, change);\n        }\n        // Inform other patterns about sorting changes\n        $dragged.trigger(\"pat-update\", {\n            pattern: \"sortable\",\n            action: \"changed\",\n            dom: $dragged[0],\n        });\n    },\n\n    submitChangedAmount: function ($dragged) {\n        /* If we are in a form, then submit the form with the right amount\n         * that the sortable element was moved up or down.\n         */\n        var $amount_input = this.$form.find(\".sortable-amount\");\n        if ($amount_input.length === 0) {\n            return;\n        }\n        var old_position = $dragged.data(\"patterns.sortable\").position;\n        this.recordPositions();\n        var new_position = $dragged.data(\"patterns.sortable\").position;\n        var change = Math.abs(new_position - old_position);\n        var direction = (new_position > old_position && \"down\") || \"up\";\n        if (this.$form.length > 0) {\n            $amount_input.val(change);\n            if (direction == \"up\") {\n                $dragged.find(\".sortable-button-up\").click();\n            } else {\n                $dragged.find(\".sortable-button-down\").click();\n            }\n        }\n        return change;\n    },\n\n    onDragStart: function (ev) {\n        const $dragged = $(ev.target.closest(this.options.selector));\n        var that = this;\n        if (ev.dataTransfer) {\n            // Firefox seems to need this set to any value\n            ev.dataTransfer.setData(\"Text\", \"\");\n            ev.dataTransfer.effectAllowed = [\"move\"];\n            if (\"setDragImage\" in ev.dataTransfer) {\n                ev.dataTransfer.setDragImage($dragged[0], 0, 0);\n            }\n        }\n        $dragged.addClass(this.options.dragClass);\n\n        // Scroll the list if near the borders\n        this.$el.on(\n            \"dragover.pat-sortable\",\n            function (ev) {\n                ev.preventDefault();\n                if (this.$el.is(\":animated\")) return;\n\n                var pos = ev.originalEvent.clientY + $(\"body\").scrollTop();\n                if (pos - this.$el.safeOffset().top < 32)\n                    this.$el.animate(\n                        { scrollTop: this.$el.scrollTop() - 32 },\n                        50,\n                        \"linear\"\n                    );\n                else if (this.$el.safeOffset().top + this.$el.height() - pos < 32)\n                    this.$el.animate(\n                        { scrollTop: this.$el.scrollTop() + 32 },\n                        50,\n                        \"linear\"\n                    );\n            }.bind(this)\n        );\n\n        this.$sortables.on(\n            \"dragover.pat-sortable\",\n            function (ev) {\n                // list elements are only drop targets when one element of the\n                // list is being dragged. avoids dragging between lists.\n                var $dropTarget = $(ev.target).closest(that.options.selector),\n                    midlineY =\n                        $dropTarget.safeOffset().top -\n                        $(document).scrollTop() +\n                        $dropTarget.height() / 2;\n\n                if ($dropTarget.is($dragged)) {\n                    return;\n                }\n                $dropTarget.removeClass(\"drop-target-above drop-target-below\");\n                if (ev.originalEvent.clientY > midlineY)\n                    $dropTarget.addClass(\"drop-target-below\");\n                else $dropTarget.addClass(\"drop-target-above\");\n                ev.preventDefault();\n            }.bind(this)\n        );\n\n        this.$sortables.on(\n            \"dragleave.pat-sortable\",\n            function () {\n                this.$sortables.removeClass(\"drop-target-above drop-target-below\");\n            }.bind(this)\n        );\n\n        this.$sortables.on(\"drop.pat-sortable\", function (ev) {\n            var $dropTarget = $(ev.target).closest(that.options.selector);\n            if ($dropTarget.is($dragged)) {\n                return;\n            }\n            if ($dropTarget.hasClass(\"drop-target-below\")) {\n                $dropTarget.after($dragged);\n            } else {\n                $dropTarget.before($dragged);\n            }\n            $dropTarget.removeClass(\"drop-target-above drop-target-below\");\n            ev.preventDefault();\n        });\n    },\n});\n","import $ from \"jquery\";\nimport { BasePattern } from \"../../core/basepattern\";\nimport events from \"../../core/events\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"stacks\");\n\nexport const parser = new Parser(\"stacks\");\nparser.addArgument(\"selector\", \"> *[id]\");\nparser.addArgument(\"transition\", \"none\", [\"none\", \"css\", \"fade\", \"slide\"]);\nparser.addArgument(\"effect-duration\", \"fast\");\nparser.addArgument(\"effect-easing\", \"swing\");\n// pat-scroll support\nparser.addArgument(\"scroll-selector\");\nparser.addArgument(\"scroll-offset\", 0);\n\nconst debounce_scroll_timer = { timer: null };\n\nclass Pattern extends BasePattern {\n    static name = \"stacks\";\n    static trigger = \".pat-stacks\";\n    static parser = parser;\n    document = document;\n\n    async init() {\n        this.$el = $(this.el);\n\n        // pat-scroll support\n        if (this.options.scroll?.selector && this.options.scroll.selector !== \"none\") {\n            const Scroll = (await import(\"../scroll/scroll\")).default;\n            this.scroll = new Scroll(this.el, {\n                trigger: \"manual\",\n                selector: this.options.scroll.selector,\n                offset: this.options.scroll?.offset,\n            });\n            await events.await_pattern_init(this.scroll);\n\n            // scroll debouncer for later use.\n            this.debounce_scroll = utils.debounce(\n                this.scroll.scrollTo.bind(this.scroll),\n                10,\n                debounce_scroll_timer\n            );\n        }\n\n        this._setupStack();\n        $(this.document).on(\"click\", \"a\", this._onClick.bind(this));\n    }\n\n    destroy() {\n        $(this.document).off(\"click\", \"a\", this._onClick.bind(this));\n    }\n\n    _setupStack() {\n        let selected = this._currentFragment();\n        const $sheets = this.$el.find(this.options.selector);\n        this.$active = [];\n\n        if ($sheets.length < 2) {\n            log.warn(\"Stacks pattern: must have more than one sheet.\", this.$el[0]);\n            return;\n        }\n\n        if (selected) {\n            try {\n                this.$active = $sheets.filter(\"#\" + selected);\n            } catch {\n                selected = undefined;\n            }\n        }\n\n        if (!this.$active.length) {\n            this.$active = $sheets.first();\n            selected = this.$active[0].id;\n        }\n        const $invisible = $sheets.not(this.$active);\n        utils.hideOrShow(this.$active, true, { transition: \"none\" }, this.name);\n        utils.hideOrShow($invisible, false, { transition: \"none\" }, this.name);\n        this._updateAnchors(selected);\n    }\n\n    _base_URL() {\n        return this.document.URL.split(\"#\")[0];\n    }\n\n    _currentFragment() {\n        const parts = this.document.URL.split(\"#\");\n        if (parts.length === 1) {\n            return null;\n        }\n        return parts[parts.length - 1];\n    }\n\n    _onClick(e) {\n        const base_url = this._base_URL();\n        const href_parts = e.currentTarget.href.split(\"#\");\n        // Check if this is an in-document link and has a fragment\n        if (base_url !== href_parts[0] || !href_parts[1]) {\n            return;\n        }\n        if (!this.$el.has(`#${href_parts[1]}`).length) {\n            return;\n        }\n        e.preventDefault();\n        this._updateAnchors(href_parts[1]);\n        this._switch(href_parts[1]);\n\n        this.debounce_scroll?.(); // debounce scroll, if available.\n\n        // Notify other patterns\n        $(e.target).trigger(\"pat-update\", {\n            pattern: \"stacks\",\n            action: \"attribute-changed\",\n            dom: this.$active[0],\n            originalEvent: e,\n        });\n    }\n\n    _updateAnchors(selected) {\n        const $sheets = this.$el.find(this.options.selector);\n        const base_url = this._base_URL();\n        for (const sheet of $sheets) {\n            // This may appear odd, but: when querying a browser uses the\n            // original href of an anchor as it appeared in the document\n            // source, but when you access the href property you always get\n            // the fully qualified version.\n            const $anchors = $(\n                `a[href=\"${base_url}#${sheet.id}\"], a[href=\"#${sheet.id}\"]`\n            );\n            if (sheet.id === selected) {\n                $anchors.addClass(\"current\");\n            } else {\n                $anchors.removeClass(\"current\");\n            }\n        }\n    }\n\n    _switch(sheet_id) {\n        this.$active = this.$el.find(\"#\" + sheet_id);\n        if (!this.$active.length || this.$active.hasClass(\"visible\")) {\n            return;\n        }\n        const $invisible = this.$el.find(this.options.selector).not(this.$active);\n        utils.hideOrShow($invisible, false, this.options, this.name);\n        utils.hideOrShow(this.$active, true, this.options, this.name);\n    }\n}\n\nregistry.register(Pattern);\n\nexport default Pattern;\nexport { Pattern };\n","/**\n * Patterns subform - scoped submission of form content\n *\n * Copyright 2013 Marko Durkovic\n */\nimport $ from \"jquery\";\nimport ajax from \"../ajax/ajax\";\nimport Base from \"../../core/base\";\nimport events from \"../../core/events\";\nimport inject from \"../inject/inject\";\nimport logging from \"../../core/logging\";\n\nconst log = logging.getLogger(\"subform\");\n\nexport default Base.extend({\n    name: \"subform\",\n    trigger: \".pat-subform\",\n\n    init($el) {\n        events.add_event_listener(\n            $el[0],\n            \"submit\",\n            \"pat-subform--submit\",\n            this.submit.bind(this)\n        );\n        $el.find(\"input\").on(\"keyup keypress keydown\", this.keyboard_handler.bind(this));\n        $el.find(\"button[type=submit]\").on(\"click\", this.submitClicked.bind(this));\n    },\n\n    destroy($el) {\n        events.remove_event_listener($el[0], \"pat-subform--submit\");\n    },\n\n    scopedSubmit($el) {\n        const $form = $el.parents(\"form\");\n        const $exclude = $form.find(\":input\").filter(function () {\n            return !$(this).is($el.find(\"*\"));\n        });\n        // make other controls \"unsuccessful\"\n        log.debug(\"Hiding unwanted elements from submission.\");\n        const names = $exclude.map(function () {\n            const name = $(this).attr(\"name\");\n            return name ? name : 0;\n        });\n        $exclude.each(function () {\n            $(this).attr(\"name\", \"\");\n        });\n        if ($el.is(\".pat-inject\") || $el.is(\".pat-modal\")) {\n            inject.submitSubform($el);\n        } else {\n            // use the native handler, since there could be event handlers\n            // redirecting to inject/ajax.\n            $form[0].submit();\n        }\n        // reenable everything\n        log.debug(\"Restoring previous state.\");\n        $exclude.each(function (i) {\n            if (names[i]) {\n                $(this).attr(\"name\", names[i]);\n            }\n        });\n    },\n\n    submit(ev) {\n        ev.stopPropagation();\n        const $this = $(ev.target);\n        const $button = $this.find(\"button[type=submit][formaction]\").first();\n        if ($button.length) {\n            $button.trigger(\"click\");\n        } else {\n            this.scopedSubmit($this);\n        }\n    },\n\n    keyboard_handler(ev) {\n        // If the user presses the enter key and\n        // we have an autosubmit form trigger the subform submission\n        if (ev.keyCode != 13) {\n            return;\n        }\n        const $subform = $(ev.target).parents(\".pat-subform\");\n        if (!$subform.is(\".pat-autosubmit\")) {\n            return;\n        }\n        $subform[0].dispatchEvent(events.submit_event());\n    },\n\n    submitClicked(ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        ajax.onClickSubmit(ev); // make sure the submitting button is sent with the form\n\n        const $button = $(ev.target);\n        const $sub = $button.parents(\".pat-subform\").first();\n        const formaction = $button.attr(\"formaction\");\n\n        if (formaction) {\n            // override the default action and restore afterwards\n            if ($sub.is(\".pat-inject\")) {\n                const previousValue = $sub.data(\"pat-inject\");\n                $sub.data(\"pat-inject\", inject.extractConfig($sub, { url: formaction }));\n                this.scopedSubmit($sub);\n                $sub.data(\"pat-inject\", previousValue);\n            } else if ($sub.is(\".pat-modal\")) {\n                $sub.data(\"pat-inject\", [\n                    $.extend($sub.data(\"pat-inject\")[0], {\n                        url: formaction,\n                    }),\n                ]);\n                this.scopedSubmit($sub);\n            } else {\n                $sub.parents(\"form\").attr(\"action\", formaction);\n                this.scopedSubmit($sub);\n            }\n        } else {\n            this.scopedSubmit($sub);\n        }\n    },\n});\n","// Patterns switch - toggle classes on click\nimport $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport events from \"../../core/events\";\nimport logging from \"../../core/logging\";\nimport store from \"../../core/store\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"pat.switch\");\n\nexport const parser = new Parser(\"switch\");\nparser.addArgument(\"selector\");\nparser.addArgument(\"remove\");\nparser.addArgument(\"add\");\nparser.addArgument(\"store\", \"none\", [\"none\", \"session\", \"local\"]);\n\nexport default Base.extend({\n    name: \"switch\",\n    trigger: \".pat-switch\",\n\n    init() {\n        this.options = this._validateOptions(parser.parse(this.el, this.options, true));\n\n        events.add_event_listener(this.el, \"click\", \"pat-switch--on-click\", (e) => {\n            // TODO: e.target.tagName\n            if (e.tagName === \"A\") {\n                e.preventDefault();\n            }\n            this._go();\n        });\n\n        for (const option of this.options) {\n            if (option.store !== \"none\") {\n                option._storage = (\n                    option.store === \"local\" ? store.local : store.session\n                )(\"switch\");\n                const state = option._storage.get(option.selector);\n                if (state && state.remove === option.remove && state.add === option.add)\n                    this._update(option.selector, state.remove, state.add);\n            }\n        }\n    },\n\n    destroy() {\n        events.remove_event_listener(this.el, \"pat-switch--on-click\");\n    },\n\n    execute() {\n        // jQuery API to toggle a switch\n        this._go();\n    },\n\n    _go() {\n        for (const option of this.options) {\n            this._update(option.selector, option.remove, option.add);\n            if (option._storage)\n                option._storage.set(option.selector, {\n                    remove: option.remove,\n                    add: option.add,\n                });\n        }\n        $(this.el).trigger(\"resize\"); // See: https://github.com/Patternslib/Patterns/pull/539\n    },\n\n    _validateOptions: function (options) {\n        var correct = [];\n\n        let logged_error = false;\n        for (var i = 0; i < options.length; i++) {\n            var option = options[i];\n            if (option.selector && (option.remove || option.add)) {\n                correct.push(option);\n            } else {\n                log.error(\n                    \"Switch pattern requires selector and one of add or remove.\",\n                    this.el\n                );\n                logged_error = true;\n            }\n        }\n\n        if (!correct.length && !logged_error) {\n            log.error(\"Switch without options cannot be initialized.\", this.el);\n        }\n\n        return correct;\n    },\n\n    _update: function (selector, remove, add) {\n        const targets = document.querySelectorAll(selector);\n        for (const target of targets) {\n            if (remove) {\n                utils.removeWildcardClass(target, remove);\n            }\n\n            if (add) {\n                target.classList.add(add);\n            }\n\n            $(target).trigger(\"pat-update\", {\n                pattern: \"switch\",\n                action: \"attribute-changed\",\n                dom: target,\n            });\n        }\n    },\n});\n","import { BasePattern } from \"../../core/basepattern\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nexport const parser = new Parser(\"syntax-highlight\");\nparser.addArgument(\"language\", \"html\");\nparser.addArgument(\"theme\", \"dark\", [\"dark\", \"light\"]);\nparser.addArgument(\"features\", null, [\"line-highlight\", \"line-numbers\"], true);\n\nclass Pattern extends BasePattern {\n    static name = \"syntax-highlight\";\n    static trigger = \".pat-syntax-highlight\";\n    static parser = parser;\n\n    async init() {\n        let _el = this.el;\n        const code_el = [...this.el.children].filter((it) => it.tagName === \"CODE\")?.[0];\n        if (code_el) {\n            _el = code_el;\n        }\n\n        let theme;\n        if (\n            this.options.theme === \"light\" ||\n            _el.classList.contains(\"light-bg\") ||\n            this.el.classList.contains(\"light-bg\")\n        ) {\n            theme = \"stackoverflow-light\";\n        } else if (this.options.theme === \"dark\") {\n            theme = \"stackoverflow-dark\";\n        } else {\n            theme = this.options.theme;\n        }\n\n        import(`highlight.js/styles/${theme}.css`);\n        const hljs = (await import(\"highlight.js/lib/core\")).default;\n\n        // Get the language\n        let language = [..._el.classList, ...this.el.classList]\n            .filter((it) => {\n                return it.startsWith(\"language-\") || it.startsWith(\"lang-\");\n            })?.[0]\n            ?.replace(\"language-\", \"\")\n            ?.replace(\"lang-\", \"\");\n        // CSS class language always win.\n        language = language || this.options.language || \"html\";\n        // Set the language on the code element (ignored if already set)\n        this.el.classList.add(`language-${language}`);\n        _el.classList.add(`language-${language}`);\n        _el.classList.add(\"hljs\");\n\n        let high;\n        const value = utils.unescape_html(_el.innerHTML).trim();\n        if (language) {\n            try {\n                // language to import path mapping\n                const import_path_mapping = {\n                    atom: \"xml\",\n                    html: \"xml\",\n                    plist: \"xml\",\n                    rss: \"xml\",\n                    svg: \"xml\",\n                    wsf: \"xml\",\n                    xhtml: \"xml\",\n                    xjb: \"xml\",\n                    xsd: \"xml\",\n                    xsl: \"xml\",\n                };\n                const lang_file = import_path_mapping[language] || language;\n                const hljs_language = (\n                    await import(`highlight.js/lib/languages/${lang_file}`)\n                ).default;\n                hljs.registerLanguage(language, hljs_language);\n                high = hljs.highlight(value, { language: language }).value;\n            } catch {\n                high = hljs.highlightAuto(value).value;\n            }\n        } else {\n            high = hljs.highlightAuto(value).value;\n        }\n        _el.innerHTML = high;\n    }\n}\n\nregistry.register(Pattern);\nexport default Pattern;\nexport { Pattern };\n","import $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport logging from \"../../core/logging\";\nimport utils from \"../../core/utils\";\nimport dom from \"../../core/dom\";\n\nconst logger = logging.getLogger(\"tabs\");\nexport const DEBOUNCE_TIMEOUT = 10;\n\n//logger.setLevel(logging.Level.DEBUG);\n\nexport default Base.extend({\n    name: \"tabs\",\n    trigger: \".pat-tabs\",\n    jquery_plugin: true,\n    allowed_update_patterns: [\n        \"stacks\",\n        \"switch\",\n        \"auto-scale\",\n        \"grid\",\n        \"equaliser\",\n        \"masonry\",\n        \"zoom\",\n    ],\n\n    init() {\n        // debounce_resize to cancel previous runs of adjust_tabs\n        const debounced_resize = utils.debounce(\n            this.adjust_tabs.bind(this),\n            DEBOUNCE_TIMEOUT\n        );\n\n        // ResizeObserver allows for calling the adjust_tabs method after an\n        // animation is done, e.g. a menu is slided in. At the end of the\n        // animation the calculation is done with the final layout.\n        let previous_parent_width = utils.get_bounds(this.el.parentElement).width;\n        this.resize_observer = new ResizeObserver((entry) => {\n            const width = parseInt(entry[0].contentRect.width, 10);\n            // Only run the resize callback for changes in width.\n            // Apply a threshold of 3 pixels to compensate for rounding errors\n            // and not run this adjust_tabs for very small layout changes.\n            if (Math.abs(width - previous_parent_width) > 3) {\n                logger.debug(\"Entering resize observer\");\n                previous_parent_width = width;\n                debounced_resize();\n            }\n        });\n        this.resize_observer.observe(this.el.parentElement); // observe on size changes of parent.\n\n        // Also listen for ``pat-update`` event for cases where no resize but\n        // an immediate display of the element is done.\n        $(\"body\").on(\"pat-update\", (e, data) => {\n            if (this.allowed_update_patterns.includes(data?.pattern)) {\n                logger.debug(\"pat-update received.\");\n                debounced_resize();\n            }\n        });\n\n        debounced_resize();\n    },\n\n    async adjust_tabs() {\n        logger.debug(\"Entering adjust_tabs\");\n        logger.debug(\"Element:\");\n        logger.debug(this.el);\n\n        this.el.classList.remove(\"tabs-ready\");\n        this.el.classList.remove(\"tabs-wrapped\");\n        this._flatten_tabs();\n        this.dimensions = this._get_dimensions();\n        await this._adjust_tabs();\n        this.el.classList.add(\"tabs-ready\");\n    },\n\n    _flatten_tabs() {\n        // Remove the extra-tabs structure and place all tabs directly under .pat-tabs\n        const extra_wrapper = this.el.querySelector(\".extra-tabs\");\n        if (extra_wrapper) {\n            this.el.append(...extra_wrapper.children);\n            extra_wrapper.remove();\n        }\n    },\n\n    _get_dimensions() {\n        const bounds = utils.get_bounds(this.el);\n        const x = bounds.x;\n        const width = bounds.width;\n        const border_left = dom.get_css_value(this.el, \"border-left\", true);\n        const padding_left = dom.get_css_value(this.el, \"padding-left\", true);\n        const border_right = dom.get_css_value(this.el, \"border-right\", true);\n        const padding_right = dom.get_css_value(this.el, \"padding-right\", true);\n        const max_width =\n            width - border_left - padding_left - padding_right - border_right;\n        const max_x = bounds.x + max_width + border_left + padding_left;\n\n        const dimensions = {\n            x: x,\n            max_x: max_x,\n            width: width,\n            max_width: max_width,\n            border_left: border_left,\n            border_right: border_right,\n            padding_left: padding_left,\n            padding_right: padding_right,\n        };\n\n        logger.debug(\"dimensions:\");\n        logger.debug(dimensions);\n\n        return dimensions;\n    },\n\n    async _adjust_tabs() {\n        logger.debug(\"Entering _adjust_tabs\");\n        const children = [...this.el.children].filter(\n            (it) =>\n                dom.is_visible(it) && dom.get_css_value(it, \"position\") !== \"absolute\"\n        ); // remove elements, which do not count against available width.\n\n        const children_no_extra = children.filter(\n            (it) => !it.classList.contains(\"extra-tabs\")\n        );\n\n        if (children_no_extra.length === 0) {\n            // nothing to do.\n            logger.debug(\"no children, exit _adjust_tabs.\");\n            return;\n        }\n\n        // Check if tabs fit into one line by checking their start position not\n        // exceeding the available inner width or if they are not broken to a\n        // new line.\n        // This also takes whitespace between elements into account.\n        let last_x;\n        let tabs_fit = true;\n        // iterate over all children excluding absolutely positioned or invisible elements.\n        for (const it of children) {\n            const bounds = utils.get_bounds(it);\n            const it_x = bounds.x;\n            const it_w = bounds.width + dom.get_css_value(this.el, \"margin-right\", true);\n\n            logger.debug(\"Item:\");\n            logger.debug(it);\n            logger.debug(`\n                item dimensions: x: ${it_x},\n                width: ${it_w},\n                max x: ${it_x + it_w},\n                last_x: ${last_x}\n            `);\n\n            if (\n                (last_x && last_x - 3 > it_x) ||\n                it_x + it_w - 3 > this.dimensions.max_x\n                // -3 pixel to compensate for rounding errors (x, width, margin-right).\n            ) {\n                // this tab exceeds initial available width or\n                // breaks into a new line when width\n                tabs_fit = false;\n                break;\n            }\n\n            // Next position-left must be greater than last position-left plus element width.\n            last_x = it_x + it_w;\n        }\n        if (tabs_fit) {\n            // allright, nothing to do\n            logger.debug(\"tabs fit, exit _adjust_tabs.\");\n            return;\n        }\n\n        logger.debug(\"Breaks into new line.\");\n\n        let extra_tabs = this.el.querySelector(\".extra-tabs\");\n        if (!extra_tabs) {\n            logger.debug(\"Creating .extra-tabs element.\");\n            extra_tabs = document.createElement(\"span\");\n            extra_tabs.classList.add(\"extra-tabs\");\n            this.el.classList.add(\"closed\");\n            this.el.classList.add(\"tabs-wrapped\");\n\n            extra_tabs.addEventListener(\"click\", () => {\n                // Toggle opened/closed class on extra-tabs\n                if (this.el.classList.contains(\"open\")) {\n                    this.el.classList.remove(\"open\");\n                    this.el.classList.add(\"closed\");\n                } else {\n                    this.el.classList.remove(\"closed\");\n                    this.el.classList.add(\"open\");\n                }\n            });\n\n            this.el.append(extra_tabs);\n            await utils.animation_frame(); // Wait for CSS to be applied.\n            this.dimensions = this._get_dimensions(); // Update dimensions after CSS was applied\n        }\n\n        logger.debug(\"Prepend last tab to .extra_tabs.\");\n        // ... but exclude `.extra-tabs` if it is part of children.\n        extra_tabs.prepend(children_no_extra.pop());\n\n        await utils.animation_frame();\n        await this._adjust_tabs();\n    },\n});\n","/**\n * Patterns toggle - toggle class on click\n *\n * Copyright 2012-2014 Simplon B.V. - Wichert Akkerman\n */\nimport $ from \"jquery\";\nimport Base from \"../../core/base\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport store from \"../../core/store\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"pat.toggle\");\n\nexport const parser = new Parser(\"toggle\");\nparser.addArgument(\"selector\");\nparser.addArgument(\"event\");\nparser.addArgument(\"attr\", \"class\");\nparser.addArgument(\"value\");\nparser.addArgument(\"store\", \"none\", [\"none\", \"session\", \"local\"]);\n\nparser.addAlias(\"attribute\", \"attr\");\n\nexport function ClassToggler(values) {\n    this.values = values.slice(0);\n    if (this.values.length > 1) this.values.push(values[0]);\n}\n\nClassToggler.prototype = {\n    toggle(el) {\n        const current = this.get(el);\n        const next = this.next(current);\n        this.set(el, next);\n        return next;\n    },\n\n    get(el) {\n        const classes = el.className.split(/\\s+/);\n        for (const value of this.values) {\n            if (classes.indexOf(value) !== -1) {\n                return value;\n            }\n        }\n        return null;\n    },\n\n    set(el, value) {\n        const values = this.values;\n        let classes = el.className.split(/\\s+/);\n        classes = classes.filter((it) => it && values.indexOf(it) === -1);\n        if (value) {\n            classes.push(value);\n        }\n        el.className = classes.join(\" \");\n        $(el).trigger(\"pat-update\", {\n            pattern: \"toggle\",\n            action: \"attribute-changed\",\n            dom: el,\n        });\n    },\n\n    next(current) {\n        if (this.values.length === 1) {\n            return current ? null : this.values[0];\n        }\n        for (let i = 0; i < this.values.length - 1; i++) {\n            if (this.values[i] === current) {\n                return this.values[i + 1];\n            }\n        }\n        return this.values[0];\n    },\n};\n\nexport function AttributeToggler(attribute) {\n    this.attribute = attribute;\n}\n\nAttributeToggler.prototype = new ClassToggler([]);\nAttributeToggler.prototype.get = function (el) {\n    return !!el[this.attribute];\n};\n\nAttributeToggler.prototype.set = function (el, value) {\n    if (value) el[this.attribute] = value;\n    else el.removeAttribute(this.attribute);\n};\n\nAttributeToggler.prototype.next = function (value) {\n    return !value;\n};\n\nexport default Base.extend({\n    name: \"toggle\",\n    trigger: \".pat-toggle\",\n\n    init() {\n        const options = this._validateOptions(parser.parse(this.$el, true));\n        this.options = options;\n\n        if (!options.length) {\n            return;\n        }\n\n        let event_name;\n        for (const option of options) {\n            if (option.value_storage) {\n                const victims = $(option.selector);\n                if (!victims.length) {\n                    continue;\n                }\n                const state = option.toggler.get(victims[0]);\n                const last_state = option.value_storage.get();\n                if (state !== last_state && last_state !== null) {\n                    for (const victim of victims) {\n                        option.toggler.set(victim, last_state);\n                    }\n                }\n            }\n            if (option.event) {\n                event_name = option.event;\n            } else {\n                event_name = \"click\";\n            }\n        }\n\n        // Clicking a label of a checkbox would submit two click events - once\n        // for the label, the other for the checkbox.\n        // Using debounce, we prevent double-toggle which would result in\n        // toggling having no effect.\n        this.click_debouncer = utils.debounce(() => {\n            this._onClick();\n        }, 1);\n\n        this.$el\n            .off(\".toggle\")\n            .on(`${event_name || \"click\"}.toggle`, () => this.click_debouncer())\n            .on(\"keypress.toggle\", this._onKeyPress.bind(this));\n    },\n\n    _makeToggler(option) {\n        if (option.attr === \"class\") {\n            let values = option.value.split(/\\s+/);\n            values = values.filter((v) => v.length);\n            return new ClassToggler(values);\n        } else {\n            return new AttributeToggler(option.attr);\n        }\n    },\n\n    _validateOptions(options) {\n        const correct = [];\n\n        if (!options.length) {\n            return correct;\n        }\n\n        for (const [idx, option] of options.entries()) {\n            if (!option.selector) {\n                log.error(\"Toggle pattern requires a selector.\");\n                continue;\n            }\n            if (option.attr !== \"class\" && option.value) {\n                log.warn(\"Values are not supported attributes other than class.\");\n                continue;\n            }\n            if (option.attr === \"class\" && !option.value) {\n                log.error(\"Toggle pattern needs values for class attributes.\");\n                continue;\n            }\n            if (idx && option.store !== \"none\") {\n                log.warn(\"store option can only be set on first argument\");\n                option.store = \"none\";\n            }\n            if (option.store !== \"none\") {\n                if (!this.el.id) {\n                    log.warn(\"state persistance requested, but element has no id\");\n                    option.store = \"none\";\n                } else if (!store.supported) {\n                    log.warn(\n                        \"state persistance requested, but browser does not support webstorage\"\n                    );\n                    option.store = \"none\";\n                } else {\n                    const storage = (\n                        option.store === \"local\" ? store.local : store.session\n                    )(this.name);\n                    option.value_storage = new store.ValueStorage(\n                        storage,\n                        `${this.el.id}-${idx}`\n                    );\n                }\n            }\n            option.toggler = this._makeToggler(option);\n            correct.push(option);\n        }\n        return correct;\n    },\n\n    _onClick() {\n        for (const option of this.options) {\n            const targets = $(option.selector);\n            if (!targets.length) {\n                continue;\n            }\n            const toggler = option.toggler;\n            const next_state = toggler.toggle(targets[0]);\n            for (const target of targets) {\n                toggler.set(target, next_state);\n            }\n            if (option.value_storage) {\n                option.value_storage.set(next_state);\n            }\n        }\n    },\n\n    _onKeyPress(event) {\n        const keycode = event.keyCode ? event.keyCode : event.which;\n        if (keycode === \"13\") {\n            this.$el.trigger(\"click\");\n        }\n    },\n});\n","// Patterns validate - Form vlidation\nimport \"../../core/polyfills\"; // SubmitEvent.submitter for Safari < 15.4 and jsDOM\nimport $ from \"jquery\";\nimport { BasePattern } from \"../../core/basepattern\";\nimport Parser from \"../../core/parser\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport logging from \"../../core/logging\";\nimport utils from \"../../core/utils\";\nimport registry from \"../../core/registry\";\n\nconst logger = logging.getLogger(\"pat-validation\");\n//logger.setLevel(logging.Level.DEBUG);\n\nexport const parser = new Parser(\"validation\");\nparser.addArgument(\"disable-selector\", \"[type=submit], button:not([type=button])\"); // Elements which must be disabled if there are errors\nparser.addArgument(\"message-date\", \"\"); // \"This value must be a valid date\");\nparser.addArgument(\"message-datetime\", \"\"); // \"This value must be a valid date and time\");\nparser.addArgument(\"message-email\", \"\"); // \"This value must be a valid email address\");\nparser.addArgument(\"message-max\", \"\"); // \"This value must be less than or equal to %{count}\");\nparser.addArgument(\"message-min\", \"\"); // \"This value must be greater than or equal to %{count}\"); // prettier-ignore\nparser.addArgument(\"message-number\", \"\"); // \"This value must be a number\");\nparser.addArgument(\"message-required\", \"\"); // \"This field is required\");\nparser.addArgument(\"message-equality\", \"is not equal to %{attribute}.\");\nparser.addArgument(\"not-after\", null);\nparser.addArgument(\"not-before\", null);\nparser.addArgument(\"equality\", null);\nparser.addArgument(\"delay\", 100); // Delay before validation is done to avoid validating while typing.\n\n// BBB\n// TODO: deprecated. Will be removed with next major version.\nparser.addAlias(\"message-integer\", \"message-number\");\nparser.addArgument(\"error-template\");\n\nconst KEY_ERROR_EL = \"__patternslib__input__error__el\";\nconst KEY_ERROR_MSG = \"__patternslib__input__error__msg\";\n\nclass Pattern extends BasePattern {\n    static name = \"validation\";\n    static trigger = \"form.pat-validation\";\n    static parser = parser;\n\n    init() {\n        events.add_event_listener(\n            this.el,\n            \"submit\",\n            `pat-validation--submit--validator`,\n            (e) => {\n                // On submit, check all.\n                // Immediate, non-debounced check with submit. Otherwise submit\n                // is not cancelable.\n                for (const input of this.inputs) {\n                    logger.debug(\"Checking input for submit\", input, e);\n                    this.check_input({ input: input, event: e });\n                }\n            },\n            // Make sure this event handler is run early, in the capturing\n            // phase in order to be able to cancel later non-capturing submit\n            // events.\n            { capture: true }\n        );\n\n        this.initialize_inputs();\n        $(this.el).on(\"pat-update\", () => {\n            this.initialize_inputs();\n        });\n\n        // Set ``novalidate`` attribute to disable the browser's validation\n        // bubbles but not disable the validation API.\n        this.el.setAttribute(\"novalidate\", \"\");\n    }\n\n    initialize_inputs() {\n        this.inputs = [\n            ...this.el.querySelectorAll(\"input[name], select[name], textarea[name]\"),\n        ];\n        this.disabled_elements = [\n            ...this.el.querySelectorAll(this.options.disableSelector),\n        ];\n\n        for (const [cnt, input] of this.inputs.entries()) {\n            // Cancelable debouncer.\n            const debouncer = utils.debounce((e) => {\n                logger.debug(\"Checking input for event\", input, e);\n                this.check_input({ input: input, event: e });\n            }, this.options.delay);\n\n            events.add_event_listener(\n                input,\n                \"input\",\n                `pat-validation--input-${input.name}--${cnt}--validator`,\n                (e) => debouncer(e)\n            );\n            events.add_event_listener(\n                input,\n                \"change\",\n                `pat-validation--change-${input.name}--${cnt}--validator`,\n                (e) => debouncer(e)\n            );\n            events.add_event_listener(\n                input,\n                \"blur\",\n                `pat-validation--blur-${input.name}--${cnt}--validator`,\n                (e) => debouncer(e)\n            );\n        }\n    }\n\n    check_input({ input, event, stop = false }) {\n        if (input.disabled) {\n            // No need to check disabled inputs.\n            return;\n        }\n\n        // In any case, clear the custom validity first.\n        this.set_error({ input: input, msg: \"\", skip_event: true });\n        const validity_state = input.validity;\n\n        if (event?.submitter?.hasAttribute(\"formnovalidate\")) {\n            // Do not check when a button with ``formnovalidate`` was used.\n            return;\n        }\n\n        logger.debug(`\n            validity_state.badInput ${validity_state.badInput}\n            validity_state.customError ${validity_state.customError}\n            validity_state.patternMismatch ${validity_state.patternMismatch}\n            validity_state.rangeOverflow ${validity_state.rangeOverflow}\n            validity_state.rangeUnderflow ${validity_state.rangeUnderflow}\n            validity_state.stepMismatch ${validity_state.stepMismatch}\n            validity_state.tooLong ${validity_state.tooLong}\n            validity_state.tooShort ${validity_state.tooShort}\n            validity_state.typeMismatch ${validity_state.typeMismatch}\n            validity_state.valid ${validity_state.valid}\n            validity_state.valueMissing ${validity_state.valueMissing}\n        `);\n\n        const input_options = parser.parse(input);\n\n        if (validity_state.valid) {\n            // Custom error cases or no invalid state.\n\n            if (\n                input_options.equality &&\n                this.el.querySelector(`[name=${input_options.equality}]`)?.value !==\n                    input.value\n            ) {\n                const message =\n                    input_options.message.equality ||\n                    `The value is not equal to %{attribute}`;\n                this.set_error({\n                    input: input,\n                    msg: message,\n                    attribute: input_options.equality,\n                });\n            } else if (input_options.not.after || input_options.not.before) {\n                const msg = input_options.message.date || input_options.message.datetime;\n                const msg_default_not_before = \"The date must be after %{attribute}\";\n                const msg_default_not_after = \"The date must be before %{attribute}\";\n\n                let not_after;\n                let not_after_el;\n                if (input_options.not.after) {\n                    if (utils.is_iso_date_time(input_options.not.after, true)) {\n                        not_after = new Date(input_options.not.after);\n                    } else {\n                        // Handle value as selector\n                        not_after_el = document.querySelector(input_options.not.after);\n                        not_after = not_after_el?.value\n                            ? new Date(not_after_el?.value)\n                            : undefined;\n                    }\n\n                    // Use null if no valid date.\n                    not_after = isNaN(not_after) ? null : not_after;\n                }\n\n                let not_before;\n                let not_before_el;\n                if (input_options.not.before) {\n                    if (utils.is_iso_date_time(input_options.not.before, true)) {\n                        not_before = new Date(input_options.not.before);\n                    } else {\n                        // Handle value as selector\n                        not_before_el = document.querySelector(input_options.not.before);\n                        not_before = not_before_el?.value\n                            ? new Date(not_before_el?.value)\n                            : undefined;\n                    }\n\n                    // Use null if no valid date.\n                    not_before = isNaN(not_before) ? null : not_before;\n                }\n\n                if (\n                    input.value &&\n                    utils.is_iso_date_time(input.value, true) &&\n                    !isNaN(new Date(input.value))\n                ) {\n                    // That's 1 valid date!\n                    const date = new Date(input.value);\n\n                    if (not_after && date > not_after) {\n                        let msg_attr;\n                        // Try to construct a meaningfull error message\n                        if (!not_after_el && input_options.not.after) {\n                            // fixed date case\n                            msg_attr = input_options.not.after;\n                        } else {\n                            // Get the label + other text content within the\n                            // label and replace all whitespace and newlines\n                            // with a single space.\n                            msg_attr = not_after_el?.labels?.[0]?.textContent.replace(\n                                /\\s\\s+/g, // replace all whitespace\n                                \" \" // with a single space\n                            );\n                            msg_attr = msg_attr || not_after_el.name;\n                        }\n                        this.set_error({\n                            input: input,\n                            msg: msg || msg_default_not_after,\n                            attribute: msg_attr.trim(),\n                        });\n                    } else if (not_before && date < not_before) {\n                        let msg_attr;\n                        // Try to construct a meaningfull error message\n                        if (!not_before_el && input_options.not.before) {\n                            // fixed date case\n                            msg_attr = input_options.not.before;\n                        } else {\n                            // Get the label + other text content within the\n                            // label and replace all whitespace and newlines\n                            // with a single space.\n                            msg_attr = not_before_el?.labels?.[0]?.textContent.replace(\n                                /\\s\\s+/g, // replace all whitespace\n                                \" \" // with a single space\n                            );\n                            msg_attr = msg_attr || not_before_el.name;\n                        }\n                        this.set_error({\n                            input: input,\n                            msg: msg || msg_default_not_before,\n                            attribute: msg_attr.trim(),\n                        });\n                    }\n                }\n\n                // always check the other input to clear/set errors\n                // do not re-check when stop is set to avoid infinite loops\n                if (!stop && not_after_el) {\n                    logger.debug(\"Check `not-after` input.\", not_after_el);\n                    this.check_input({ input: not_after_el, stop: true });\n                }\n                if (!stop && not_before_el) {\n                    logger.debug(\"Check `no-before` input.\", not_after_el);\n                    this.check_input({ input: not_before_el, stop: true });\n                }\n            }\n\n            if (!validity_state.customError) {\n                // No error to handle. Return.\n                this.remove_error(input, true);\n                return;\n            }\n        } else {\n            // Default error cases with custom messages.\n\n            if (validity_state.valueMissing && input_options.message.required) {\n                this.set_error({ input: input, msg: input_options.message.required });\n            } else if (validity_state.rangeUnderflow && input_options.message.min) {\n                this.set_error({\n                    input: input,\n                    msg: input_options.message.min,\n                    min: input.getAttribute(\"min\"),\n                });\n            } else if (validity_state.rangeOverflow && input_options.message.max) {\n                this.set_error({\n                    input: input,\n                    msg: input_options.message.max,\n                    max: input.getAttribute(\"max\"),\n                });\n            } else if (\n                (validity_state.badInput || validity_state.stepMismatch) &&\n                input.type === \"number\" &&\n                input_options.message.number\n            ) {\n                this.set_error({ input: input, msg: input_options.message.number });\n            } else if (\n                validity_state.typeMismatch &&\n                input.type === \"email\" &&\n                input_options.message.email\n            ) {\n                this.set_error({ input: input, msg: input_options.message.email });\n            } else if (\n                validity_state.rangeUnderflow &&\n                input.type === \"date\" &&\n                input_options.message.date\n            ) {\n                this.set_error({ input: input, msg: input_options.message.date });\n            } else if (\n                validity_state.rangeOverflow &&\n                input.type === \"date\" &&\n                input_options.message.date\n            ) {\n                this.set_error({ input: input, msg: input_options.message.date });\n            } else if (\n                validity_state.rangeUnderflow &&\n                input.type === \"datetime\" &&\n                input_options.message.datetime\n            ) {\n                this.set_error({ input: input, msg: input_options.message.datetime });\n            } else if (\n                validity_state.rangeOverflow &&\n                input.type === \"datetime\" &&\n                input_options.message.datetime\n            ) {\n                this.set_error({ input: input, msg: input_options.message.datetime });\n            } else {\n                // Still an error, but without customized messages.\n                // Call `emit_update` separately\n                this.emit_update(\"invalid\");\n            }\n\n        }\n\n        if (event?.type === \"submit\") {\n            // Do not submit in error case and prevent other handlers to take action.\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n        }\n        this.set_error_message(input);\n    }\n\n    set_error({ input, msg, attribute = null, min = null, max = null, skip_event = false }) {\n        // Replace some variables, as like validate.js\n        if (attribute) {\n            msg = msg.replace(/%{attribute}/g, attribute);\n        }\n        if (min) {\n            msg = msg.replace(/%{count}/g, min);\n        }\n        if (max) {\n            msg = msg.replace(/%{count}/g, max);\n        }\n        msg = msg.replace(/%{value}/g, JSON.stringify(input.value));\n\n        input.setCustomValidity(msg);\n        // Store the error message on the input.\n        // Hidden inputs do not participate in validation but we need this\n        // (e.g. styled date input).\n        input[KEY_ERROR_MSG] = msg;\n\n        if (!skip_event) {\n            this.emit_update(\"invalid\");\n        }\n    }\n\n    remove_error(input, all_of_group = false, skip_event = false) {\n        // Remove error message and related referencesfrom input.\n\n        let inputs = [input];\n        if (all_of_group) {\n            // Get all inputs with the same name - e.g. radio buttons, checkboxes.\n            inputs = this.inputs.filter((it) => it.name === input.name);\n        }\n        for (const it of inputs) {\n            const error_node = it[KEY_ERROR_EL];\n            it[KEY_ERROR_EL] = null;\n            error_node?.remove();\n        }\n\n        // disable selector\n        if (this.el.checkValidity()) {\n            for (const it of this.disabled_elements) {\n                if (it.disabled) {\n                    it.removeAttribute(\"disabled\");\n                    it.classList.remove(\"disabled\");\n                }\n            }\n        }\n\n        if (!skip_event) {\n            this.emit_update(\"valid\");\n        }\n    }\n\n    set_error_message(input) {\n        // First, remove the old error message.\n        this.remove_error(input, false, true);\n\n        // Do not set a error message for a input group like radio buttons or\n        // checkboxes where one has already been set.\n        const inputs = this.inputs.filter((it) => it.name === input.name);\n        if (inputs.length > 1 && inputs.some((it) => !!it[KEY_ERROR_EL])) {\n            // error message for input group already set.\n            return;\n        }\n\n        // Create the validation error DOM node from the template\n        const validation_message = input.validationMessage || input[KEY_ERROR_MSG];\n        const error_node = dom.create_from_string(\n            this.error_template(validation_message)\n        ).firstChild;\n\n        let fieldset;\n        if (input.type === \"radio\" || input.type === \"checkbox\") {\n            fieldset = input.closest(\"fieldset.pat-checklist\");\n        }\n        if (fieldset) {\n            fieldset.append(error_node);\n        } else {\n            input.after(error_node);\n        }\n        input[KEY_ERROR_EL] = error_node;\n\n        let did_disable = false;\n        for (const it of this.disabled_elements) {\n            // Disable for melements if they are not already disabled and which\n            // do not have set the `formnovalidate` attribute, e.g.\n            // `<button formnovalidate>cancel</button>`.\n            if (!it.disabled && !it.formNoValidate) {\n                did_disable = true;\n                it.setAttribute(\"disabled\", \"disabled\");\n                it.classList.add(\"disabled\");\n                logger.debug(\"Disable element\", it);\n            }\n        }\n\n        // Do an initial check of the whole form when a form element (e.g. the\n        // submit button) was disabled. We want to show the user all possible\n        // errors at once and after the submit button is disabled there is no\n        // way to check the whole form at once. ... well we also do not want to\n        // check the whole form when one input was changed....\n        if (did_disable) {\n            logger.debug(\"Checking whole form after element was disabled.\");\n            for (const _input of this.inputs.filter((it) => it !== input)) {\n                this.check_input({ input: _input, stop: true });\n            }\n        }\n    }\n\n    error_template(message) {\n        // Template for the validation message\n        return `<em class=\"validation warning message\">${message}</em>`;\n    }\n}\n\nregistry.register(Pattern);\n\nexport default Pattern;\nexport { Pattern };\n","import $ from \"jquery\";\nimport registry from \"../../core/registry\";\nimport Parser from \"../../core/parser\";\n\nexport const parser = new Parser(\"zoom\");\nparser.addArgument(\"min\", 0);\nparser.addArgument(\"max\", 2);\n\nvar zoom = {\n    name: \"zoom\",\n    trigger: \".pat-zoom\",\n\n    init: function ($el, opts) {\n        return $el.each(function () {\n            var $block = $(this),\n                options = parser.parse($block, opts);\n\n            let $slider = $(\"<input/>\", {\n                type: \"range\",\n                step: \"any\",\n                value: 1,\n                min: options.min,\n                max: options.max,\n            });\n\n            $slider.insertBefore($block).on(\"change input\", null, $block, zoom.onZoom);\n        });\n    },\n\n    onZoom: function (event) {\n        var $block = event.data;\n        $block.css(\"zoom\", this.value);\n    },\n};\n\nregistry.register(zoom);\nexport default zoom;\n","/* Patterns bundle configuration.\n * All imports here will go into the compiled bundle.\n */\n\n// Import base\nimport registry from \"./core/registry\";\n\n// Import all used patterns for the bundle to be generated\nimport \"./core/push_kit\";\nimport \"./pat/ajax/ajax\";\nimport \"./pat/auto-scale/auto-scale\";\nimport \"./pat/auto-submit/auto-submit\";\nimport \"./pat/auto-suggest/auto-suggest\";\nimport \"./pat/autofocus/autofocus\";\nimport \"./pat/breadcrumbs/breadcrumbs\";\nimport \"./pat/bumper/bumper\";\nimport \"./pat/calendar/calendar\";\nimport \"./pat/carousel/carousel\";\nimport \"./pat/checklist/checklist\";\nimport \"./pat/clone/clone\";\nimport \"./pat/clone-code/clone-code\";\nimport \"./pat/collapsible/collapsible\";\nimport \"./pat/colour-picker/colour-picker\";\nimport \"./pat/date-picker/date-picker\";\nimport \"./pat/datetime-picker/datetime-picker\";\nimport \"./pat/depends/depends\";\nimport \"./pat/display-time/display-time\";\nimport \"./pat/equaliser/equaliser\";\nimport \"./pat/expandable-tree/expandable-tree\";\nimport \"./pat/focus/focus\";\nimport \"./pat/form-state/form-state\";\nimport \"./pat/forward/forward\";\nimport \"./pat/fullscreen/fullscreen-close\";\nimport \"./pat/fullscreen/fullscreen\";\nimport \"./pat/gallery/gallery\";\nimport \"./pat/image-crop/image-crop\";\nimport \"./pat/inject/inject\";\nimport \"./pat/legend/legend\"; // NOTE: Transforms <legend> tags to <p class=\"legend\"> for styling reasons.\nimport \"./pat/markdown/markdown\";\nimport \"./pat/masonry/masonry\";\nimport \"./pat/menu/menu\";\nimport \"./pat/modal/modal\";\nimport \"./pat/navigation/navigation\";\nimport \"./pat/notification/notification\";\nimport \"./pat/push/push\";\nimport \"./pat/scroll-box/scroll-box\";\nimport \"./pat/scroll/scroll\";\nimport \"./pat/scroll-marker/scroll-marker\";\nimport \"./pat/selectbox/selectbox\";\nimport \"./pat/slides/slides\";\nimport \"./pat/sortable/sortable\";\nimport \"./pat/stacks/stacks\";\nimport \"./pat/subform/subform\";\nimport \"./pat/switch/switch\";\nimport \"./pat/syntax-highlight/syntax-highlight\";\nimport \"./pat/tabs/tabs\";\nimport \"./pat/toggle/toggle\";\nimport \"./pat/tooltip/tooltip\";\nimport \"./pat/validation/validation\";\nimport \"./pat/zoom/zoom\";\n\n// External patterns\nimport \"@patternslib/pat-content-mirror\";\nimport \"@patternslib/pat-doclock\";\nimport \"@patternslib/pat-shopping-cart\";\nimport \"@patternslib/pat-sortable-table\";\nimport \"@patternslib/pat-tiptap\";\nimport \"@patternslib/pat-upload\";\n\n// Importing pattern styles in JavaScript\n// Set to ``true`` to include core styles via JavaScript\n//window.__patternslib_import_styles = false;\n\nregistry.init();\n","import { BasePattern } from \"../../core/basepattern\";\nimport dom from \"../../core/dom\";\nimport events from \"../../core/events\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\nconst log = logging.getLogger(\"scroll\");\n//logging.setLevel(logging.Level.DEBUG);\n\nexport const parser = new Parser(\"scroll\");\nparser.addArgument(\"trigger\", \"click\", [\"click\", \"auto\", \"manual\"]);\nparser.addArgument(\"direction\", \"top\", [\"top\", \"left\"]);\nparser.addArgument(\"selector\");\nparser.addArgument(\"offset\", 0);\nparser.addArgument(\"delay\");\n\nclass Pattern extends BasePattern {\n    static name = \"scroll\";\n    static trigger = \".pat-scroll\";\n    static parser = parser;\n\n    parser_group_options = false;\n\n    async init() {\n        if (this.options.delay) {\n            this.options.delay = utils.parseTime(this.options.delay);\n        }\n        if (this.options.trigger === \"auto\") {\n            const ImagesLoaded = (await import(\"imagesloaded\")).default;\n            // Only calculate the offset when all images are loaded\n            ImagesLoaded(document.body, this.scrollTo.bind(this));\n        }\n        if (this.options.trigger === \"auto\" || this.options.trigger === \"click\") {\n            this.el.addEventListener(\"click\", this.scrollTo.bind(this));\n        }\n    }\n\n    get_target() {\n        const selector = this.options.selector;\n        if (!selector && this.el.href?.includes(\"#\")) {\n            return document.querySelector(`#${this.el.href.split(\"#\").pop()}`);\n        } else if (!selector || [\"self\", \"top\", \"bottom\"].includes(selector)) {\n            return this.el;\n        }\n        return document.querySelector(selector);\n    }\n\n    async scrollTo() {\n        if (this.options.delay) {\n            await utils.timeout(this.options.delay);\n        }\n\n        const target = this.get_target();\n        const scroll_container = dom.find_scroll_container(\n            target.parentElement,\n            this.options.direction === \"top\" ? \"y\" : \"x\",\n            window\n        );\n\n        // Set/remove classes on beginning and end of scroll\n        this.el.classList.add(\"pat-scroll-animated\");\n        const debounced_scroll_end = utils.debounce(() => {\n            this.el.classList.remove(\"pat-scroll-animated\");\n            events.remove_event_listener(this.el, \"pat-scroll__scroll_end\");\n            log.debug(\"scroll_end\");\n        }, 100);\n        events.add_event_listener(\n            scroll_container === window ? document : scroll_container,\n            \"scroll\",\n            \"pat-scroll__scroll_end\",\n            debounced_scroll_end.bind(this)\n        );\n        debounced_scroll_end();\n\n        // now scroll\n        if (this.options.selector === \"top\") {\n            dom.scroll_to_top(scroll_container, this.options.offset);\n        } else if (this.options.selector === \"bottom\") {\n            dom.scroll_to_bottom(scroll_container, this.options.offset);\n        } else {\n            dom.scroll_to_element(\n                target,\n                scroll_container,\n                this.options.offset,\n                this.options.direction\n            );\n        }\n    }\n}\n\nregistry.register(Pattern);\nexport default Pattern;\nexport { Pattern };\n","/* This is a stub, used by patterns that need compatibility with Mockup which\n * have i18n support.\n *\n * Eventually we might want to implement our own i18n functionality here (while\n * keeping compatibility with Mockup).\n *\n * Jed.js would be a good candidate. (http://slexaxton.github.io/Jed)\n */\n\nexport default function translate(str) {\n    return str;\n}\n","import $ from \"jquery\";\n\nvar parser = {\n    getOptions($el, patternName, options) {\n        /* This is the Mockup parser. An alternative parser for Patternslib\n         * patterns.\n         *\n         * NOTE: Use of the Mockup parser is discouraged and is added here for\n         * legacy support for the Plone Mockup project.\n         *\n         * It parses a DOM element for pattern configuration options.\n         */\n        options = options || {};\n        // get options from parent element first, stop if element tag name is 'body'\n        if ($el.length !== 0 && !$.nodeName($el[0], \"body\")) {\n            options = this.getOptions($el.parent(), patternName, options);\n        }\n        // collect all options from element\n        let elOptions = {};\n        if ($el.length !== 0) {\n            elOptions = $el.data(\"pat-\" + patternName);\n            if (elOptions) {\n                // parse options if string\n                if (typeof elOptions === \"string\") {\n                    const tmpOptions = {};\n                    $.each(elOptions.split(\";\"), function (i, item) {\n                        item = item.split(\":\");\n                        item.reverse();\n                        let key = item.pop();\n                        key = key.replace(/^\\s+|\\s+$/g, \"\"); // trim\n                        item.reverse();\n                        let value = item.join(\":\");\n                        value = value.replace(/^\\s+|\\s+$/g, \"\"); // trim\n                        tmpOptions[key] = value;\n                    });\n                    elOptions = tmpOptions;\n                }\n            }\n        }\n        return $.extend(true, {}, options, elOptions);\n    },\n};\n\nexport default parser;\n","/**\n * A Base pattern for creating scoped patterns. It's similar to Backbone's\n * Model class. The advantage of this approach is that each instance of a\n * pattern has its own local scope (closure).\n *\n * A new instance is created for each DOM element on which a pattern applies.\n *\n * You can assign values, such as $el, to `this` for an instance and they\n * will remain unique to that instance.\n *\n * Older Patternslib patterns on the other hand have a single global scope for\n * all DOM elements.\n */\nimport $ from \"jquery\";\nimport Registry from \"./registry\";\nimport logging from \"./logging\";\nimport mockupParser from \"./mockup-parser\";\n\nconst log = logging.getLogger(\"Patternslib Base\");\n\nconst initBasePattern = function ($el, options, trigger) {\n    if (!$el.jquery) {\n        $el = $($el);\n    }\n    const name = this.prototype.name;\n    const plog = logging.getLogger(`pat.${name}`);\n    let pattern = $el.data(`pattern-${name}`);\n    if (pattern === undefined && Registry.patterns[name]) {\n        try {\n            // Immediately set the pattern instance to the temporary value\n            // ``initializing`` before the async Base constructor is setting\n            // the value later.\n            // This prevents re-init the pattern on this element on multiple\n            // initialization calls..\n            $el.data(`pattern-${name}`, \"initializing\");\n            options =\n                this.prototype.parser === \"mockup\"\n                    ? mockupParser.getOptions($el, name, options)\n                    : options;\n            pattern = new Registry.patterns[name]($el, options, trigger);\n        } catch (e) {\n            plog.error(`Failed while initializing ${name} pattern.`, e);\n        }\n    }\n    return pattern;\n};\n\nconst Base = async function ($el, options, trigger) {\n    if (($el?.jquery && $el.length === 0) || !$el) {\n        log.warn(\"No element given to pattern.\");\n        return;\n    }\n    if (!$el.jquery) {\n        $el = $($el);\n    }\n    this.$el = $el;\n    this.el = $el[0];\n    this.options = $.extend(true, {}, this.defaults || {}, options || {});\n\n    this.emit(\"pre-init\");\n\n    await this.init($el, options, trigger);\n\n    // Store pattern instance on element\n    this.$el.data(`pattern-${this.name}`, this);\n    this.el[`pattern-${this.name}`] = this;\n\n    this.emit(\"init\");\n};\n\nBase.prototype = {\n    constructor: Base,\n    on(eventName, eventCallback) {\n        this.$el.on(`${eventName}.${this.name}.patterns`, eventCallback);\n    },\n    one(eventName, eventCallback) {\n        this.$el.one(`${eventName}.${this.name}.patterns`, eventCallback);\n    },\n    emit(eventName, args) {\n        // args should be a list\n        if (args === undefined) {\n            args = [];\n        }\n        this.$el.trigger(`${eventName}.${this.name}.patterns`, args);\n    },\n};\n\nBase.extend = function (patternProps) {\n    /* Helper function to correctly set up the prototype chain for new patterns.\n     */\n    const parent = this;\n    let child;\n\n    // Check that the required configuration properties are given.\n    if (!patternProps) {\n        throw new Error(\n            \"Pattern configuration properties required when calling Base.extend\"\n        );\n    }\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (Object.hasOwnProperty.call(patternProps, \"constructor\")) {\n        child = patternProps.constructor;\n    } else {\n        child = function () {\n            parent.apply(this, arguments);\n        };\n    }\n\n    // Allow patterns to be extended indefinitely\n    child.extend = Base.extend;\n\n    // Static properties required by the Patternslib registry\n    child.init = initBasePattern;\n    child.jquery_plugin = true;\n    child.trigger = patternProps.trigger;\n    child.parser = patternProps?.parser || null;\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    var Surrogate = function () {\n        this.constructor = child;\n    };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate();\n\n    // Add pattern's configuration properties (instance properties) to the subclass,\n    $.extend(true, child.prototype, patternProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    // Register the pattern in the Patternslib registry.\n    if (!patternProps.name) {\n        log.warn(\"This pattern without a name attribute will not be registered!\");\n    } else if (!patternProps.trigger) {\n        log.warn(\n            `The pattern ${patternProps.name} does not have a trigger attribute, it will not be registered.`\n        );\n    } else if (patternProps.autoregister !== false) {\n        Registry.register(child, patternProps.name);\n    }\n    return child;\n};\n\nexport default Base;\n","// Patterns argument parser\nimport $ from \"jquery\";\nimport utils from \"./utils.js\";\nimport logging from \"./logging\";\n\nclass ArgumentParser {\n    constructor(name) {\n        this.order = [];\n        this.parameters = {};\n        this.attribute = \"data-pat-\" + name;\n        this.enum_values = {};\n        this.enum_conflicts = [];\n        this.groups = {};\n        this.possible_groups = {};\n        this.log = logging.getLogger(name + \".parser\");\n\n        this.group_pattern = /([a-z][a-z0-9]*)-([A-Z][a-z0-0\\-]*)/i;\n        this.json_param_pattern = /^\\s*\\[?\\s*{/i;\n        this.named_param_pattern = /^\\s*([a-z][a-z0-9\\-]*)\\s*:(.*)/is;\n        this.token_pattern = /(([\"']).*?(?!\\\\)\\2)|\\s*(\\S+)\\s*/g;\n    }\n\n    _camelCase(str) {\n        return str.replace(/\\-([a-z])/g, (__, p1) => p1.toUpperCase());\n    }\n\n    addAlias(alias, original) {\n        /* Add an alias for a previously added parser argument.\n         *\n         * Useful when you want to support both US and UK english argument\n         * names.\n         */\n        if (this.parameters[original]) {\n            this.parameters[original].alias = alias;\n        } else {\n            throw `Attempted to add an alias \"${alias}\" for a non-existing parser argument \"${original}\".`;\n        }\n    }\n\n    addGroupToSpec(spec) {\n        /* Determine wether an argument being parsed can be grouped and\n         * update its specifications object accordingly.\n         *\n         * Internal method used by addArgument and addJSONArgument\n         */\n        const m = spec.name.match(this.group_pattern);\n        if (m) {\n            const group = m[1];\n            const field = m[2];\n            if (group in this.possible_groups) {\n                const first_spec = this.possible_groups[group];\n                const first_name = first_spec.name.match(this.group_pattern)[2];\n                first_spec.group = group;\n                first_spec.dest = first_name;\n                this.groups[group] = new ArgumentParser();\n                this.groups[group].addArgument(\n                    first_name,\n                    first_spec.value,\n                    first_spec.choices,\n                    first_spec.multiple\n                );\n                delete this.possible_groups[group];\n            }\n            if (group in this.groups) {\n                this.groups[group].addArgument(\n                    field,\n                    spec.value,\n                    spec.choices,\n                    spec.multiple\n                );\n                spec.group = group;\n                spec.dest = field;\n            } else {\n                this.possible_groups[group] = spec;\n                spec.dest = this._camelCase(spec.name);\n            }\n        }\n        return spec;\n    }\n\n    addJSONArgument(name, default_value) {\n        /* Add an argument where the value is provided in JSON format.\n         *\n         * This is a different usecase than specifying all arguments to\n         * the data-pat-... attributes in JSON format, and instead is part\n         * of the normal notation except that a value is in JSON instead of\n         * for example a string.\n         */\n        this.order.push(name);\n        this.parameters[name] = this.addGroupToSpec({\n            name: name,\n            value: default_value,\n            dest: name,\n            group: null,\n            type: \"json\",\n        });\n    }\n\n    addArgument(name, default_value, choices, multiple) {\n        const spec = {\n            name: name,\n            value:\n                multiple && !Array.isArray(default_value)\n                    ? [default_value]\n                    : default_value,\n            multiple: multiple,\n            dest: name,\n            group: null,\n        };\n        if (choices && Array.isArray(choices) && choices.length) {\n            spec.choices = choices;\n            spec.type = this._typeof(choices[0]);\n            for (const choice of choices) {\n                if (this.enum_conflicts.indexOf(choice) !== -1) {\n                    continue;\n                } else if (choice in this.enum_values) {\n                    this.enum_conflicts.push(choice);\n                    delete this.enum_values[choice];\n                } else {\n                    this.enum_values[choice] = name;\n                }\n            }\n        } else if (typeof spec.value === \"string\" && spec.value.slice(0, 1) === \"$\") {\n            spec.type = this.parameters[spec.value.slice(1)].type;\n        } else {\n            // Note that this will get reset by _defaults if default_value is a function.\n            spec.type = this._typeof(multiple ? spec.value[0] : spec.value);\n        }\n        this.order.push(name);\n        this.parameters[name] = this.addGroupToSpec(spec);\n    }\n\n    _typeof(obj) {\n        if (obj === null) {\n            return \"null\";\n        }\n        return typeof obj;\n    }\n\n    _coerce(name, value) {\n        const spec = this.parameters[name];\n        if (typeof value !== spec.type)\n            try {\n                switch (spec.type) {\n                    case \"json\":\n                        value = JSON.parse(value);\n                        break;\n                    case \"boolean\":\n                        if (typeof value === \"string\") {\n                            value = value.toLowerCase();\n                            const num = parseInt(value, 10);\n                            if (!isNaN(num)) value = !!num;\n                            else\n                                value =\n                                    value === \"true\" ||\n                                    value === \"y\" ||\n                                    value === \"yes\" ||\n                                    value === \"y\" ||\n                                    value === \"on\";\n                        } else if (typeof value === \"number\") {\n                            value = !!value;\n                        } else {\n                            throw `Cannot convert value for ${name} to boolean.`;\n                        }\n                        break;\n                    case \"number\":\n                        if (typeof value === \"string\") {\n                            value = parseInt(value, 10);\n                            if (isNaN(value)) {\n                                throw `Cannot convert value for ${name} to number.`;\n                            }\n                        } else if (typeof value === \"boolean\") {\n                            value = value + 0;\n                        } else {\n                            throw `Cannot convert value for ${name} to number.`;\n                        }\n                        break;\n                    case \"string\":\n                        value = value.toString();\n                        break;\n                    case \"null\": // Missing default values\n                    case \"undefined\":\n                        break;\n                    default:\n                        throw `Do not know how to convert value for ${name} of type ${typeof value} to ${\n                            spec.type\n                        }.`;\n                }\n            } catch (e) {\n                this.log.warn(e);\n                return null;\n            }\n\n        if (spec.choices && spec.choices.indexOf(value) === -1) {\n            this.log.warn(`Illegal value for ${name}: ${value}.`);\n            return null;\n        }\n        return value;\n    }\n\n    _set(opts, name, value) {\n        if (!(name in this.parameters)) {\n            this.log.debug(`Ignoring value for unknown argument: ${name}.`);\n            return;\n        }\n        const spec = this.parameters[name];\n        let parts;\n        if (spec.multiple) {\n            if (typeof value === \"string\") {\n                parts = value.split(/,+/);\n            } else {\n                parts = value;\n            }\n            value = [];\n            for (const part of parts) {\n                const v = this._coerce(name, part.trim());\n                if (v !== null) {\n                    value.push(v);\n                }\n            }\n        } else {\n            value = this._coerce(name, value);\n            if (value === null) {\n                return;\n            }\n        }\n        opts[name] = value;\n    }\n\n    _split(text) {\n        const tokens = [];\n        text.replace(this.token_pattern, (match, quoted, __, simple) => {\n            if (quoted) {\n                tokens.push(quoted);\n            } else if (simple) {\n                tokens.push(simple);\n            }\n        });\n        return tokens;\n    }\n\n    _parseExtendedNotation(argstring) {\n        const opts = {};\n        const parts = argstring\n            .replace(/;;/g, \"\\0x1f\")\n            .replace(/&amp;/g, \"&amp\\0x1f\")\n            .split(/;/)\n            .map((el) => el.replace(new RegExp(\"\\0x1f\", \"g\"), \";\"));\n        for (const part of parts) {\n            if (!part) {\n                continue;\n            }\n            const matches = part.match(this.named_param_pattern);\n            if (!matches) {\n                this.log.warn(`Invalid parameter: ${part}: ${argstring}.`);\n                continue;\n            }\n            const name = matches[1];\n            const value = matches[2].trim();\n            const arg = Object.values(this.parameters).filter((it) => it.alias === name);\n\n            const is_alias = arg.length === 1;\n\n            if (is_alias) {\n                this._set(opts, arg[0].name, value);\n            } else if (name in this.parameters) {\n                this._set(opts, name, value);\n            } else if (name in this.groups) {\n                const subopt = this.groups[name]._parseShorthandNotation(value);\n                for (const field in subopt) {\n                    this._set(opts, name + \"-\" + field, subopt[field]);\n                }\n            } else {\n                this.log.warn(`Unknown named parameter: ${matches[1]}.`);\n                continue;\n            }\n        }\n        return opts;\n    }\n\n    _parseShorthandNotation(parameter) {\n        const parts = this._split(parameter);\n        const opts = {};\n        let i = 0;\n\n        while (parts.length) {\n            const part = parts.shift().trim();\n            let sense;\n            let flag;\n            let positional = true;\n            if (part.slice(0, 3) === \"no-\") {\n                sense = false;\n                flag = part.slice(3);\n            } else {\n                sense = true;\n                flag = part;\n            }\n            if (flag in this.parameters && this.parameters[flag].type === \"boolean\") {\n                positional = false;\n                this._set(opts, flag, sense);\n            } else if (flag in this.enum_values) {\n                positional = false;\n                this._set(opts, this.enum_values[flag], flag);\n            } else if (positional) this._set(opts, this.order[i], part);\n            else {\n                parts.unshift(part);\n                break;\n            }\n            i++;\n            if (i >= this.order.length) {\n                break;\n            }\n        }\n        if (parts.length) this.log.warn(`Ignore extra arguments: ${parts.join(\" \")}.`);\n        return opts;\n    }\n\n    _parse(parameter) {\n        if (!parameter) {\n            return {};\n        }\n        if (parameter.match(this.json_param_pattern)) {\n            try {\n                return JSON.parse(parameter);\n            } catch {\n                this.log.warn(`Invalid JSON argument found: ${parameter}.`);\n            }\n        }\n        if (parameter.match(this.named_param_pattern)) {\n            return this._parseExtendedNotation(parameter);\n        }\n        const sep = parameter.indexOf(\";\");\n        if (sep === -1) {\n            return this._parseShorthandNotation(parameter);\n        }\n        const opts = this._parseShorthandNotation(parameter.slice(0, sep));\n        const extended = this._parseExtendedNotation(parameter.slice(sep + 1));\n        for (const name in extended) {\n            opts[name] = extended[name];\n        }\n        return opts;\n    }\n\n    _defaults($el) {\n        const result = {};\n        for (const name in this.parameters) {\n            if (typeof this.parameters[name].value === \"function\") {\n                try {\n                    result[name] = this.parameters[name].value($el, name);\n                    this.parameters[name].type = typeof result[name];\n                } catch {\n                    this.log.error(`Default function for ${name} failed.`);\n                }\n            } else {\n                result[name] = this.parameters[name].value;\n            }\n        }\n        return result;\n    }\n\n    _cleanupOptions(options, group_options = true) {\n        // Resolve references\n        for (const name of Object.keys(options)) {\n            const spec = this.parameters[name];\n            if (spec === undefined) {\n                continue;\n            }\n\n            if (\n                options[name] === spec.value &&\n                typeof spec.value === \"string\" &&\n                spec.value.slice(0, 1) === \"$\"\n            ) {\n                options[name] = options[spec.value.slice(1)];\n            }\n        }\n        if (group_options) {\n            // Move options into groups and do renames\n            for (const name of Object.keys(options)) {\n                const spec = this.parameters[name];\n                let target;\n                if (spec === undefined) {\n                    continue;\n                }\n\n                if (spec.group) {\n                    if (typeof options[spec.group] !== \"object\") {\n                        options[spec.group] = {};\n                    }\n                    target = options[spec.group];\n                } else {\n                    target = options;\n                }\n\n                if (spec.dest !== name) {\n                    target[spec.dest] = options[name];\n                    delete options[name];\n                }\n            }\n        }\n        return options;\n    }\n\n    parse($el, options, multiple, inherit = true, group_options = true) {\n        if (!$el.jquery) {\n            $el = $($el);\n        }\n        if (typeof options === \"boolean\" && multiple === undefined) {\n            // Fix argument order: ``multiple`` passed instead of ``options``.\n            multiple = options;\n            options = {};\n        }\n        const stack = inherit ? [[this._defaults($el)]] : [[{}]];\n        let $possible_config_providers;\n        let final_length = 1;\n        /*\n         * XXX this is a workaround for:\n         * - https://github.com/Patternslib/Patterns/issues/393\n         *\n         * Prevents the parser to pollute the pat-modal configuration\n         * with data-pat-inject elements define in a `.pat-modal` parent element.\n         *\n         *  Probably this function should be completely revisited, see:\n         * - https://github.com/Patternslib/Patterns/issues/627\n         *\n         */\n        if (\n            !inherit ||\n            ($el.hasClass(\"pat-modal\") && this.attribute === \"data-pat-inject\")\n        ) {\n            $possible_config_providers = $el;\n        } else {\n            $possible_config_providers = $el.parents(`[${this.attribute}]`).addBack();\n        }\n\n        for (const provider of $possible_config_providers) {\n            let frame;\n            const data = ($(provider).attr(this.attribute) || \"\").trim();\n            if (!data) {\n                continue;\n            }\n            const _parse = this._parse.bind(this);\n            if (data.match(/&&/)) {\n                frame = data.split(/\\s*&&\\s*/).map(_parse);\n            } else {\n                frame = _parse(data);\n            }\n            if (!Array.isArray(frame)) {\n                frame = [frame];\n            }\n            final_length = Math.max(frame.length, final_length);\n            stack.push(frame);\n        }\n\n        if (typeof options === \"object\") {\n            if (Array.isArray(options)) {\n                stack.push(options);\n                final_length = Math.max(options.length, final_length);\n            } else {\n                stack.push([options]);\n            }\n        }\n        if (!multiple) {\n            final_length = 1;\n        }\n        const results = utils\n            .removeDuplicateObjects(utils.mergeStack(stack, final_length))\n            .map((current_value) => this._cleanupOptions(current_value, group_options));\n        return multiple ? results : results[0];\n    }\n}\n\n// BBB\nArgumentParser.prototype.add_argument = ArgumentParser.prototype.addArgument;\n\nexport default ArgumentParser;\n","import Base from \"../../core/base\";\nimport Parser from \"../../core/parser\";\nimport dom from \"../../core/dom\";\nimport logging from \"../../core/logging\";\nimport utils from \"../../core/utils\";\n\n// Lazy loading modules.\nlet Moment;\n\nconst log = logging.getLogger(\"pat-display-time\");\n\nexport const parser = new Parser(\"display-time\");\n// input datetime options\nparser.add_argument(\"format\", \"\");\nparser.add_argument(\"locale\", null);\nparser.add_argument(\"strict\", false);\n// output options\nparser.add_argument(\"from-now\", false);\nparser.add_argument(\"no-suffix\", false);\nparser.add_argument(\"output-format\", null);\n\nexport default Base.extend({\n    name: \"display-time\",\n    trigger: \".pat-display-time\",\n\n    async init() {\n        Moment = (await import(\"moment\")).default;\n\n        this.options = parser.parse(this.el, this.options);\n\n        let lang = this.options.locale || dom.acquire_attribute(this.el, \"lang\") || \"en\";\n        // we don't support any country-specific language variants, always use first 2 letters\n        lang = lang.substr(0, 2).toLowerCase();\n        try {\n            await import(`moment/locale/${lang}.js`);\n            Moment.locale(lang);\n            this.lang = lang;\n        } catch {\n            Moment.locale(\"en\");\n            this.lang = \"en\";\n        }\n        log.debug(`Moment.js language used: ${lang}.`);\n        this.format();\n    },\n\n    format() {\n        const datetime = this.el.getAttribute(\"datetime\");\n        let out = \"\";\n        if (datetime) {\n            const date = Moment(datetime, this.options.format, this.options.strict);\n            out = date;\n            if (this.options.fromNow === true) {\n                if (utils.is_iso_date(datetime)) {\n                    // date-only case.\n                    const rtf = new Intl.RelativeTimeFormat(this.lang, {\n                        numeric: \"auto\",\n                    });\n                    const date_diff = utils.date_diff(date.toDate(), new Date());\n                    out = date.calendar(null, {\n                        // when the date is closer, specify custom values\n                        lastWeek: `[${rtf.format(date_diff, \"day\")}]`, // translates to \"x days ago\"\n                        lastDay: `[${rtf.format(-1, \"day\")}]`, // translates to \"yesterday\"\n                        sameDay: `[${rtf.format(0, \"day\")}]`, // translates to \"today\"\n                        nextDay: `[${rtf.format(1, \"day\")}]`, // translates to \"tomorrow\"\n                        nextWeek: \"dddd\", // translates to week day name\n                        // otherwise, just use Intl.RelativeTimeFormat.\n                        sameElse: () => {\n                            return `[${rtf.format(date_diff, \"day\")}]`;\n                        },\n                    });\n                } else {\n                    // datetime case.\n                    out = date.fromNow(this.options.noSuffix);\n                }\n            } else if (this.options.outputFormat) {\n                out = date.format(this.options.outputFormat);\n            }\n        }\n        this.el.textContent = out;\n    },\n});\n","/* Utilities for DOM traversal or navigation */\nimport events from \"./events\";\nimport logging from \"./logging\";\nimport create_uuid from \"./uuid\";\n\nconst logger = logging.getLogger(\"core dom\");\n\nconst DATA_PREFIX = \"__patternslib__data_prefix__\";\nconst DATA_STYLE_DISPLAY = \"__patternslib__style__display\";\n\nconst INPUT_SELECTOR = \"input, select, textarea, button\";\n\n/**\n * Wait for the document to be ready.\n *\n * @param {Function} fn - The function to call when the document is ready.\n */\nconst document_ready = (fn) => {\n    const event_id = create_uuid();\n\n    const _ready = () => {\n        if (document.readyState !== \"loading\") {\n            // Remove the event listener for this callback.\n            events.remove_event_listener(document, event_id);\n            // call on next available tick\n            setTimeout(fn, 1);\n        }\n    };\n\n    // Listen for the document to be ready and call _ready() when it is.\n    events.add_event_listener(document, \"readystatechange\", event_id, _ready);\n\n    // Also check the ready state immediately in case we missed the event.\n    _ready();\n};\n\n/**\n * Return an array of DOM nodes.\n *\n * @param {Node|NodeList|jQuery} nodes - The DOM node to start the search from.\n *\n * @returns {Array} - An array of DOM nodes.\n */\nconst toNodeArray = (nodes) => {\n    if (nodes.jquery || nodes instanceof NodeList) {\n        // jQuery or document.querySelectorAll\n        nodes = [...nodes];\n    } else if (nodes instanceof Array === false) {\n        nodes = [nodes];\n    }\n    return nodes;\n};\n\n/**\n * Like querySelectorAll but including the element where it starts from.\n * Returns an Array, not a NodeList\n *\n * @param {Node} el - The DOM node to start the search from.\n *\n * @returns {Array} - The DOM nodes found.\n */\nconst querySelectorAllAndMe = (el, selector) => {\n    if (!el || !el.querySelectorAll) {\n        return [];\n    }\n\n    const all = [...el.querySelectorAll(selector)];\n    if (el.matches(selector)) {\n        all.unshift(el); // start element should be first.\n    }\n    return all;\n};\n\n/**\n * Wrap a element with a wrapper element.\n *\n * The element to be wrapped will be moved into the wrapper element and the\n * wrapper element is placed just before the old element was.\n *\n * @param {Node} el - The DOM node to wrap.\n * @param {Node} wrapper - The wrapper element.\n */\nconst wrap = (el, wrapper) => {\n    // See: https://stackoverflow.com/a/13169465/1337474\n    el.parentNode.insertBefore(wrapper, el);\n    wrapper.appendChild(el);\n};\n\n/**\n * Hides the element with ``display: none`` and stores the current display value.\n *\n * @param {Node} el - The DOM node to hide.\n */\nconst hide = (el) => {\n    if (el.style.display === \"none\") {\n        // Nothing to do.\n        return;\n    }\n    if (el.style.display) {\n        el[DATA_STYLE_DISPLAY] = el.style.display;\n    }\n    el.style.display = \"none\";\n};\n\n/**\n * Shows element by removing ``display: none`` and restoring the display value\n * to whatever it was before.\n *\n * @param {Node} el - The DOM node to show.\n */\nconst show = (el) => {\n    const val = el[DATA_STYLE_DISPLAY] || null;\n    el.style.display = val;\n    delete el[DATA_STYLE_DISPLAY];\n};\n\n/**\n * Test, if a element is visible or not.\n *\n * @param {Node} el - The DOM node to test.\n * @returns {Boolean} - True if the element is visible.\n */\nconst is_visible = (el) => {\n    // Check, if element is visible in DOM.\n    // https://stackoverflow.com/a/19808107/1337474\n    return el.offsetWidth > 0 && el.offsetHeight > 0;\n};\n\n/**\n * Test, if a element is a input-type element.\n *\n * This is taken from Sizzle/jQuery at:\n * https://github.com/jquery/sizzle/blob/f2a2412e5e8a5d9edf168ae3b6633ac8e6bd9f2e/src/sizzle.js#L139\n * https://github.com/jquery/sizzle/blob/f2a2412e5e8a5d9edf168ae3b6633ac8e6bd9f2e/src/sizzle.js#L1773\n *\n * @param {Node} el - The DOM node to test.\n * @returns {Boolean} - True if the element is a input-type element.\n */\nconst is_input = (el) => {\n    const re_input = /^(?:input|select|textarea|button)$/i;\n    return re_input.test(el.nodeName);\n};\n\n/**\n * Test, if a element is a button-like input type.\n *\n * @param {Node} el - The DOM node to test.\n * @returns {Boolean} - True if the element is a input-type element.\n */\nconst is_button = (el) => {\n    return el.matches(`\n        button,\n        input[type=image],\n        input[type=button],\n        input[type=reset],\n        input[type=submit]\n    `);\n};\n\n\n\n/**\n * Return all direct parents of ``el`` matching ``selector``.\n * This matches against all parents but not the element itself.\n * The order of elements is from the search starting point up to higher\n * DOM levels.\n *\n * @param {Node} el - The DOM node to start the search from.\n * @param {String} selector - CSS selector to match against.\n * @returns {Array} - List of matching DOM nodes.\n */\nconst find_parents = (el, selector) => {\n    const ret = [];\n    let parent = el;\n    while (parent) {\n        parent = parent.parentNode?.closest?.(selector);\n        if (parent) ret.push(parent);\n    }\n    return ret;\n};\n\n/**\n * Find an element in the whole DOM tree if the selector is an ID selector,\n * otherwise use the given element as the starting point.\n *\n * @param {Node} el - The DOM node to start the search from.\n * @param {String} selector - The CSS selector to search for.\n *\n * @returns {NodeList} - The DOM nodes found.\n *\n */\nconst find_scoped = (el, selector) => {\n    // If the selector starts with an object id do a global search,\n    // otherwise do a local search.\n    return (selector.indexOf(\"#\") === 0 ? document : el).querySelectorAll(selector);\n};\n\n/**\n * Return all HTMLElement parents of el, starting from the direct parent of el.\n * The document itself is excluded because it's not a real DOM node.\n *\n * @param {Node} el - The DOM node to start the search from.\n *\n * @returns {Array} - The DOM nodes found.\n */\nconst get_parents = (el) => {\n    // Return all HTMLElement parents of el, starting from the direct parent of el.\n    const parents = [];\n    let parent = el?.parentNode;\n    while (parent) {\n        parents.push(parent);\n        parent = parent?.parentNode;\n        parent = parent instanceof HTMLElement ? parent : null;\n    }\n    return parents;\n};\n\n/**\n * Return the value of the first attribute found in the list of parents.\n *\n * @param {Node} el - The DOM element to start the acquisition search for the given attribute.\n * @param {string} attribute - Name of the attribute to search for.\n * @param {Boolean} include_empty - Also return empty values.\n * @param {Boolean} include_all - Return a list of attribute values found in all parents.\n *\n * @returns {*} - Returns the value of the searched attribute or a list of all attributes.\n */\nconst acquire_attribute = (\n    el,\n    attribute,\n    include_empty = false,\n    include_all = false\n) => {\n    let _el = el;\n    const ret = []; // array for ``include_all`` mode.\n    while (_el) {\n        const val = _el.getAttribute(attribute);\n        if (val || (include_empty && val === \"\")) {\n            if (!include_all) {\n                return val;\n            }\n            ret.push(val);\n        }\n        _el = _el.parentElement;\n    }\n    if (include_all) {\n        return ret;\n    }\n};\n\n/**\n * Return a DocumentFragment from a given string.\n *\n * @param {String} string - The HTML structure as a string.\n *\n * @returns {DocumentFragment} - The DOM nodes as a DocumentFragment.\n */\nconst create_from_string = (string) => {\n    // See: https://davidwalsh.name/convert-html-stings-dom-nodes\n    return document.createRange().createContextualFragment(string.trim());\n};\n\n/**\n * Return a CSS property value for a given DOM node.\n * For length-values, relative values are converted to pixels.\n * Optionally parse as pixels, if applicable.\n *\n * Note: The element must be attached to the body to make CSS caluclations work.\n *\n * @param {Node} el - DOM node.\n * @param {String} property - CSS property to query on DOM node.\n * @param {Boolean} [as_pixels=false] - Convert value to pixels, if applicable.\n * @param {Boolean} [as_float=false] - Convert value to float, if applicable.\n *\n * @returns {(String|Number)} - The CSS value to return.\n */\nfunction get_css_value(el, property, as_pixels = false, as_float = false) {\n    let value = window.getComputedStyle(el).getPropertyValue(property);\n    if (as_pixels || as_float) {\n        value = parseFloat(value) || 0.0;\n    }\n    if (as_pixels && !as_float) {\n        value = parseInt(Math.round(value), 10);\n    }\n    return value;\n}\n\n/**\n * Find a scrollable element up in the DOM tree.\n *\n * Note: Setting the ``overflow`` shorthand property also sets the individual overflow-y and overflow-y properties.\n *\n * @param {Node} el - The DOM element to start the search on.\n * @param {String} [direction=] - Not given: Search for any scrollable element up in the DOM tree.\n *                                ``x``: Search for a horizontally scrollable element.\n *                                ``y``: Search for a vertically scrollable element.\n * @param {(Node|null)} [fallback=document.body] - Fallback, if no scroll container can be found.\n *                                                     The default is to use document.body.\n *\n * @returns {Node} - Return the first scrollable element.\n *                   If no other element could be found, document.body would be returned.\n */\nconst find_scroll_container = (el, direction, fallback = document.body) => {\n    while (el && el !== document.body) {\n        if (!direction || direction === \"y\") {\n            let overflow_y = get_css_value(el, \"overflow-y\");\n            if ([\"auto\", \"scroll\"].includes(overflow_y)) {\n                return el;\n            }\n        }\n        if (!direction || direction === \"x\") {\n            let overflow_x = get_css_value(el, \"overflow-x\");\n            if ([\"auto\", \"scroll\"].includes(overflow_x)) {\n                return el;\n            }\n        }\n        el = el.parentElement;\n    }\n    return fallback;\n};\n\n/**\n * Get the horizontal scroll position.\n *\n * @param {Node} scroll_reference - The element to get the scroll position from.\n *\n * @returns {number} The horizontal scroll position.\n */\nconst get_scroll_x = (scroll_reference) => {\n    // scroll_listener == window: window.scrollX\n    // scroll_listener == html: html.scrollLeft == window.scrollX\n    // scroll_listener == DOM node: node.scrollLeft\n    return typeof scroll_reference.scrollLeft !== \"undefined\"\n        ? scroll_reference.scrollLeft\n        : scroll_reference.scrollX;\n};\n\n/**\n * Get the vertical scroll position.\n *\n * @param {Node} scroll_reference - The element to get the scroll position from.\n *\n * @returns {number} The vertical scroll position.\n */\nconst get_scroll_y = (scroll_reference) => {\n    // scroll_listener == window: window.scrollY\n    // scroll_listener == html: html.scrollTop == window.scrollY\n    // scroll_listener == DOM node: node.scrollTop\n    return typeof scroll_reference.scrollTop !== \"undefined\"\n        ? scroll_reference.scrollTop\n        : scroll_reference.scrollY;\n};\n\n/**\n * Get the elements position relative to another element.\n *\n * @param {Node} el - The DOM element to get the position for.\n * @param {Node} [reference_el=document.body] - The DOM element to get the position relative to.\n *\n * @returns {{top: number, left: number}} - The position of the element relative to the other element.\n */\nconst get_relative_position = (el, reference_el = document.body) => {\n    // Get the reference element to which against we calculate\n    // the relative position of the target.\n    // In case of a scroll container of window, we do not have\n    // getBoundingClientRect method, so get the body instead.\n    if (reference_el === window) {\n        reference_el = document.body;\n    }\n\n    // Calculate absolute [¹] position difference between\n    // scroll_container and scroll_target.\n    // Substract the container's border from the scrolling\n    // value, as this one isn't respected by\n    // getBoundingClientRect [²] and would lead to covered\n    // items [³].\n    // ¹) so that it doesn't make a difference, if the element\n    // is below or above the scrolling container. We just need\n    // to know the absolute difference.\n    // ²) Calculations are based from the viewport.\n    // ³) See:\n    //      https://docs.microsoft.com/en-us/previous-versions//hh781509(v=vs.85)\n    //      https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n    const left = Math.abs(\n        el.getBoundingClientRect().left +\n            reference_el.scrollLeft -\n            reference_el.getBoundingClientRect().left -\n            dom.get_css_value(reference_el, \"border-left-width\", true)\n    );\n    const top = Math.abs(\n        el.getBoundingClientRect().top +\n            reference_el.scrollTop -\n            reference_el.getBoundingClientRect().top -\n            dom.get_css_value(reference_el, \"border-top-width\", true)\n    );\n\n    return { top, left };\n};\n\n/**\n * Scroll to a given element.\n * The element will be scrolled to the top of the scroll container.\n *\n * @param {Node} el - The element which should be scrolled to.\n * @param {Node} scroll_container - The element which is scrollable.\n * @param {number} [offset=0] - Optional offset in pixels to stop scrolling before the target position. Can also be a negative number.\n * @param {string} [direction=\"top\"] - The direction to scroll to. Can be either \"top\", \"left\" or \"both\".\n */\nconst scroll_to_element = (el, scroll_container, offset = 0, direction = \"top\") => {\n    // Get the position of the element relative to the scroll container.\n    const position = get_relative_position(el, scroll_container);\n\n    const options = { behavior: \"auto\" };\n    if (direction === \"top\" || direction === \"both\") {\n        options.top = position.top - offset;\n    }\n    if (direction === \"left\" || direction === \"both\") {\n        options.left = position.left - offset;\n    }\n\n    // Scroll to the target position.\n    scroll_container.scrollTo(options);\n};\n\n/**\n * Scroll to the top of a scrolling container.\n *\n * @param {Node} [scroll_container = document.body] - The element which is scrollable.\n * @param {number} [offset=0] - Optional offset in pixels to stop scrolling before the target position. Can also be a negative number.\n */\nconst scroll_to_top = (scroll_container = document.body, offset = 0) => {\n    // Just scroll up, period.\n    scroll_container.scrollTo({ top: 0 - offset, behavior: \"auto\" });\n};\n\n/**\n * Scroll to the bottom of a scrolling container.\n *\n * @param {Node} [scroll_container = document.body] - The element which is scrollable.\n * @param {number} [offset=0] - Optional offset in pixels to stop scrolling before the target position. Can also be a negative number.\n */\nconst scroll_to_bottom = (scroll_container = document.body, offset = 0) => {\n    // Just scroll up, period.\n    //\n    const top = (scroll_container === window ? document.body : scroll_container)\n        .scrollHeight;\n    scroll_container.scrollTo({ top: top - offset, behavior: \"auto\" });\n};\n\n/**\n * Get data stored directly on the node instance.\n * We are using a prefix to make sure the data doesn't collide with other attributes.\n *\n * @param el {Node} - The DOM node from which we want to retrieve the data.\n * @param name {String} - The name of the variable. Note - this is stored on\n *                        the DOM node prefixed with the DATA_PREFIX.\n * @param default_value {Any} - Optional default value.\n * @returns {Any} - The value which is stored on the DOM node.\n */\nconst get_data = (el, name, default_value) => {\n    return el[`${DATA_PREFIX}${name}`] || default_value;\n};\n\n/**\n * Set and store data directly on the node instance.\n * We are using a prefix to make sure the data doesn't collide with other attributes.\n *\n * @param el {Node} - The DOM node which we want to store the data on.\n * @param name {String} - The name of the variable. Note - this is stored on\n *                        the DOM node prefixed with the DATA_PREFIX.\n * @param value {Any} - The value we want to store on the DOM node.\n */\nconst set_data = (el, name, value) => {\n    el[`${DATA_PREFIX}${name}`] = value;\n};\n\n/**\n * Delete a variable from the node instance.\n * We are using a prefix to make sure the data doesn't collide with other attributes.\n *\n * @param el {Node} - The DOM node which we want to delete the variable from.\n * @param name {String} - The name of the variable. Note - this is stored on\n *                        the DOM node prefixed with the DATA_PREFIX.\n */\nconst delete_data = (el, name) => {\n    delete el[`${DATA_PREFIX}${name}`];\n};\n\n/**\n * Simple template engine, based on JS template literal\n *\n * NOTE: This uses eval and would break if Content-Security-Policy does not\n *       allow 'unsafe-eval'.\n *       Because of this CSR problem the use of this method is not recommended.\n *\n * Please note: You cannot pass a template literal as template_string.\n * JavaScript itself would try to expand it and would fail.\n *\n * See: https://stackoverflow.com/a/37217166/1337474\n *\n * @param {String} template_string - The template string as a JavaScript template literal.\n *                                   For each variable in the template you have to use ``this``.\n *                                   E.g. if you pass ``{message: \"ok\"}`` as template_variables, you can use it like so:\n *                                   `<h1>${this.message}</h1>`\n * @param {Object} template_variables - Object literal with all the variables which should be used in the template.\n *\n * @returns {String} - Returns the a string as template expanded with the template_variables.\n */\nconst template = (template_string, template_variables = {}) => {\n    logger.warn(\n        \"Using dom.template is not recommended due to a problem with Content-Security-Policy.\"\n    );\n    return new Function(\"return `\" + template_string + \"`;\").call(template_variables);\n};\n\n/**\n * Get the visible ratio of an element compared to container.\n * If no container is given, the viewport is used.\n *\n * Note: currently only vertical ratio is supported.\n *\n * @param {Node} el - The element to get the visible ratio from.\n * @param {Node} [container] - The container to compare the element to.\n * @returns {number} - The visible ratio of the element.\n *                    0 means the element is not visible.\n *                    1 means the element is fully visible.\n */\nconst get_visible_ratio = (el, container) => {\n    if (!el) {\n        return 0;\n    }\n\n    const rect = el.getBoundingClientRect();\n    const container_rect =\n        container !== window\n            ? container.getBoundingClientRect()\n            : {\n                  top: 0,\n                  bottom: window.innerHeight,\n              };\n\n    let visible_ratio = 0;\n    if (rect.top < container_rect.bottom && rect.bottom > container_rect.top) {\n        const rect_height = rect.bottom - rect.top;\n        const visible_height =\n            Math.min(rect.bottom, container_rect.bottom) -\n            Math.max(rect.top, container_rect.top);\n        visible_ratio = visible_height / rect_height;\n    }\n\n    return visible_ratio;\n};\n\n/**\n * Get an escaped CSS selector for a given id string.\n *\n * id selectors should - but don't have to - start with a letter.\n * If the id starts with a number or a dash, it should be escaped.\n * This method does that for you.\n *\n * Alse see:\n * - https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id\n * - https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape\n *\n * @param {String} id - The id to escape.\n *\n * @returns {String} - The escaped CSS selector.\n *\n * @example\n * escape_css_id_selector(\"#123\"); // returns \"#\\\\31 23\"\"\n * escape_css_id_selector(\"#-123\"); // returns \"#-\\\\31 23\"\n */\nconst escape_css_id = (id) => {\n    return `#${CSS.escape(id.split(\"#\")[1])}`;\n};\n\n/**\n * Set and get a universally unique id (uuid) for a DOM element.\n *\n * This method returns a uuid for the given element. On the first call it will\n * generate a uuid and store it on the element.\n *\n * @param {Node} el - The DOM node to get the uuid for.\n * @returns {String} - The uuid.\n */\nconst element_uuid = (el) => {\n    if (!get_data(el, \"uuid\", false)) {\n        set_data(el, \"uuid\", create_uuid());\n    }\n    return get_data(el, \"uuid\");\n};\n\n/**\n * Find a related form element.\n *\n * @param {Node} el - The DOM node to start the search from.\n * @returns {Node} - The closest form element.\n *\n * @example\n * find_form(document.querySelector(\"input\"));\n */\nconst find_form = (el) => {\n    // Prefer input.form which allows for input outside form elements and fall\n    // back to search for a parent form.\n    const form =\n        el.closest(\".pat-subform\") || // Special Patternslib subform concept has precedence.\n        el.form ||\n        el.querySelector(INPUT_SELECTOR)?.form ||\n        el.closest(\"form\");\n    return form;\n};\n\n/**\n * Find any input type.\n */\nconst find_inputs = (el) => {\n    return querySelectorAllAndMe(el, INPUT_SELECTOR);\n};\n\nconst dom = {\n    document_ready: document_ready,\n    toNodeArray: toNodeArray,\n    querySelectorAllAndMe: querySelectorAllAndMe,\n    wrap: wrap,\n    hide: hide,\n    show: show,\n    find_inputs: find_inputs,\n    find_parents: find_parents,\n    find_scoped: find_scoped,\n    get_parents: get_parents,\n    acquire_attribute: acquire_attribute,\n    is_visible: is_visible,\n    is_input: is_input,\n    is_button: is_button,\n    create_from_string: create_from_string,\n    get_css_value: get_css_value,\n    find_scroll_container: find_scroll_container,\n    get_scroll_x: get_scroll_x,\n    get_scroll_y: get_scroll_y,\n    get_relative_position: get_relative_position,\n    scroll_to_element: scroll_to_element,\n    scroll_to_top: scroll_to_top,\n    scroll_to_bottom: scroll_to_bottom,\n    get_data: get_data,\n    set_data: set_data,\n    delete_data: delete_data,\n    template: template,\n    get_visible_ratio: get_visible_ratio,\n    escape_css_id: escape_css_id,\n    element_uuid: element_uuid,\n    find_form: find_form,\n};\n\nexport default dom;\n","var map = {\n\t\"./af.js\": [\n\t\t25177,\n\t\t95093,\n\t\t25177\n\t],\n\t\"./ar-dz.js\": [\n\t\t41488,\n\t\t95093,\n\t\t41488\n\t],\n\t\"./ar-kw.js\": [\n\t\t58676,\n\t\t95093,\n\t\t58676\n\t],\n\t\"./ar-ly.js\": [\n\t\t42353,\n\t\t95093,\n\t\t42353\n\t],\n\t\"./ar-ma.js\": [\n\t\t24496,\n\t\t95093,\n\t\t24496\n\t],\n\t\"./ar-ps.js\": [\n\t\t6947,\n\t\t95093,\n\t\t6947\n\t],\n\t\"./ar-sa.js\": [\n\t\t82682,\n\t\t95093,\n\t\t82682\n\t],\n\t\"./ar-tn.js\": [\n\t\t89756,\n\t\t95093,\n\t\t89756\n\t],\n\t\"./ar.js\": [\n\t\t61509,\n\t\t95093,\n\t\t61509\n\t],\n\t\"./az.js\": [\n\t\t95533,\n\t\t95093,\n\t\t95533\n\t],\n\t\"./be.js\": [\n\t\t28959,\n\t\t95093,\n\t\t28959\n\t],\n\t\"./bg.js\": [\n\t\t47777,\n\t\t95093,\n\t\t47777\n\t],\n\t\"./bm.js\": [\n\t\t54903,\n\t\t95093,\n\t\t54903\n\t],\n\t\"./bn-bd.js\": [\n\t\t17357,\n\t\t95093,\n\t\t17357\n\t],\n\t\"./bn.js\": [\n\t\t61290,\n\t\t95093,\n\t\t61290\n\t],\n\t\"./bo.js\": [\n\t\t31545,\n\t\t95093,\n\t\t31545\n\t],\n\t\"./br.js\": [\n\t\t11470,\n\t\t95093,\n\t\t11470\n\t],\n\t\"./bs.js\": [\n\t\t44429,\n\t\t95093,\n\t\t44429\n\t],\n\t\"./ca.js\": [\n\t\t7306,\n\t\t95093,\n\t\t7306\n\t],\n\t\"./cs.js\": [\n\t\t56464,\n\t\t95093,\n\t\t56464\n\t],\n\t\"./cv.js\": [\n\t\t73635,\n\t\t95093,\n\t\t73635\n\t],\n\t\"./cy.js\": [\n\t\t64226,\n\t\t95093,\n\t\t64226\n\t],\n\t\"./da.js\": [\n\t\t93601,\n\t\t95093,\n\t\t93601\n\t],\n\t\"./de-at.js\": [\n\t\t26111,\n\t\t95093,\n\t\t26111\n\t],\n\t\"./de-ch.js\": [\n\t\t54697,\n\t\t95093,\n\t\t54697\n\t],\n\t\"./de.js\": [\n\t\t77853,\n\t\t95093,\n\t\t77853\n\t],\n\t\"./dv.js\": [\n\t\t60708,\n\t\t95093,\n\t\t60708\n\t],\n\t\"./el.js\": [\n\t\t54691,\n\t\t95093,\n\t\t54691\n\t],\n\t\"./en-au.js\": [\n\t\t53872,\n\t\t95093,\n\t\t53872\n\t],\n\t\"./en-ca.js\": [\n\t\t28298,\n\t\t95093,\n\t\t28298\n\t],\n\t\"./en-gb.js\": [\n\t\t56195,\n\t\t95093,\n\t\t56195\n\t],\n\t\"./en-ie.js\": [\n\t\t66584,\n\t\t95093,\n\t\t66584\n\t],\n\t\"./en-il.js\": [\n\t\t65543,\n\t\t95093,\n\t\t65543\n\t],\n\t\"./en-in.js\": [\n\t\t9033,\n\t\t95093,\n\t\t9033\n\t],\n\t\"./en-nz.js\": [\n\t\t79402,\n\t\t95093,\n\t\t79402\n\t],\n\t\"./en-sg.js\": [\n\t\t43004,\n\t\t95093,\n\t\t43004\n\t],\n\t\"./eo.js\": [\n\t\t32934,\n\t\t95093,\n\t\t32934\n\t],\n\t\"./es-do.js\": [\n\t\t20838,\n\t\t95093,\n\t\t20838\n\t],\n\t\"./es-mx.js\": [\n\t\t17730,\n\t\t95093,\n\t\t17730\n\t],\n\t\"./es-us.js\": [\n\t\t56575,\n\t\t95093,\n\t\t56575\n\t],\n\t\"./es.js\": [\n\t\t97650,\n\t\t95093,\n\t\t97650\n\t],\n\t\"./et.js\": [\n\t\t3035,\n\t\t95093,\n\t\t3035\n\t],\n\t\"./eu.js\": [\n\t\t3508,\n\t\t95093,\n\t\t3508\n\t],\n\t\"./fa.js\": [\n\t\t119,\n\t\t95093,\n\t\t119\n\t],\n\t\"./fi.js\": [\n\t\t90527,\n\t\t95093,\n\t\t90527\n\t],\n\t\"./fil.js\": [\n\t\t95995,\n\t\t95093,\n\t\t95995\n\t],\n\t\"./fo.js\": [\n\t\t52477,\n\t\t95093,\n\t\t52477\n\t],\n\t\"./fr-ca.js\": [\n\t\t26435,\n\t\t95093,\n\t\t26435\n\t],\n\t\"./fr-ch.js\": [\n\t\t37892,\n\t\t95093,\n\t\t37892\n\t],\n\t\"./fr.js\": [\n\t\t85498,\n\t\t95093,\n\t\t85498\n\t],\n\t\"./fy.js\": [\n\t\t37071,\n\t\t95093,\n\t\t37071\n\t],\n\t\"./ga.js\": [\n\t\t41734,\n\t\t95093,\n\t\t41734\n\t],\n\t\"./gd.js\": [\n\t\t70217,\n\t\t95093,\n\t\t70217\n\t],\n\t\"./gl.js\": [\n\t\t77329,\n\t\t95093,\n\t\t77329\n\t],\n\t\"./gom-deva.js\": [\n\t\t32124,\n\t\t95093,\n\t\t32124\n\t],\n\t\"./gom-latn.js\": [\n\t\t93383,\n\t\t95093,\n\t\t93383\n\t],\n\t\"./gu.js\": [\n\t\t95050,\n\t\t95093,\n\t\t95050\n\t],\n\t\"./he.js\": [\n\t\t11713,\n\t\t95093,\n\t\t11713\n\t],\n\t\"./hi.js\": [\n\t\t43861,\n\t\t95093,\n\t\t43861\n\t],\n\t\"./hr.js\": [\n\t\t26308,\n\t\t95093,\n\t\t26308\n\t],\n\t\"./hu.js\": [\n\t\t90609,\n\t\t95093,\n\t\t90609\n\t],\n\t\"./hy-am.js\": [\n\t\t17160,\n\t\t95093,\n\t\t17160\n\t],\n\t\"./id.js\": [\n\t\t74063,\n\t\t95093,\n\t\t74063\n\t],\n\t\"./is.js\": [\n\t\t89374,\n\t\t95093,\n\t\t89374\n\t],\n\t\"./it-ch.js\": [\n\t\t21827,\n\t\t95093,\n\t\t21827\n\t],\n\t\"./it.js\": [\n\t\t88383,\n\t\t95093,\n\t\t88383\n\t],\n\t\"./ja.js\": [\n\t\t23827,\n\t\t95093,\n\t\t23827\n\t],\n\t\"./jv.js\": [\n\t\t89722,\n\t\t95093,\n\t\t89722\n\t],\n\t\"./ka.js\": [\n\t\t41794,\n\t\t95093,\n\t\t41794\n\t],\n\t\"./kk.js\": [\n\t\t27088,\n\t\t95093,\n\t\t27088\n\t],\n\t\"./km.js\": [\n\t\t96870,\n\t\t95093,\n\t\t96870\n\t],\n\t\"./kn.js\": [\n\t\t84451,\n\t\t95093,\n\t\t84451\n\t],\n\t\"./ko.js\": [\n\t\t63164,\n\t\t95093,\n\t\t63164\n\t],\n\t\"./ku-kmr.js\": [\n\t\t6181,\n\t\t95093,\n\t\t6181\n\t],\n\t\"./ku.js\": [\n\t\t98174,\n\t\t95093,\n\t\t98174\n\t],\n\t\"./ky.js\": [\n\t\t78474,\n\t\t95093,\n\t\t78474\n\t],\n\t\"./lb.js\": [\n\t\t79680,\n\t\t95093,\n\t\t79680\n\t],\n\t\"./lo.js\": [\n\t\t15867,\n\t\t95093,\n\t\t15867\n\t],\n\t\"./lt.js\": [\n\t\t45766,\n\t\t95093,\n\t\t45766\n\t],\n\t\"./lv.js\": [\n\t\t69532,\n\t\t95093,\n\t\t69532\n\t],\n\t\"./me.js\": [\n\t\t58076,\n\t\t95093,\n\t\t58076\n\t],\n\t\"./mi.js\": [\n\t\t41848,\n\t\t95093,\n\t\t41848\n\t],\n\t\"./mk.js\": [\n\t\t30306,\n\t\t95093,\n\t\t30306\n\t],\n\t\"./ml.js\": [\n\t\t73739,\n\t\t95093,\n\t\t73739\n\t],\n\t\"./mn.js\": [\n\t\t99053,\n\t\t95093,\n\t\t99053\n\t],\n\t\"./mr.js\": [\n\t\t86169,\n\t\t95093,\n\t\t86169\n\t],\n\t\"./ms-my.js\": [\n\t\t92297,\n\t\t95093,\n\t\t92297\n\t],\n\t\"./ms.js\": [\n\t\t73386,\n\t\t95093,\n\t\t73386\n\t],\n\t\"./mt.js\": [\n\t\t77075,\n\t\t95093,\n\t\t77075\n\t],\n\t\"./my.js\": [\n\t\t72264,\n\t\t95093,\n\t\t72264\n\t],\n\t\"./nb.js\": [\n\t\t22274,\n\t\t95093,\n\t\t22274\n\t],\n\t\"./ne.js\": [\n\t\t8235,\n\t\t95093,\n\t\t8235\n\t],\n\t\"./nl-be.js\": [\n\t\t43784,\n\t\t95093,\n\t\t43784\n\t],\n\t\"./nl.js\": [\n\t\t92572,\n\t\t95093,\n\t\t92572\n\t],\n\t\"./nn.js\": [\n\t\t54566,\n\t\t95093,\n\t\t54566\n\t],\n\t\"./oc-lnc.js\": [\n\t\t69330,\n\t\t95093,\n\t\t69330\n\t],\n\t\"./pa-in.js\": [\n\t\t29849,\n\t\t95093,\n\t\t29849\n\t],\n\t\"./pl.js\": [\n\t\t94418,\n\t\t95093,\n\t\t94418\n\t],\n\t\"./pt-br.js\": [\n\t\t48303,\n\t\t95093,\n\t\t48303\n\t],\n\t\"./pt.js\": [\n\t\t79834,\n\t\t95093,\n\t\t79834\n\t],\n\t\"./ro.js\": [\n\t\t24457,\n\t\t95093,\n\t\t24457\n\t],\n\t\"./ru.js\": [\n\t\t82271,\n\t\t95093,\n\t\t82271\n\t],\n\t\"./sd.js\": [\n\t\t1221,\n\t\t95093,\n\t\t1221\n\t],\n\t\"./se.js\": [\n\t\t33478,\n\t\t95093,\n\t\t33478\n\t],\n\t\"./si.js\": [\n\t\t17538,\n\t\t95093,\n\t\t17538\n\t],\n\t\"./sk.js\": [\n\t\t5784,\n\t\t95093,\n\t\t5784\n\t],\n\t\"./sl.js\": [\n\t\t46637,\n\t\t95093,\n\t\t46637\n\t],\n\t\"./sq.js\": [\n\t\t86794,\n\t\t95093,\n\t\t86794\n\t],\n\t\"./sr-cyrl.js\": [\n\t\t3322,\n\t\t95093,\n\t\t3322\n\t],\n\t\"./sr.js\": [\n\t\t45719,\n\t\t95093,\n\t\t45719\n\t],\n\t\"./ss.js\": [\n\t\t56000,\n\t\t95093,\n\t\t56000\n\t],\n\t\"./sv.js\": [\n\t\t41011,\n\t\t95093,\n\t\t41011\n\t],\n\t\"./sw.js\": [\n\t\t40748,\n\t\t95093,\n\t\t40748\n\t],\n\t\"./ta.js\": [\n\t\t11025,\n\t\t95093,\n\t\t11025\n\t],\n\t\"./te.js\": [\n\t\t11885,\n\t\t95093,\n\t\t11885\n\t],\n\t\"./tet.js\": [\n\t\t28861,\n\t\t95093,\n\t\t28861\n\t],\n\t\"./tg.js\": [\n\t\t86571,\n\t\t95093,\n\t\t86571\n\t],\n\t\"./th.js\": [\n\t\t55802,\n\t\t95093,\n\t\t55802\n\t],\n\t\"./tk.js\": [\n\t\t59527,\n\t\t95093,\n\t\t59527\n\t],\n\t\"./tl-ph.js\": [\n\t\t29231,\n\t\t95093,\n\t\t29231\n\t],\n\t\"./tlh.js\": [\n\t\t31052,\n\t\t95093,\n\t\t31052\n\t],\n\t\"./tr.js\": [\n\t\t85096,\n\t\t95093,\n\t\t85096\n\t],\n\t\"./tzl.js\": [\n\t\t79846,\n\t\t95093,\n\t\t79846\n\t],\n\t\"./tzm-latn.js\": [\n\t\t97711,\n\t\t95093,\n\t\t97711\n\t],\n\t\"./tzm.js\": [\n\t\t81765,\n\t\t95093,\n\t\t81765\n\t],\n\t\"./ug-cn.js\": [\n\t\t48414,\n\t\t95093,\n\t\t48414\n\t],\n\t\"./uk.js\": [\n\t\t16618,\n\t\t95093,\n\t\t16618\n\t],\n\t\"./ur.js\": [\n\t\t57777,\n\t\t95093,\n\t\t57777\n\t],\n\t\"./uz-latn.js\": [\n\t\t72475,\n\t\t95093,\n\t\t72475\n\t],\n\t\"./uz.js\": [\n\t\t57609,\n\t\t95093,\n\t\t57609\n\t],\n\t\"./vi.js\": [\n\t\t21135,\n\t\t95093,\n\t\t21135\n\t],\n\t\"./x-pseudo.js\": [\n\t\t64051,\n\t\t95093,\n\t\t64051\n\t],\n\t\"./yo.js\": [\n\t\t82218,\n\t\t95093,\n\t\t82218\n\t],\n\t\"./zh-cn.js\": [\n\t\t52648,\n\t\t95093,\n\t\t52648\n\t],\n\t\"./zh-hk.js\": [\n\t\t1632,\n\t\t95093,\n\t\t1632\n\t],\n\t\"./zh-mo.js\": [\n\t\t31541,\n\t\t95093,\n\t\t31541\n\t],\n\t\"./zh-tw.js\": [\n\t\t50304,\n\t\t95093,\n\t\t50304\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 7 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 89595;\nmodule.exports = webpackAsyncContext;","import $ from \"jquery\";\nimport { BasePattern } from \"../../core/basepattern\";\nimport logging from \"../../core/logging\";\nimport Parser from \"../../core/parser\";\nimport events from \"../../core/events\";\nimport registry from \"../../core/registry\";\nimport utils from \"../../core/utils\";\n\n// Initialize close-panel functionality.\nimport \"../close-panel/close-panel\";\n\nconst log = logging.getLogger(\"pat-tooltip\");\n\nexport const parser = new Parser(\"tooltip\");\nconst all_positions = [\n    \"tl\",\n    \"tm\",\n    \"tr\",\n    \"rt\",\n    \"rm\",\n    \"rb\",\n    \"br\",\n    \"bm\",\n    \"bl\",\n    \"lb\",\n    \"lm\",\n    \"lt\",\n];\nparser.addArgument(\"position-list\", [], all_positions, true);\nparser.addArgument(\"position-policy\", \"auto\", [\"auto\", \"force\"]);\nparser.addArgument(\"trigger\", \"click\", [\"click\", \"hover\", \"none\"]);\nparser.addArgument(\"source\", \"title\", [\"ajax\", \"content\", \"title\"]);\nparser.addArgument(\"ajax-data-type\", \"html\", [\"html\", \"markdown\"]);\nparser.addArgument(\"closing\", \"auto\", [\"auto\", \"sticky\", \"close-button\"]);\nparser.addArgument(\"delay\");\nparser.addArgument(\"mark-inactive\", true);\nparser.addArgument(\"class\");\nparser.addArgument(\"target\", \"body\");\nparser.addArgument(\"arrow-padding\", null);\nparser.addArgument(\"url\", null);\n\n// Tippy Lifecycle-hooks\n// See: https://tippyjs.bootcss.com/lifecycle-hooks/\n// onCreate\n// onTrigger\n// onShow\n// onMount\n// onShown\n// onUntrigger\n// onHide\n// onHidden\n//\n// onBeforeUpdate\n// onAfterUpdate\n// onDestroy\n\nclass Pattern extends BasePattern {\n    static name = \"tooltip\";\n    static trigger = \".pat-tooltip, .pat-tooltip-ng\";\n    static parser = parser;\n\n    tippy = null;\n\n    active_class = \"tooltip-active-hover\";\n    inactive_class = \"tooltip-inactive\";\n\n    async init() {\n        const el = this.el;\n\n        if (window.__patternslib_import_styles) {\n            import(\"tippy.js/dist/tippy.css\");\n        }\n        const Tippy = (await import(\"tippy.js\")).default;\n        this.tippy_options = this.parseOptionsForTippy(this.options);\n\n        const defaultProps = {\n            animation: false,\n            arrow: true,\n            //'delay': [0, 1800],\n            //'duration': [325, 275],\n            hideOnClick: this.options.closing === \"close-button\" ? false : true,\n            ignoreAttributes: true,\n            interactive: true,\n            onHide: this._onHide.bind(this),\n            onShow: this._onShow.bind(this),\n            trigger: \"click\",\n        };\n\n        Tippy.setDefaultProps(defaultProps);\n        this.tippy = new Tippy(el, this.tippy_options);\n\n        if (this.options.source === \"title\") {\n            // Remove ``title`` attribute when source is set to ``title`` to\n            // disable the browser's built-in tooltip feature\n            el.removeAttribute(\"title\");\n        }\n\n        if (this.options.trigger === \"click\" && this.options.source === \"ajax\") {\n            // prevent default action for \"click\" and \"mouseenter click\"\n            events.add_event_listener(\n                el,\n                \"click\",\n                \"pat-tooltip--click-prevent-default\",\n                (event) => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                }\n            );\n        }\n\n        if (this.options.trigger === \"click\") {\n            this.active_class = \"tooltip-active-click\";\n        }\n        if (this.options.markInactive) {\n            // Initially mark as inactive\n            el.classList.add(this.inactive_class);\n        }\n    }\n\n    show() {\n        // Show this tooltip\n        this.tippy.show();\n    }\n\n    async hide() {\n        // Hide this tooltip\n        await utils.timeout(1); // wait a tick for event being processed by other handlers.\n        this.tippy.hide();\n    }\n\n    destroy() {\n        // Remove this tooltip\n        super.destroy(); // Unregister\n        this.tippy.destroy();\n    }\n\n    parseOptionsForTippy(opts) {\n        const placement = (pos) => {\n            // note that Cornelis needs the positioning to be the placement of the thingy on the bubble\n            // tippy though refers to positioning as the placement of the bubble relatively to the reference element\n            // so we invert the meaning below. It's intentional.\n            const primary = (pos0) =>\n                ({\n                    t: \"bottom\",\n                    r: \"left\",\n                    b: \"top\",\n                    l: \"right\",\n                }[pos0]);\n\n            const secondary = (pos1) =>\n                ({\n                    l: \"-start\",\n                    r: \"-end\",\n                    m: \"\",\n                    t: \"-start\",\n                    b: \"-end\",\n                }[pos1]);\n\n            return `${primary(pos[0])}${secondary(pos[1])}`;\n        };\n\n        const tippy_options = { popperOptions: { modifiers: [] } };\n\n        if (opts.arrowPadding !== null) {\n            tippy_options.popperOptions.modifiers.push({\n                name: \"arrow\",\n                options: {\n                    padding: parseInt(opts.arrowPadding, 10),\n                },\n            });\n        }\n\n        const parsers = {\n            position: () => {\n                if (!opts.position?.list?.length) {\n                    return;\n                }\n                tippy_options.placement = placement(opts.position.list[0]); // main position\n\n                const flip_options = {\n                    name: \"flip\",\n                    enabled: true,\n                };\n\n                if (opts.position.policy === \"force\") {\n                    flip_options.enabled = false;\n                } else if (opts.position.length > 1) {\n                    const fallbacks = opts.position.list.slice(1).map(placement);\n                    flip_options.fallbackPlacements = fallbacks;\n                }\n\n                tippy_options.popperOptions.modifiers.push(flip_options);\n            },\n\n            trigger() {\n                if (opts.trigger === \"hover\") {\n                    tippy_options.trigger = \"mouseenter focus\";\n                } else if (opts.trigger === \"none\") {\n                    tippy_options.trigger = \"manual\";\n                    tippy_options.hideOnClick = false;\n                }\n            },\n\n            source: () => {\n                let content;\n                if (opts.source === \"title\") {\n                    // Tooltip content from title attribute\n                    content = this.el.getAttribute(\"title\");\n                } else if (opts.source === \"content\") {\n                    // Tooltip content from trigger childs.\n                    content = this.el.innerHTML;\n                    tippy_options.allowHTML = true;\n                } else if (opts.source === \"ajax\") {\n                    // Tooltiop content from AJAX request.\n                    content = document.createElement(\"progress\");\n                    tippy_options.allowHTML = true;\n                }\n                tippy_options.content = content;\n            },\n\n            delay() {\n                if (opts.delay) {\n                    tippy_options.delay = [utils.parseTime(opts.delay), 0];\n                }\n            },\n\n            target: () => {\n                if (!opts.target) {\n                    return;\n                }\n                if (opts.target === \"parent\") {\n                    tippy_options.appendTo = \"parent\";\n                } else if (opts.target === \"body\") {\n                    tippy_options.appendTo = document.body;\n                } else {\n                    tippy_options.appendTo = document.querySelector(opts.target);\n                }\n            },\n        };\n\n        for (let arg in opts) {\n            switch (arg) {\n                case \"ajax-data-type\":\n                    arg = \"ajaxDataType\";\n                    break;\n                case \"mark-inactive\":\n                    arg = \"markInactive\";\n                    break;\n            }\n            parsers[arg] && parsers[arg](arg);\n        }\n\n        return tippy_options;\n    }\n\n    _initialize_content() {\n        // Initialize any other patterns.\n        registry.scan(this.tippy.popper);\n    }\n\n    async _onShow() {\n        const tippy_classes = [];\n\n        // Group DOM manipulations\n\n        if (this.options.class) {\n            tippy_classes.push(...this.options.class.split(\" \"));\n        }\n\n        // Add a generic non-tippy related class to identify the tooltip container\n        tippy_classes.push(\"tooltip-container\");\n\n        if (this.options.closing === \"close-button\") {\n            // First, remove previously automatically added close buttons.\n            // Otherwise we would end up adding another close button with every\n            // click on it.\n            for (const close_button of this.tippy.popper.querySelectorAll(\n                \".pat-tooltip--close-button\"\n            )) {\n                close_button.remove();\n            }\n\n            const close_button = document.createElement(\"button\");\n            close_button.setAttribute(\"class\", \"close-panel pat-tooltip--close-button\");\n            const content = this.tippy.popper.querySelector(\".tippy-content\");\n            content.parentNode.insertBefore(close_button, content);\n        }\n\n        // Store reference to method for closing panels on the tooltip element instance.\n        events.add_event_listener(\n            this.tippy.popper,\n            \"close-panel\",\n            \"pat-tooltip--close-panel\",\n            () => this.hide()\n        );\n\n        this.tippy.popper.classList.add(...tippy_classes);\n\n        if (this.options.markInactive) {\n            this.el.classList.remove(this.inactive_class);\n            this.el.classList.add(this.active_class);\n        }\n\n        if (this.options.closing !== \"auto\" && this.options.trigger === \"hover\") {\n            // no auto-close when hovering when closing mode is \"sticky\" or \"close-button\".\n            this.tippy.setProps({ trigger: \"click\" });\n        }\n\n        if (this.options.source === \"ajax\") {\n            await this._get_content();\n        }\n\n        // Notify parent patterns about injected content.\n        // Do not call pat-inject's handler, because all necessary\n        // initialization after injection is done here.\n        $(this.tippy.popper).trigger(\"patterns-injected\", [\n            { skipPatInjectHandler: true },\n            this.el,\n            this.tippy.popper,\n        ]);\n\n        this._initialize_content();\n    }\n\n    _onHide() {\n        if (this.options.markInactive) {\n            this.el.classList.remove(this.active_class);\n            this.el.classList.add(this.inactive_class);\n        }\n\n        if (this.options.closing !== \"auto\" && this.options.trigger === \"hover\") {\n            // re-set hover behavior\n            this.tippy.setProps({ trigger: \"mouseenter focus\" });\n        }\n\n        if (this.options.source === \"ajax\") {\n            this.tippy.setContent(document.createElement(\"progress\"));\n        }\n    }\n\n    async _get_content(url = this.options.url) {\n        let selector;\n        ({ url, selector } = this.get_url_parts(url || this.el.getAttribute(\"href\")));\n        let content;\n        if (url) {\n            // Tooltip from remote page.\n            const handler = this.data_type_handlers[this.options.ajaxDataType];\n            try {\n                // TODO: use pat-inject, once it supports async\n                const response = await fetch(url, {\n                    headers: {\n                        Accept: \"text/html,application/xhtml+xml,application/xml\",\n                    },\n                });\n                const text = await response.text();\n                content = await handler(text, url, selector);\n            } catch {\n                log.error(\"Error on ajax request. ${e}\");\n            }\n        } else if (selector) {\n            // Tooltip content from current DOM tree.\n            content = document.querySelector(selector);\n            content = content?.innerHTML || undefined;\n        }\n        if (content) {\n            this.tippy.setContent(content);\n            await utils.timeout(1); // Wait a tick before forceUpdate. Might fail due to unset popperInstance.\n            this.tippy.popperInstance.forceUpdate(); // re-position tippy after content is known.\n        }\n    }\n\n    async get_content(url = this.options.url) {\n        // API method: _get_content + _initialize_content\n        await this._get_content(url);\n        this._initialize_content();\n    }\n\n    get_url_parts(href) {\n        // Return the URL and a CSS ID selector.\n        let url, selector, query;\n        if (!href) {\n            return { url, selector };\n        }\n        [url, selector] = href.split(\"#\");\n        if (selector) {\n            selector = `#${selector}`;\n            [selector, query] = selector.split(\"?\");\n        }\n        if (query) {\n            url = `${url}?${query}`;\n        }\n        return { url, selector };\n    }\n\n    static data_type_handlers = {\n        html(text, url, selector) {\n            let tmp = document.createElement(\"div\");\n            tmp.innerHTML = text;\n            if (selector) {\n                tmp = tmp.querySelector(selector);\n            }\n            return tmp?.innerHTML || \"\";\n        },\n\n        async markdown(text, url, selector) {\n            const Markdown = registry.patterns.markdown;\n            if (!Markdown) {\n                return text;\n            }\n\n            const instance = new Markdown($(\"<div/>\"));\n            await events.await_pattern_init(instance);\n\n            const cfg = { url };\n            if (selector) {\n                cfg.source = selector;\n            }\n\n            const ret = await instance.renderForInjection(cfg, text);\n            return ret[0];\n        },\n    };\n\n    static register_type_handler(type, handler) {\n        Pattern.data_type_handlers[type] = handler;\n    }\n\n    constructor(...args) {\n        super(...args);\n\n        this.register_type_handler = this.constructor.register_type_handler;\n        this.data_type_handlers = this.constructor.data_type_handlers;\n    }\n}\n\nregistry.register(Pattern);\nexport default Pattern;\nexport { Pattern };\n"],"names":["event_listener_map","Map","remove_event_listener","el","id","els","keys","removeEventListener","el_events","get","entries","filter","entry","utils","regexp_from_wildcard","test","delete","size","UpdateEvent","CustomEvent","constructor","options","super","bubbles","cancelable","detail","add_event_listener","event_type","cb","opts","arguments","length","undefined","addEventListener","has","set","_cb","once","e","capture","await_event","event_name","Promise","resolve","await_pattern_init","pattern","reject","one","target","name","catch","Error","generic_event","Event","update_event","blur_event","click_event","change_event","focus_event","input_event","mousedown_event","mouseup_event","scroll_event","submit_event","submitter","event","dragstart_event","dragend_event","log","logging","getLogger","Storage","backend","prefix","this","ValueStorage","store","prototype","_key","_allKeys","key","i","prefix_length","slice","push","value","getItem","JSON","parse","warn","setItem","stringify","remove","removeItem","clear","all","data","supported","local","window","localStorage","session","sessionStorage","updateOptions","trigger","root","writer","Function","bind","oThis","TypeError","aArgs","Array","call","fToBind","fNOP","fBound","apply","concat","Level","DEBUG","INFO","WARN","ERROR","FATAL","ConsoleWriter","Logger","parent","_loggers","_parent","_enabled","_level","setWriter","w","output","log_name","level","messages","unshift","console","debug","info","error","path","split","route","shift","join","_getFlag","flag","context","setEnabled","state","isEnabled","setLevel","toUpperCase","getLevel","fatal","match","logconfig","exec","location","search","api","getWriter","parser","Parser","addArgument","add_argument","addAlias","storage","Base","extend","format","init","disabled","$","after","befores","document","querySelectorAll","b_el","b_date","Date","a_date","offset","offsetDays","setDate","getDate","toISOString","substring","dispatch_change_event","display_el","behavior","dom","hide","createElement","setAttribute","classList","add","insertAdjacentElement","label","closest","pat_display_time","events","preventDefault","outputFormat","PatDisplayTime","default","display_time_config","locale","textContent","_add_additional","add_clear_button","placeholder","innerHTML","on","checkInputSupport","getAttribute","__patternslib_import_styles","Pikaday","config","field","firstDay","showWeekNumber","weekNumbers","onSelect","onClose","dispatchEvent","minDate","maxDate","i18n","response","fetch","json","pikaday","el_append_to","required","clear_button","stopPropagation","appendChild","firedBy","form","BasePattern","static","parser_group_options","parser_multiple","parser_inherit","jquery","uuid","create_uuid","setTimeout","async","emit_update","action","event_callback","destroy","SubmitEvent","last_btn","submitable_buttons","canditates","activeElement","candidate","matches","querySelector","navigation","NavigateEvent","destination","url","create_event","args","pushState","history","replaceState","map","webpackAsyncContext","req","__webpack_require__","o","then","code","ids","Object","module","exports","t","disable_re","dont_catch_re","dont_catch","__patternslib_registry","PATTERN_REGISTRY","__patternslib_registry_initialized","registry","patterns","document_ready","sort","scan","body","transformPattern","content","transform","initPattern","$el","plog","orderPatterns","includes","splice","indexOf","Text","selectors","selector_string","selector","trim","replace","querySelectorAllAndMe","parentNode","reverse","register","BLACKLIST","__patternslib_patterns_blacklist","isArray","jquery_plugin","plugin_name","p1","jqueryPlugin","crypto","randomUUID","array","Uint32Array","getRandomValues","safeClone","clone","forEach","callback","thisArg","T","k","O","len","kValue","singleBoundJQueryPlugin","method","each","pat","charAt","pluralBoundJQueryPlugin","$this","isObject","obj","type","wildcard","regexp","RegExp","isElementInViewport","partial","rec","getBoundingClientRect","top","bottom","left","right","every","val","innerHeight","documentElement","clientHeight","innerWidth","clientWidth","escapeRegExp","str","source","prop","hasOwnProperty","findLabel","input","$label","nodeType","tagName","removeWildcardClass","targets","classes","ensureArray","matcher","class_list","ok","it","removeAttribute","hideOrShow","nodes","visible","pattern_name","toNodeArray","transitions","none","show","fade","slide","duration","transition","effect","on_complete","easing","complete","addURLQueryParameter","fullURL","param","parts","toString","hash","newURL","removeDuplicateObjects","objs","comparator","v","reduce","list","next_obj","is_duplicate","mergeStack","stack","results","frame","frame_length","x","hasValue","checked","selectedIndex","parseTime","time","m","amount","parseFloat","Math","round","parseLength","reference_length","min","max","findRelatives","$relatives","$form","find","get_bounds","bounds","parseInt","y","width","height","invalid_value","support","checkCSSFeature","attribute","tag","style","animation_frame","requestAnimationFrame","timeout","ms","debounce","func","timer","postpone","last_run","now","clearTimeout","isIE","documentMode","jqToNode","force_array","NodeList","isPrototypeOf","localized_isodate","date","day","padStart","month","getMonth","getFullYear","escape_html","html","createTextNode","unescape_html","escaped_html","DOMParser","parseFromString","is_iso_date_time","is_iso_date","date_diff","date_1","date_2","utc_1","UTC","utc_2","floor","threshold_list","num_steps","thresholds","is_option_truthy","option","elementInViewport","dialog_panel","close","checkValidity","logger","push_kit","exchange","topicfilter","user_login","user_pass","client","Client","brokerURL","connectHeaders","login","passcode","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","onConnect","subscribe","on_push_marker","onStompError","headers","activate","message","xhrCount","a","_","off","onTriggerEvents","onClickSubmit","request","_request","cfg","seqNumber","inc","temp","clickedData","serialize","Boolean","attr","cache","browserCache","accept","Accept","is","formdata","FormData","append","removeData","ajax_deferred","done","status","jqxhr","fail","force_method","_setup","scale","scaler","available_space","scaled_height","scaled_width","container","getComputedStyle","outerWidth","outerHeight","css","wrap","addClass","methods","settings","initialTime","exceptionAreas","lastEvent","trueTime","untouched","inExceptionArea","mouseMoved","live","enteredException","leftException","hasClass","removeClass","startTimer","fn","diff","scrollable","element","scrollHeight","scrollWidth","makeVisibleInScroll","parent_id","absoluteParent","parents","elemTop","position","elemBottom","viewTop","scrollTop","viewBottom","safeOffset","docElem","elem","origin","ownerDocument","setPositionAbsolute","offsettop","offsetleft","thiswidth","pos","setleft","settop","appendTo","positionAncestor","$ancestor","$child","childMarginEdgeLeft","childMarginEdgeTop","ancestorPaddingEdgeLeft","ancestorPaddingEdgeTop","findInclusive","addBack","slideIn","speed","animate","slideOut","Contains","text","scopedFind","namespace","setup","setupInputHandlers","registerHandlersForElement","isNumber","isText","delay","input_change_events","registerListeners","registerTriggers","onInputChange","registerSubformListeners","refreshListeners","find_form","ev","subforms","subform","injected","trigger_event","idx","separator","valueSeparator","tokenSeparators","openOnEnter","maximumSelectionSize","minimumInputLength","allowClear","hasAttribute","selectionClasses","formatSelection","SyntaxError","create_input_config","$sel2","select2","pat_depends","enabled","initiate_empty_check","words","createSearchChoice","term","allowNewWords","localeCompare","wordsJson","tags","prefill","initSelection","values","prefillJson","d","_data","ajax","dataType","quietMillis","page","request_data","q","index","page_limit","more","initial_size","batch_size","scheduled_task","Pattern","self","updated","contains","set_focus","is_visible","focus","$content","children","wrapAll","$ctrl","prependTo","shifted","shifting","difference","shifter","toggle","margin","toggleClass","maybeshift","click","recalculate","toArray","acc","ticking","target_element","parent_el","parentElement","container_x","find_scroll_container","container_y","containers","Set","set_bumping_classes","_get_container_positions","dimensions","get_css_value","_get_element_positions","positions","get_bumping_state","pos_el","pos_x","pos_y","bump_top","bump_right","bump_bottom","bump_left","is_bumping","bumping_state","classes_to_add","classes_to_remove","bump","unbump","inject","cfgs","extractConfig","some","nextHref","nodeName","href","pushMarker","onTrigger","currentTarget","idleTrigger","_initIdleTrigger","processDelay","delayed_trigger","uuid_","still_there","_initAutoloadVisible","formaction","cfg_node","params","serializeArray","execute","submitSubform","$sub","assign","$context","urlparts","defaultSelector","elementIsDirty","askForConfirmation","should_confirm","_confirm","confirm","$target","confirmMessage","ensureTarget","createTarget","$created_target","verifySingleConfig","extractModifiers","listenForFormReset","verifyConfig","source_match","target_match","sourceMod","targetMod","targetPosition","loadingClass","_performInjection","$sources","$title","wrapper","sources_string","img","source_nodes","childNodes","_inject","_update_history","_afterInjection","glue","title_el","$injected","el_","scroll","scroll_target","scroll_container","scroll_to_top","scroll_to_element","_onInjectSuccess","responseText","sources$","callTypeHandler","idx1","perform_inject","_onInjectError","explanation","timestamp","error_page","error_page_fragment","URLSearchParams","error_page_url","error_page_response","executingClass","error_zone","msg_attr","statusText","removeAttr","do_close_panel","stopImmediatePropagation","replaceWith","contentafter","contentbefore","elementafter","elementbefore","_sourcesFromHtml","sources","$html","_parseRawHtml","$source","_rebaseAttrs","object","video","_rebaseOptions","_rebaseURL","base","URL","lastIndexOf","_rebaseHTML","rebase_selector","_ref","toLowerCase","pattern_parser","changed","opt","title","clean_html","timeout_id","observer","IntersectionObserver","isIntersecting","disconnect","threshold","observe","onTimeout","unsub","onInteraction","registerTypeHandler","handler","handlers","skipPatInjectHandler","executedClass","originalEvent","reload","_init_div1","_init_inject1","class","detach","header","$children","closing","closeText","panelHeaderContent","before","_init_handlers","resize","setPosition","_onKeyUp","_onPossibleOutsideClick","which","getTallestChild","$tallest_child","child","panel_content_elem","header_elem","modal_height","classMap","agendaWeek","agendaDay","viewMap","week","basicWeek","basicDay","dayNames","active_categories","Calendar","fcDayGrid","fcInteraction","fcList","fcLuxon","fcTimeGrid","calendar_controls","calendarControls","el_jump_next","el_jump_prev","el_jump_today","el_view_month","el_view_week","el_view_day","el_view_list_year","el_view_list_month","el_view_list_week","el_view_list_day","el_timezone","el_title","storage_prefix","pathname","query_string","initialDate","initial","initialView","view","editable","plugins","eventColor","lang","acquire_attribute","substr","first","timezone","timeZone","timeFormat","eventTimeFormat","hour12","meridiem","hour","eventSources","src","create_event_source","_restoreCategoryControls","_registerCategoryControls","reset_active_categories","eventDidMount","init_event","cal_el","addUrl","dateClick","addNewEvent","mod_el","calendar","render","_viewChanged","_registerCalendarControls","setActiveClasses","success","failure","_fetch_events","className","event_mapper","ret","UID","start","end","allDay","whole_day","backgroundColor","color","borderColor","classNames","description","open_end","recurrence","attendees","contact_name","contact_phone","contact_email","event_url","setDates","setAllDay","setProp","setExtendedProp","startStr","endStr","mode","result","results_","items","batching","next","filter_event","do_scan","switch_sel","switch_add","switch_rm","ctrls","get_category_controls","ctrl_containers","categoryControls","inp","ctrl","getEvents","hidden","prev","today","changeView","setOption","cdate","currentData","currentDate","getYear","currentStart","query","getTime","addEvent","Modal","form_data","ImagesLoaded","autoplay","auto","play","autoplaySpeed","adaptiveHeight","arrows","slidesToShow","slides","slidesToScroll","dots","infinite","appendDots","$carousel","slick","$panel_links","$links","control","currentPage","onPanelLinkClick","onSlideComplete","_loadPanelImages","slider","$img","$items","eq","gotoPage","onInitialized","startPanel","pages","onSlideInit","targetPage","$targetPage","all_selects","all_deselects","all_toggles","all_checkboxes","all_radios","_init","change_handler","change_buttons_and_toggles","change_checked","find_scoped","select","btn","select_all","deselect","deselect_all","toggle_all","find_siblings","sel","res","find_checkboxes","ref_el","chkbxs","tgl","box","labels","fieldset","template","bind_trigger","clones","cloneElement","num_clones","bind_remove","alert","$clone","contents","incrementValues","clone_triggers","attributes","triggers","node","triggerElement","remove_button","behaviour","confirmation","tmp_wrapper","markup","outerHTML","ignore","_el","HTMLDocument","features","prettier","parser_html","wrapper_template","pre_code_el","debounce_scroll_timer","closed","open","$trigger","$panel","insertAfter","loadContent","_loadContent","_onClick","_onKeyPress","closeTrigger","openTrigger","Scroll","debounce_scroll","scrollTo","keyCode","components","new_state","_transit","from_cls","to_cls","promise","spectrum","preferredFormat","el_date","el_time","DatePicker","date_value","time_value","el_wrapper","html_btn_now","html_btn_clear","update","isotime","date_options","isodate","insertBefore","toTimeString","DependsHandler","condition","set_state","getAllInputs","pattern_uuid","update_modal","enable","inputs","find_inputs","is_button","disable","evaluate","equaliser","$container","_onEvent","_update","MutationObserver","childList","subtree","characterData","max_height","new_css","$folders","prepend","$folder","patExpandable","onNewContent","_doFocus","$root","ix","onChange","onFocus","_updateHasValue","onBlur","setReset","saveState","setModified","setError","setSaved","not","msg","modal","timestr","getHours","getMinutes","getSeconds","skip","on_click","Screenfull","exit","fullscreen_handler","fs_el_sel","fs_el","closeButton","setup_exit_button","exit_el","isFullscreen","removeChild","PhotoSwipe","PhotoSwipeUI","orig_body_overflow","images","get_template","initialize_trigger","raw_template","image_wrapper_els","itemSelector","initialize_gallery","h","trigger_el","pswp_el","scaleMode","scaleMethod","loop","slideshowDelay","hideAnimationDuration","effectDuration","showAnimationDuration","pinchToClose","closeOnScroll","gallery","gallery_reinit_sizes_debouncer","updateSize","listen","item","Image","onload","_e","img_el","needsUpdate","overflow","inputNames","preview","previewWidth","formId","inputPrefix","_setupInput","ic","_parseOpt","initialSel","initialCoords","aspectRatio","minSize","maxSize","c","Jcrop","onRelease","setSelect","tellSelect","updatePreview","updateInputs","rx","ry","getBounds","marginLeft","marginTop","x1","y1","x2","y2","legend","_convertToIframes","$object","$iframe","is_markdown_resource","is_input","rendered","marked","DOMPurify","parsed","sanitize","SyntaxHighlight","pre","renderForInjection","extractSection","register_external_handlers","Masonry","initMasonry","imgLoad","msnry","quicklayout","layout","attributeOldValue","attributeFilter","containerStyle","columnWidth","getTypeCastedValue","fitWidth","gutter","horizontalOrder","initLayout","originLeft","originTop","percentPosition","stamp","transitionDuration","patMasonry","original","Number","isNaN","navItemSelector","$it","mouseOverHandler","mouseOutHandler","openMenu","siblings","closeMenu","set_current_disabled","observables","link","escape_css_id","first_observable","scroll_container_height","scroll_marker_distance","distance","side","visibility","debounced_scroll_marker_current_callback","scroll_marker_current_callback","callback_cnt","scroll_marker_callback","items_by_weight","ratio_map","get_visible_ratio","b","ratio_a","ratio_b","ratio_0","distance_a","distance_b","a_rect","b_rect","abs","nearest","nearest_link","init_listeners","init_markings","scroll_marker","ScrollMarker","debounced_scroll_marker_enabler","current","clear_items","mark_current","mark_items_url","get_parent","stop_el","matching_parent","current_el","current_els","mark_in_path","content_item","start_el","path_el","current_url","base_url","current_url_prepared","prepare_url","portal_url","dataset","portalUrl","nav_items","nav_item","nav_url","replaceAll","count","_init_inject","_init_notification","closetext","onMouseEnter","onMouseLeave","controls","create_from_string","onClick","healing","set_data","opacity","init_remove_timer","$temp","panel","get_data","stop","step","slideUp","rfp_key","Notification","permission","desktop_notification__request_permission","pushId","desktop_notification","insertAdjacentHTML","requestPermission","notification","scroll_listener","last_known_scroll_position","timeout_id__scroll_stop","overflowY","set_scroll_classes","clear_scrolling_classes","timeoutStop","scroll_pos","get_scroll_y","to_add","KEY_RESET","form_reset","change_select","UrlArgumentParser","_cache","_reset","space_pattern","keyvalue_pattern","_decodeQS","bit","decodeURIComponent","_parse","qs","parameters","url_parser","real_cleanData","elems","triggerHandler","requested_ids","_collapse_ids","_remove_slides","presentation","Presentation","_onSlideDisplay","_onSlideHide","_hook","paused","currentTime","pause","$shows","has_bad_id","recordPositions","initScrolling","onPatternUpdate","$sortables","addHandles","sortable","handles","handle","onDragStart","onDragEnd","scrollup","scrolldn","zIndex","newpos","$dragged","dragClass","change","submitChangedAmount","drop","$amount_input","old_position","new_position","direction","that","dataTransfer","setData","effectAllowed","setDragImage","clientY","$dropTarget","midlineY","_setupStack","selected","_currentFragment","$sheets","$active","$invisible","_updateAnchors","_base_URL","href_parts","_switch","sheet","$anchors","sheet_id","submit","keyboard_handler","submitClicked","scopedSubmit","$exclude","names","$button","$subform","previousValue","_validateOptions","_go","_storage","correct","logged_error","code_el","theme","hljs","high","language","startsWith","lang_file","atom","plist","rss","svg","wsf","xhtml","xjb","xsd","xsl","hljs_language","registerLanguage","highlight","highlightAuto","allowed_update_patterns","debounced_resize","adjust_tabs","previous_parent_width","resize_observer","ResizeObserver","contentRect","_flatten_tabs","_get_dimensions","_adjust_tabs","extra_wrapper","border_left","padding_left","border_right","padding_right","max_width","max_x","children_no_extra","last_x","tabs_fit","it_x","it_w","extra_tabs","pop","ClassToggler","AttributeToggler","value_storage","victims","toggler","last_state","victim","click_debouncer","_makeToggler","next_state","KEY_ERROR_EL","KEY_ERROR_MSG","check_input","initialize_inputs","disabled_elements","disableSelector","cnt","debouncer","set_error","skip_event","validity_state","validity","badInput","customError","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valid","valueMissing","input_options","equality","datetime","msg_default_not_before","msg_default_not_after","not_after","not_after_el","not_before","not_before_el","remove_error","number","email","set_error_message","_ref2","setCustomValidity","error_node","validation_message","validationMessage","error_template","firstChild","did_disable","formNoValidate","_input","zoom","$block","onZoom","get_target","debounced_scroll_end","scroll_to_bottom","translate","getOptions","patternName","elOptions","tmpOptions","initBasePattern","Registry","mockupParser","defaults","emit","eventName","eventCallback","patternProps","Surrogate","__super__","autoregister","ArgumentParser","order","enum_values","enum_conflicts","groups","possible_groups","group_pattern","json_param_pattern","named_param_pattern","token_pattern","_camelCase","__","alias","addGroupToSpec","spec","group","first_spec","first_name","dest","choices","multiple","addJSONArgument","default_value","_typeof","choice","_coerce","num","_set","part","_split","tokens","quoted","simple","_parseExtendedNotation","argstring","arg","subopt","_parseShorthandNotation","parameter","sense","positional","sep","extended","_defaults","_cleanupOptions","group_options","inherit","$possible_config_providers","final_length","provider","current_value","Moment","out","strict","fromNow","rtf","Intl","RelativeTimeFormat","numeric","toDate","lastWeek","lastDay","sameDay","nextDay","nextWeek","sameElse","noSuffix","DATA_PREFIX","DATA_STYLE_DISPLAY","INPUT_SELECTOR","property","as_pixels","as_float","getPropertyValue","get_relative_position","reference_el","scrollLeft","event_id","_ready","readyState","display","find_parents","get_parents","HTMLElement","include_empty","include_all","offsetWidth","offsetHeight","string","createRange","createContextualFragment","fallback","overflow_y","overflow_x","get_scroll_x","scroll_reference","scrollX","scrollY","delete_data","template_string","template_variables","rect","container_rect","visible_ratio","rect_height","CSS","escape","element_uuid","tippy","active_class","inactive_class","Tippy","tippy_options","parseOptionsForTippy","defaultProps","animation","arrow","hideOnClick","ignoreAttributes","interactive","onHide","_onHide","onShow","_onShow","setDefaultProps","markInactive","placement","pos0","r","l","pos1","popperOptions","modifiers","arrowPadding","padding","parsers","flip_options","policy","fallbacks","fallbackPlacements","allowHTML","_initialize_content","popper","tippy_classes","close_button","setProps","_get_content","setContent","get_url_parts","data_type_handlers","ajaxDataType","popperInstance","forceUpdate","get_content","tmp","markdown","Markdown","instance","register_type_handler"],"sourceRoot":""}